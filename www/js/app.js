(function () { "use strict"; var e = typeof window == "undefined" ? global : window; if (typeof e.require == "function") return; var t = {}, n = {}, r = {}, i = {}.hasOwnProperty, s = function (e, t) { return e.indexOf(t, e.length - t.length) !== -1 }, o = "components/", u = function (e, t) { var n = 0; t && (t.indexOf(o) === 0 && (n = o.length), t.indexOf("/", n) > 0 && (t = t.substring(n, t.indexOf("/", n)))); var i = r[e + "/index.js"] || r[t + "/deps/" + e + "/index.js"]; return i ? o + i.substring(0, i.length - ".js".length) : e }, a = /^\.\.?(\/|$)/, f = function (e, t) { var n = [], r, i = (a.test(t) ? e + "/" + t : t).split("/"); for (var s = 0, o = i.length; s < o; s++) r = i[s], r === ".." ? n.pop() : r !== "." && r !== "" && n.push(r); return n.join("/") }, l = function (e) { return e.split("/").slice(0, -1).join("/") }, c = function (t) { return function (r) { var i = f(l(t), r); return e.require(i, t) } }, h = function (e, t) { var r = { id: e, exports: {} }; return n[e] = r, t(r.exports, c(e), r), r.exports }, p = function (e, r) { var s = f(e, "."); r == null && (r = "/"), s = u(e, r); if (i.call(n, s)) return n[s].exports; if (i.call(t, s)) return h(s, t[s]); var o = f(s, "./index"); if (i.call(n, o)) return n[o].exports; if (i.call(t, o)) return h(o, t[o]); throw new Error('Cannot find module "' + e + '" from ' + '"' + r + '"') }; p.alias = function (e, t) { r[t] = e }, p.register = p.define = function (e, n) { if (typeof e == "object") for (var r in e) i.call(e, r) && (t[r] = e[r]); else t[e] = n }, p.list = function () { var e = []; for (var n in t) i.call(t, n) && e.push(n); return e }, p.brunch = !0, p._cache = n, e.require = p })(), require.register("application", function (e, t, n) { var r = t("lib/constants"); subjectCollection = t("models/subjectCollection"), unitCollection = t("models/unitCollection"), articleCollection = t("models/articleCollection"), singleArticleCollection = t("models/singleArticleCollection"), galleryCollection = t("models/galleryCollection"), galleryIndexCollection = t("models/galleryIndexCollection"), videoCollection = t("models/videoCollection"), videoIndexCollection = t("models/videoIndexCollection"), searchCollection = t("models/searchCollection"), quizCollection = t("models/quizCollection"), quizIndexCollection = t("models/quizIndexCollection"), landingPageCollection = t("models/landingPageCollection"), businessPageCollection = t("models/businessPageCollection"), explorePageCollection = t("models/explorePageCollection"), lessonPlanHeadersCollection = t("models/lessonPlanHeadersCollection"), lessonPlanContentCollection = t("models/lessonPlanContentCollection"), parentsFomCollection = t("models/parentsFomCollection"), privateModeTemplate = t("views/templates/private_mode"), subjectData = {}, unitData = {}, articleData = {}, searchData = {}, subjectDataRetrieved = !1, unitDataRetrieved = !1, articleDataRetrieved = !1, singleArticleDataRetrieved = !1, quizIndexRetrieved = !1, quizDataRetrieved = !1, businessPageDataRetrieved = !1, explorePageDataRetrieved = !1, landingPageDataRetrieved = !1, lessonPlanHeadersDataRetrieved = !1, lessonPlanContentDataRetrieved = !1, parentsFomDataRetrieved = !1, dataLoading = !1, currentDataLayer = { event: "pageview", virtualPageURL: "", virtualPageTitle: "", actualURL: "" }, Application = { hasDataLoaded: 1, initialize: function () { function n(e) { var t = document.cookie.split(";"); for (var n = 0; n < t.length; n++) { var r = t[n]; while (r.charAt(0) === " ") r = r.substring(1, r.length); if (r.indexOf(e) === 0) return !0 } return !1 } console.log("initialise application"); var e = this; if (!Utilities.localStorageTest()) return $("body").html(privateModeTemplate({ privateBrowsingText: "Sorry, you'll need to turn off Private Browsing in your browser's settings to access DK Findout!" })), !1; var i = n("glt_"); i || (localStorage.removeItem(r.campaignCode + "user-profile"), localStorage.removeItem(r.campaignCode + "planningMode")), subjectData = new subjectCollection, unitData = new unitCollection, articleData = new articleCollection, singleArticleData = new singleArticleCollection, galleryIndex = new galleryIndexCollection, galleryData = new galleryCollection, videoIndex = new videoIndexCollection, videoData = new videoCollection, searchData = new searchCollection, quizIndex = new quizIndexCollection, quizData = new quizCollection, landingPageData = new landingPageCollection, businessPageData = new businessPageCollection, explorePageData = new explorePageCollection, lessonPlanHeadersData = new lessonPlanHeadersCollection, lessonPlanContentData = new lessonPlanContentCollection, parentsFomData = new parentsFomCollection, lessonPlanContentData.comparator = "order"; var s = t("views/header_view"), o = t("views/footer_view"), u = t("views/search_view"), a = t("views/business_page_view"), f = t("views/landing_page_view"), l = t("views/not_found_view"), c = t("views/show_article_view"), h = t("views/gallery_view"), p = t("views/video_view"), d = t("views/quiz_view"), v = t("views/discover_view"), m = t("views/select_language_view"), g = t("views/teachers_view"), y = t("views/parents_view"), b = t("views/newsletter_sign_up_view"), w = t("views/newsletter_confirmation_view"), E = t("views/lesson_plan_view"), S = t("views/lesson_plan_toolbar_view"), x = t("views/lesson_plan_controls_view"), T = t("views/notes_toolbar_view"), N = t("views/dialog_view"), C = t("views/explore_landing_view"), k = t("views/explore_article_view"), L = t("lib/router"); this.headerView = new s, this.footerView = new o, this.searchView = new u, this.businessPageView = new a, this.landingPageView = new f, this.notFoundView = new l, this.showArticleView = new c, this.galleryView = new h, this.videoView = new p, this.quizView = new d, this.discoverView = new v, this.selectLanguageView = new m, this.teachersView = new g, this.parentsView = new y, this.newsletterSignUpView = new b, this.newsletterConfirmationView = new w, this.lessonPlanView = new E, this.lessonPlanToolbarView = new S, this.lessonPlanControlsView = new x, this.notesToolbarView = new T, this.dialogView = new N, this.exploreLandingView = new C, this.exploreArticleView = new k, this.router = new L, typeof Object.freeze == "function" && Object.freeze(this) } }, n.exports = Application }), require.register("initialize", function (e, t, n) { var r = t("application"), i = t("lib/utilities"), s = t("lib/constants"); $(function () { console.log("called initialise"); var e = this; i.initialize(), s.initialize(), r.initialize(), Backbone.history.start({ pushState: !0 }) }) }), require.register("lib/constants", function (e, t, n) { analyticsCode = "DKFO", Constants = { domain: "http://www.dkfindout.com", storageDomain: "http://www.dkfindout.com", campaignCode: "DKFO_01_", hashFragment: "", languageCode: "en-gb", siteName: "DK Find Out!", devDocumentAPI: "http://dev.idiotsguides.com/dynamic/", liveDocumentAPI: "http://dev.idiotsguides.com/dynamic/", stagingDocumentAPI: "http://dev.idiotsguides.com/dynamic/", devContentAPI: "http://dev.dkfindout.com/hugoagogo/", previewContentAPI: "http://preview.dkfindout.com/hugoagogo/", imgLocation: "http://res.cloudinary.com/dk-find-out/image/upload/", imgExt: ".jpg", imgGalleryThumb: "q_80,c_limit,h_80,w_80/", imgGalleryThumbCrop: "q_80,c_fill,h_80,w_80/", imgThumbLimit: "q_80,c_limit,h_160,w_160/", imgThumb: "q_80,w_160/", imgFacebook: "q_70,c_pad,w_1200,h_630/", imgShare: "q_80,c_limit,h_144,w_144/", imgPlanThumb: "q_80,c_limit,h_160,w_200/", imgSearch: "q_80,c_limit,h_140,w_255/", imgGrid: "q_80,w_320/", imgGridWide: "q_80,w_640/", imgGridTall: "q_80,h_640/", imgGallery: "q_80,h_800/", imgTablet: "q_80,w_960/", imgDesktop: "q_80,w_1440/", imgLarge: "q_80,w_1920/", imgTall: "q_80,h_5000/", imgScrollLandscape: "q_80,h_700/", imgScrollLandscapeLarge: "q_80,h_1000/", imgScrollLandscape5000: "q_80,w_5000/", imgLink: "q_80,c_lpad,h_260,w_400/", imgExplore: "q_80,c_lpad,h_760,w_1380/", mobileSize: 320, tabletSize: 585, desktopSize: 945, loginDesktopUK: "uk-teacher-registration", loginMobileUK: "uk-teacher-registration-mobile", loginDesktopUS: "us-teacher-registration", loginMobileUS: "us-teacher-registration-mobile", secondStageRegistration: "teacher-additional-info", secondStageRegistrationMobile: "teacher-additional-info-mobile", secondStageRegistrationUS: "us-teacher-additional-info", secondStageRegistrationMobileUS: "us-teacher-additional-info-mobile", registrationScreen: "gigya-register-screen", adestraLocation: "http://dk.msgfocus.com/s/", dialogMessages: [], sessionHistory: 1, viewArray: [], carouselRatio: .25, languageDefined: !1, lastSubjectToDisplay: "more-find-out", subjectChange: {}, unitChange: {}, galleryDataReady: {}, videoDataReady: {}, searchDataReady: {}, quizDataReady: {}, dataReady: {}, loginStatus: {}, loadJSONData: function (e, t) { var n = null, r = "/data/" + t + "/" + e; return console.log("constants.loadJSONData; loading ... " + r), $.ajax({ url: r, complete: function (e) { console.log("----- completed ") }, success: function (e) { console.log("----- success"), n = e }, error: function () { console.error("----- can't load/find data") }, async: !1 }), n }, initialize: function () { console.log("initialize constants"); if (!Utilities.localStorageTest()) return !1; localStorage.domain = "/", localStorage.setItem(this.campaignCode + "subject", ""), localStorage.setItem(this.campaignCode + "unit", ""), localStorage.setItem(this.campaignCode + "article", ""), localStorage.setItem(this.campaignCode + "search_subject", ""), localStorage.setItem(this.campaignCode + "keyword", ""), localStorage.setItem(this.campaignCode + "landing_page", ""), _.extend(this.subjectChange, Backbone.Events), _.extend(this.unitChange, Backbone.Events), _.extend(this.dataReady, Backbone.Events), _.extend(this.loginStatus, Backbone.Events), this.languages = content, this.staticMessaging = content[0].staticMessaging, this.menuLinks = content[0].menuLinks, this.metaData = content[0].meta, this.dialogMessages = content[0].dialog } }, n.exports = Constants }), require.register("lib/router", function (e, t, n) { var r = t("application"), i = t("../lib/utilities"), s = t("../lib/constants"); n.exports = Backbone.Router.extend({ id: "router", routes: { "": "home", "(:language)/(:subject)(/:unit)(/:article)(/:id)(/)": "seoRouting", "(:subject)(/:unit)(/:article)(/:id)(/)": "seoRouting", "*notFound": "notFound" }, seoRouting: function (e, t, n, r, o) { i.log(this.id, "seoRouting"), i.log(this.id, "level1: " + e, "*****"), i.log(this.id, "level2: " + t, "*****"), i.log(this.id, "level3: " + n, "*****"), i.log(this.id, "level4: " + r, "*****"), i.log(this.id, "level5: " + o, "*****"); var u = JSON.parse(i.getUserProfile()); if (u) { var a = u.uid; this.loadLessonPlanHeadersData(), this.loadLessonPlanContentData() } if (langDir) { console.log("level1: ", e), console.log("utilities.getLanguageCode(): ", i.getLanguageCode()); var f = !1; for (var l = 0; l < s.languages.length; l++) if (s.languages[l].directory === e) { i.getLanguageCode() === null ? i.setLanguageCode(e) : e !== i.getLanguageCode() && (i.setLanguageCode(e), window.location.reload()), i.updateLanguageConstants(l), f = !0; break } if (!f) { var c = !1; for (var l = 0; l < s.languages.length; l++) if (s.languages[l].directory === i.getLanguageCode()) { c = !0, i.updateLanguageConstants(l); break } c || i.setLanguageCode("uk"), this.loadMainData(), this.notFound(); return } if (!t) { this.loadMainData(), this.landingPage("home"), this.isLanguageDefined(); return } e = t, t = n, n = r, r = o } else i.getLanguageCode() || i.setLanguageCode("uk"); e && this.loadMainData(); switch (e) { case "discover": t ? this.notFound() : this.discover(); break; case "gallery": this.gallery(t, n); break; case "video": this.video(t, n); break; case "search": this.search(t, n); break; case "quiz": this.quiz(n); break; case "explore": n ? this.notFound() : t ? this.exploreArticle(t) : this.exploreLanding(); break; case "newsletter-signup": t ? this.notFound() : this.newsletterSignUp(); break; case "newsletter-confirmation": t ? this.notFound() : this.newsletterConfirmation(); break; case "terms-and-conditions": case "privacy-and-cookies": case "about-us": case "contact-us": case "faqs": case "about-dk": case "acknowledgements": case "acknowledgments": t ? this.notFound() : this.businessPage(e); break; case "teachers": t ? this.notFound() : this.teachers(); break; case "parents": t ? this.notFound() : this.parents(); break; case "lesson-plan": if (!JSON.parse(i.getUserProfile())) { console.log("not logged in"); var h = "/" + i.getLanguageCode() + "/teachers/"; this.navigate(h, !0) } else n ? this.notFound() : this.lessonPlan(t); break; default: this.showArticle(e, t, n, r) } this.isLanguageDefined() }, loadContent: function (e, t) { console.log("[router] entering loadContent with subject: " + e + ", unit: " + t); if (dataLoading) return console.log("data already loading"), !1; dataLoading = !0; var n = i.getCurrentSubject(); n !== e && (console.log("[router] LOAD CONTENT DATA for subject: " + e), i.loadNewSubject(e)); if (t) { var r = i.getCurrentUnit(); t !== r && (console.log("[router] LOAD CONTENT DATA for unit: " + t), i.loadNewUnit(t, e)) } return !0 }, loadMainData: function () { console.log("[router] LOAD MAIN DATA"); if (!subjectDataRetrieved) { var e = i.getPathToAPI("subjects"); subjectData.fetch({ url: e, complete: function (e) { console.log("SUBJECTS data is completed") }, success: function (e) { console.log("SUBJECTS data is successful"), subjectDataRetrieved = !0, s.dataReady.trigger("subjects") }, error: function (e) { console.log("SUBJECTS data has error") } }) } if (!businessPageDataRetrieved) { var t = i.getPathToAPI("business"); businessPageData.fetch({ url: t, complete: function (e) { console.log("BUSINESS PAGE data is completed") }, success: function (e) { console.log("BUSINESS PAGE data is successful"), businessPageDataRetrieved = !0, s.dataReady.trigger("businessPages") }, error: function (e) { console.log("BUSINESS PAGE data has error") } }) } if (!explorePageDataRetrieved) { var n = i.getPathToAPI("explore"); explorePageData.fetch({ url: n, complete: function (e) { console.log("EXPLORE PAGES data is completed") }, success: function (e) { console.log("EXPLORE PAGES data is successful"), explorePageDataRetrieved = !0, s.dataReady.trigger("explorePages") }, error: function (e) { console.log("EXPLORE PAGES data has error") } }) } if (!quizIndexRetrieved) { var r = i.getPathToAPI("quiz-index"); quizIndex.fetch({ url: r, complete: function (e) { console.log("QUIZ INDEX data is completed") }, success: function (e) { console.log("QUIZ INDEX data is successful"), quizIndexRetrieved = !0 }, error: function (e) { console.log("QUIZ INDEX data has error") } }) } if (!parentsFomDataRetrieved) { var o; i.getLanguageCode() == "uk" ? o = "en-gb" : o = "en"; var u = "/data/" + o + "/home.json"; $.ajax({ url: u, dataType: "json", type: "GET", complete: function (e) { parentsFomDataRetrieved = !0 }, success: function (e) { parentsFomData.set(e[0].carousel), s.dataReady.trigger("parentsFomSection") }, error: function (e, t, n) { } }) } }, loadLessonPlanHeadersData: function () { console.log("[router] LOAD LESSON PLAN HEADER DATA"); var e = JSON.parse(i.getUserProfile()), t = e.uid; if (!lessonPlanHeadersDataRetrieved) { var n = i.getPathToDocumentAPI() + "content/" + t + "?type=lessonPlanHeader"; lessonPlanHeadersData.fetch({ url: n }).complete(function () { console.log("LESSON PLAN HEADER data is completed"), lessonPlanHeadersDataRetrieved = !0, s.dataReady.trigger("lessonPlanHeaderData") }) } }, loadLessonPlanContentData: function () { console.log("[router] LOAD LESSON PLAN CONTENT DATA"); var e = JSON.parse(i.getUserProfile()), t = e.uid; if (!lessonPlanContentDataRetrieved) { var n = i.getPathToDocumentAPI() + "content/" + t + "?type=lessonPlanContent"; lessonPlanContentData.fetch({ url: n }).complete(function () { console.log("LESSON PLAN CONTENT data is completed"), lessonPlanContentDataRetrieved = !0, s.dataReady.trigger("lessonPlanContentData") }) } }, loadSubject: function (e) { console.log("[router] LOAD SUBJECT " + e); var t = this; if (!unitDataRetrieved) t.loadContent(e); else { var n = i.getCurrentSubject(); console.log("currentSubject: " + n + ", subject: " + e), n !== e && t.loadContent(e) } return !0 }, loadUnit: function (e, t) { console.log("[router] LOAD UNIT " + t); var n = this; if (!articleDataRetrieved) n.loadContent(e, t); else { var r = i.getCurrentUnit(); console.log("currentUnit: " + r + ", unit: " + t), r !== t && n.loadContent(e, t) } return !0 }, notFound: function () { i.hidePreviousView("not_found_view", "main", ["header_view", "footer_view"]), i.loadLandingPage("not-found"), this.header(), $(r.notFoundView.render().el).insertAfter("#header_view"), this.footer() }, header: function (e) { $("#header_view").length == 0 && $("body").append(r.headerView.render(e).el) }, footer: function () { $("#footer_view").length == 0 && $("body").append(r.footerView.render().el) }, search: function (e, t) { console.log("[router] search"), e ? (i.hidePreviousView("search_view", "main"), $("#search_view").length == 0 && $("body").append(r.searchView.render(e, t).el), i.getSearchResults(t, e)) : (i.hidePreviousView("search_view", "subview"), $("body").append(r.searchView.render(e, t).el)) }, quiz: function (e) { console.log("[router] quiz"), i.hidePreviousView("quiz_view", "main"), i.setCurrentQuiz(e), $("body").append(r.quizView.render(e).el), i.loadQuiz(e), i.getPlanningMode() && this.lessonPlanToolbar("quiz"), i.getPlayMode() && this.lessonPlanControls() }, home: function () { if (window.location.pathname.length > 1) return !1; langDir ? i.getLanguageDefined() == "true" && i.getLanguageCode() && !window.location.search ? this.navigate("/" + i.getLanguageCode() + "/", !0) : this.selectLanguage("homepage") : (i.getLanguageCode() || i.setLanguageCode("uk"), this.loadMainData(), this.landingPage("home")) }, landingPage: function (e) { i.hidePreviousView("landing_page_view", "main", ["header_view", "footer_view"]), console.log("[router] landingPage id: " + e), i.loadLandingPage(e), this.header(!0), $(r.landingPageView.render(e).el).insertAfter("#header_view"), this.footer() }, businessPage: function (e) { console.log("[router] businessPage id: " + e), i.hidePreviousView("business_page_view", "main", ["header_view", "footer_view"]), i.setCurrentBusinessPage(e), this.header(), $(r.businessPageView.render(e).el).insertAfter("#header_view"), this.footer() }, exploreLanding: function () { i.hidePreviousView("explore_landing_view", "main", ["header_view", "footer_view"]), this.header(!0), $(r.exploreLandingView.render().el).insertAfter("#header_view"), this.footer() }, exploreArticle: function (e) { console.log("[router] exploreArticle titleFriendly: " + e), i.hidePreviousView("explore_article_view", "main", ["header_view", "footer_view"]), this.header(!0), $(r.exploreArticleView.render(e).el).insertAfter("#header_view"), this.footer() }, showArticle: function (e, t, n, s) { console.log("[router] showArticle subject: " + e + ", unit: " + t + ", article: " + n + ", id: " + s), i.hidePreviousView("show_article_view", "main", ["header_view", "footer_view"]), this.header(), s || (n ? n.indexOf("id=") !== -1 && (s = n, n = null) : t && t.indexOf("id=") !== -1 && (s = t, t = null)), s && (s = s.replace("id=", "")), i.loadSingleArticle(e, t, n, s), i.setCurrentArticleType("subject"), t && i.setCurrentArticleType("unit"), n && (i.setCurrentArticleType("article"), i.setCurrentArticle(n)), $("#show_article_view").length == 0 ? $(r.showArticleView.render(n, t, e).el).insertAfter("#header_view") : r.showArticleView.render(n, t, e), this.footer(), i.getPlanningMode() && this.lessonPlanToolbar("article"), i.getPlayMode() && this.lessonPlanControls() }, gallery: function (e, t) { console.log("[router] gallery subject: " + e + ", id: " + t), i.findGallery(e, t) == 0 ? r.router.notFound() : (i.hidePreviousView("gallery_view", "main", ["lesson_plan_toolbar_view"]), $("body").append(r.galleryView.render(e, t).el)), i.getPlanningMode() && this.lessonPlanToolbar("gallery"), i.getPlayMode() && this.lessonPlanControls() }, video: function (e, t) { console.log("[router] video subject: " + e + ", id: " + t), i.findVideo(e, t) == 0 ? r.router.notFound() : (i.hidePreviousView("video_view", "main", ["lesson_plan_toolbar_view"]), $("body").append(r.videoView.render(e, t).el)), i.getPlanningMode() && this.lessonPlanToolbar("video"), i.getPlayMode() && this.lessonPlanControls() }, discover: function (e, t, n) { i.hidePreviousView("discover_view", "main"), $("html").removeClass("fullscreen-layout"); var s = i.getCurrentSubject(), o = i.getCurrentUnit(), u = i.getCurrentArticle(); t ? this.loadUnit(e, t) : e ? (this.loadSubject(e), t = o) : (t = o, e = s), n || (n = u), $("body").append(r.discoverView.render(e, t, n).el) }, selectLanguage: function (e) { console.log("[router] selectLanguage"), $("body").append(r.selectLanguageView.render(e).el) }, isLanguageDefined: function () { return console.log("[router] isLanguageDefined"), window.location.search.indexOf("?_escaped_fragment_=") !== -1 ? !1 : (i.getLanguageDefined() !== "true" && (console.log("[router] language is not defined"), this.selectLanguage("welcome")), !0) }, teachers: function () { console.log("[router] teachers"), i.hidePreviousView("teachers_view", "main", ["header_view", "footer_view"]), i.loadLandingPage("teachers"), this.header(!0), $(r.teachersView.render().el).insertAfter("#header_view"), this.footer() }, parents: function () { console.log("[router] parents"), i.hidePreviousView("parents_view", "main", ["header_view", "footer_view"]), i.loadLandingPage("parents"), this.header(!0), $(r.parentsView.render().el).insertAfter("#header_view"), this.footer() }, newsletterSignUp: function () { console.log("[router] newsletterSignUp"), i.hidePreviousView("newsletter_sign_up", "main", ["header_view", "footer_view"]), i.loadLandingPage("newsletter-sign-up"), this.header(!0), $(r.newsletterSignUpView.render().el).insertAfter("#header_view"), this.footer() }, newsletterConfirmation: function () { console.log("[router] newsletter-confirmation"), i.hidePreviousView("newsletter-confirmation", "main", ["header_view", "footer_view"]), i.loadLandingPage("newsletter-confirmation"), this.header(!0), $(r.newsletterConfirmationView.render().el).insertAfter("#header_view"), this.footer() }, lessonPlan: function (e) { console.log("[router] lessonPlan"), i.hidePreviousView("lesson_plan_view", "main"), $("body").append(r.lessonPlanView.render(e, !0).el) }, lessonPlanToolbar: function () { $("body").append(r.lessonPlanToolbarView.render().el) }, lessonPlanControls: function () { $("body").append(r.lessonPlanControlsView.render().el) }, notesToolbar: function (e, t) { $("body").append(r.notesToolbarView.render(e, t).el) }, dialog: function (e, t) { $("body").append(r.dialogView.render(e, t).el) } }) }), require.register("lib/utilities", function (e, t, n) { var r = t("application"), i = t("./constants"); typeof String.prototype.trim != "function" && (String.prototype.trim = function () { return this.replace(/^\s+|\s+$/g, "") }), Array.prototype.indexOf || (Array.prototype.indexOf = function (e, t) { if (this === undefined || this === null) throw new TypeError('"this" is null or not defined'); var n = this.length >>> 0; t = +t || 0, Math.abs(t) === Infinity && (t = 0), t < 0 && (t += n, t < 0 && (t = 0)); for (; t < n; t++) if (this[t] === e) return t; return -1 }), Utilities = { id: "utilities", defaultDiacriticsRemovalMap: [{ base: "A", letters: /[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g }, { base: "AA", letters: /[\uA732]/g }, { base: "AE", letters: /[\u00C6\u01FC\u01E2]/g }, { base: "AO", letters: /[\uA734]/g }, { base: "AU", letters: /[\uA736]/g }, { base: "AV", letters: /[\uA738\uA73A]/g }, { base: "AY", letters: /[\uA73C]/g }, { base: "B", letters: /[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g }, { base: "C", letters: /[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g }, { base: "D", letters: /[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g }, { base: "DZ", letters: /[\u01F1\u01C4]/g }, { base: "Dz", letters: /[\u01F2\u01C5]/g }, { base: "E", letters: /[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g }, { base: "F", letters: /[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g }, { base: "G", letters: /[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g }, { base: "H", letters: /[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g }, { base: "I", letters: /[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g }, { base: "J", letters: /[\u004A\u24BF\uFF2A\u0134\u0248]/g }, { base: "K", letters: /[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g }, { base: "L", letters: /[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g }, { base: "LJ", letters: /[\u01C7]/g }, { base: "Lj", letters: /[\u01C8]/g }, { base: "M", letters: /[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g }, { base: "N", letters: /[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g }, { base: "NJ", letters: /[\u01CA]/g }, { base: "Nj", letters: /[\u01CB]/g }, { base: "O", letters: /[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g }, { base: "OI", letters: /[\u01A2]/g }, { base: "OO", letters: /[\uA74E]/g }, { base: "OU", letters: /[\u0222]/g }, { base: "P", letters: /[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g }, { base: "Q", letters: /[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g }, { base: "R", letters: /[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g }, { base: "S", letters: /[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g }, { base: "T", letters: /[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g }, { base: "TZ", letters: /[\uA728]/g }, { base: "U", letters: /[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g }, { base: "V", letters: /[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g }, { base: "VY", letters: /[\uA760]/g }, { base: "W", letters: /[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g }, { base: "X", letters: /[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g }, { base: "Y", letters: /[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g }, { base: "Z", letters: /[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g }, { base: "a", letters: /[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g }, { base: "aa", letters: /[\uA733]/g }, { base: "ae", letters: /[\u00E6\u01FD\u01E3]/g }, { base: "ao", letters: /[\uA735]/g }, { base: "au", letters: /[\uA737]/g }, { base: "av", letters: /[\uA739\uA73B]/g }, { base: "ay", letters: /[\uA73D]/g }, { base: "b", letters: /[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g }, { base: "c", letters: /[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g }, { base: "d", letters: /[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g }, { base: "dz", letters: /[\u01F3\u01C6]/g }, { base: "e", letters: /[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g }, { base: "f", letters: /[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g }, { base: "g", letters: /[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g }, { base: "h", letters: /[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g }, { base: "hv", letters: /[\u0195]/g }, { base: "i", letters: /[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g }, { base: "j", letters: /[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g }, { base: "k", letters: /[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g }, { base: "l", letters: /[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g }, { base: "lj", letters: /[\u01C9]/g }, { base: "m", letters: /[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g }, { base: "n", letters: /[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g }, { base: "nj", letters: /[\u01CC]/g }, { base: "o", letters: /[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g }, { base: "oi", letters: /[\u01A3]/g }, { base: "ou", letters: /[\u0223]/g }, { base: "oo", letters: /[\uA74F]/g }, { base: "p", letters: /[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g }, { base: "q", letters: /[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g }, { base: "r", letters: /[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g }, { base: "s", letters: /[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g }, { base: "t", letters: /[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g }, { base: "tz", letters: /[\uA729]/g }, { base: "u", letters: /[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g }, { base: "v", letters: /[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g }, { base: "vy", letters: /[\uA761]/g }, { base: "w", letters: /[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g }, { base: "x", letters: /[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g }, { base: "y", letters: /[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g }, { base: "z", letters: /[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g }], defaultSymbolRemovalMap: [{ base: "-", symbols: /[\u2013\u2014\u00A0\u2060]/g }, { base: "and", symbols: /[\u002B\u0026]/g }, { base: "-14", symbols: /[\u00BC]/g }, { base: "-12", symbols: /[\u00BD]/g }, { base: "-34", symbols: /[\u00BE]/g }], initialize: function () { console.log("initialize utilities"); var e = this }, ToF: function (e) { return e == 1 || e === "true" || e === "TRUE" ? !0 : !1 }, log: function (e, t, n) { n !== undefined ? console.log(n + " [" + e + "] " + t) : console.log("[" + e + "] " + t) }, removeDiacritics: function (e) { for (var t = 0; t < this.defaultDiacriticsRemovalMap.length; t++) e = e.replace(this.defaultDiacriticsRemovalMap[t].letters, this.defaultDiacriticsRemovalMap[t].base); return e }, removeSymbols: function (e) { for (var t = 0; t < this.defaultSymbolRemovalMap.length; t++) e = e.replace(this.defaultSymbolRemovalMap[t].symbols, this.defaultSymbolRemovalMap[t].base); return e }, unlockScreen: function () { return console.log("unlockScreen"), $("body").removeClass("screenlock-mobile"), $("body").removeClass("screenlock-desktop"), !1 }, lockScreen: function (e) { console.log("lockScreen"); switch (e) { case "desktop": $("body").addClass("screenlock-desktop"); break; case "mobile": $("body").addClass("screenlock-mobile"); break; default: $("body").addClass("screenlock-mobile"), $("body").addClass("screenlock-desktop") } return !1 }, navigateRemoveView: function (e, t, n, i) { console.log(">>>>> navigateRemoveView and URL is " + e.attr("href")); var s = e.attr("href"), o = !0; i && (o = { trigger: !0, replace: !0 }), console.log("+++++ options are " + o), r.router.navigate(s, o), n != 0 && (t.remove(), t.unbind()) }, preloadImages: function (e, t) { $(e).each(function () { $("<img/>")[0].src = this }) }, localStorageTest: function () { var e = "test"; try { return localStorage.setItem(e, e), localStorage.removeItem(e), !0 } catch (t) { return !1 } }, setLoginID: function (e) { return console.log("***** uid is " + e), localStorage.setItem(i.campaignCode + "loginID", e), !0 }, getLoginID: function () { return localStorage.getItem(i.campaignCode + "loginID") }, returnValueFromJSONObject: function (e, t, n, r) { for (var i = 0; i < t.length; i++) if (t[i][n] && t[i][n].trim() === e) return t[i][r]; return "" }, findModelFromArray: function (e, t) { var n = e._id.$oid, e = null; return $.each(t, function (t, r) { var i = r.get("_id").$oid; console.log("looking for " + n + " and looking at " + i), n === i && (e = r) }), e }, removeView: function (e) { return console.log(">>>>> remove view " + e), e.indexOf("#") !== 0 && (e = "#" + e), $(e).remove(), $(e).unbind(), !0 }, getLinkReady: function (e, t) { console.log(">>>>>>>>> get link ready for " + e), t.$el.find(e).each(function () { var e = $(this).attr("data-link"); $(this).attr("href", e) }) }, createFriendlyString: function (e) { var t = e.toLowerCase().replace(/'|&rsquo;|(<([^>]+)>)/g, ""); return t = this.removeDiacritics(this.removeSymbols(t)), t = t.replace(/\s/g, "-").replace(/-{2,}/g, "-").replace(/[^-a-zA-Z0-9]/g, ""), t = t.replace(/^-|-$/g, ""), t }, showCurrentView: function (e, t) { console.log(">>>>> showCurrentView() for " + e.id), e.$el.removeClass("hidden"), t && $.each(t, function (e, t) { $("#" + this).removeClass("hidden").attr("style", "") }), e.id !== "lesson_plan_toolbar_view" && e.id !== "lesson_plan_controls_view" && (e.id !== "video_view" && r.videoView && r.videoView.player && (r.videoView.player.stopVideo(), r.videoView.player.destroy(), r.videoView.player = ""), e.id !== "quiz_view" && r.quizView && r.quizView.startTimer && r.quizView.stopTimer()) }, hidePreviousView: function (e, t, n) { console.log("***** entering hidePreviousView for " + e + " type is " + t); var r = this; r.clearHypeScripts(); var s = i.viewArray[i.viewArray.length - 1], o = 1, u = i.sessionHistory; if (s != undefined) { $(window).off("resize"), $(window).off("scroll"), t != "subview" && $(".view").each(function () { console.log("view id is " + $(this).attr("id")), n && $.each(n, function (e, t) { if ($(this).attr("id") == t) { console.log("component found"); return } }); if ($(this).attr("id") == e) return; $(this).addClass("hidden") }), t == "subview"; if (window.history && window.history.pushState && i.viewArray.length > 0) { var a = window.history.state; if (a < i.sessionHistory) return i.sessionHistory = a, i.viewArray.pop(), console.log(">>>>> constants.viewArray " + JSON.stringify(i.viewArray)), !1; a > i.sessionHistory ? (i.sessionHistory = a, u = i.sessionHistory, s.id === e && (o = s.count + 1)) : (i.sessionHistory++, u = i.sessionHistory, s.id === e && (o = s.count + 1)) } } if (window.history && window.history.pushState) { var f = i.sessionHistory; window.history.replaceState(f, null, null) } console.log("+++++ add view to array"); var l = { id: e, type: t, components: n, count: o, history: u }; return i.viewArray.push(l), console.log(">>>>> constants.viewArray " + JSON.stringify(i.viewArray)), !0 }, sharePOI: function (e, t) { var n = ""; /Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) && (n = "simpleShare"); var r = "", s = "", o = ""; e != "noData" && (s = e.public_id, e.poiName && (o = this.createFriendlyString(e.poiName))); if (s != undefined) var u = s.$undefined; s === undefined || u || !s ? r = i.imageLocation + "c_pad,h_158,w_158/icons/logo.png" : r = i.imageLocation + i.imgThumb + s + i.imageExt; var a = window.location.href, f = this.getCurrentCity(), l = this.returnValueFromJSONObject(f, i.destinationIdeas, "destination", "display-name"), c = "", h = "", p = ""; switch (t) { default: c = e.poiName + " - on DK Trip Planner", h = $(e.overview).text() } try { var d = new gigya.socialize.UserAction; d.setTitle(c), d.setLinkBack(a), d.setDescription(h), d.addMediaItem({ type: "image", src: r, href: a }) } catch (v) { var d = null; console.error("Exception:gigya not initialised") } var m = { userAction: d, cid: "", deviceType: "auto", operationMode: n }; return m }, updateMeta: function (e, t, n) { console.log("[utilities] updateMeta"); var r = this, s = "", o = "", u = "", a = "", f = "noindex, nofollow"; t === !0 && (f = "index, follow"); var l = window.location.href, c = window.location.pathname + window.location.search, h = "", p = "image/jpeg", d = "", v = "article", m = "", g = !1; e != "noData" && e && (m = e.title, e.metaDescription ? s = e.metaDescription : e.metaDesc ? s = e.metaDesc : s = $(e.intro).text(), s.length > 160 && (s = s.substring(0, 157) + "..."), e.metaTitle ? o = e.metaTitle : o = e.title + " | " + i.siteName, e.themeImage && (d = e.themeImage.publicID), e.socialShareTitle ? u = e.socialShareTitle : u = m, e.socialShareDescription ? a = e.socialShareDescription : a = s), d ? h = i.imgLocation + i.imgFacebook + d + i.imgExt : h = i.imgLocation + "icons/DKfindout_summary_card.jpg"; switch (n) { case "home": v = "website", o = r.returnValueFromJSONObject(n, i.metaData, "name", "title"), s = r.returnValueFromJSONObject(n, i.metaData, "name", "description"); break; case "search": o = "Search | " + i.siteName, s = "Search the DK Find Out website", this.getSearchKeyword() && (o = "Search results for '" + this.getSearchKeyword() + "' | " + i.siteName, s = "Search results for: '" + this.getSearchKeyword() + "'"); break; case "video": o = e.title + " video | " + i.siteName, s = "Watch the " + e.title + " video on DK Find Out"; break; case "discover": o = r.returnValueFromJSONObject(n, i.metaData, "name", "title"), s = r.returnValueFromJSONObject(n, i.metaData, "name", "description"); break; case "lesson-plan": o = r.returnValueFromJSONObject(n, i.metaData, "name", "title"); break; case "explore": o = r.returnValueFromJSONObject(n, i.metaData, "name", "title"), s = r.returnValueFromJSONObject(n, i.metaData, "name", "description"); break; case "not-found": g = !0 } m || (m = o), u || (u = o), a || (a = s), console.log("+++++++ metaDesc: '" + s + "', metaTitle: '" + o + "', metaRobots: '" + f + "'"), this.updateHrefLang(n), $(document).attr("title", o), $("meta[name=title]").attr("content", o), $("meta[name=description]").attr("content", s), !devApplication && !previewApplication && !stagingApplication && $("meta[name=robots]").attr("content", f), $('meta[property="og:title"]').attr("content", u), $('meta[property="og:description"]').attr("content", a), $('meta[property="og:url"]').attr("content", l), $('meta[property="og:type"]').attr("content", v), $('meta[property="og:image"]').attr("content", h), $('meta[property="og:image:type"]').attr("content", p), r.sendPageViewToGTM(c, o, g) }, sendPageViewToGTM: function (e, t, n) { var r = this, i = e, s = currentDataLayer.virtualPageTitle, o = currentDataLayer.virtualPageURL, u = currentDataLayer.actualURL; console.log("[utilities] sendPageViewToGTM: " + e + ", " + t); if (typeof dataLayer == "undefined" || !t) return !1; n && (i = "/" + r.getLanguageCode() + "/page-not-found/"); if (s === t && o === i && u === e) return !1; currentDataLayer = { event: "pageview", virtualPageURL: i, virtualPageTitle: t, actualURL: e }, dataLayer.push(currentDataLayer), console.log("[utilities] sendPageViewToGTM: " + JSON.stringify(currentDataLayer)) }, updateHrefLang: function (e) { console.log("[utilities] updateHrefLang: " + window.location.href); var t = "http://" + window.location.hostname, n = window.location.pathname, r = "/" + this.getLanguageCode() + "/", s = n.replace(r, ""); $("head link#href-flags").remove(), e == "home" && (s = "", $("head").append('<link id="href-flags" rel="alternate" hreflang="x-default" href="' + t + "/" + '" />')); var o = t + "/uk/" + s; $("head link#href-en-default").attr("href", o), $("head link#href-uk").attr("href", o), $.each(i.languages, function (e, n) { if (n.directory == "uk") return !0; var r = t + "/" + n.directory + "/" + s; $("head link#href-" + n.directory).length ? $("head link#href-" + n.directory).attr("href", r) : $("head").append('<link id="href-' + n.directory + '" rel="alternate" hreflang="' + n.code + '" href="' + r + '" />') }) }, setLanguageCode: function (e) { return localStorage.setItem(i.campaignCode + "language", e), !0 }, getLanguageCode: function () { return localStorage.getItem(i.campaignCode + "language") }, setLanguageDefined: function (e) { return localStorage.setItem(i.campaignCode + "language_defined", e), !0 }, getLanguageDefined: function () { return localStorage.getItem(i.campaignCode + "language_defined") }, setCurrentSubject: function (e) { return localStorage.setItem(i.campaignCode + "subject", e), !0 }, getCurrentSubject: function () { return localStorage.getItem(i.campaignCode + "subject") }, setCurrentUnit: function (e) { return localStorage.setItem(i.campaignCode + "unit", e), !0 }, getCurrentUnit: function () { return localStorage.getItem(i.campaignCode + "unit") }, setCurrentArticle: function (e) { return localStorage.setItem(i.campaignCode + "article", e), !0 }, getCurrentArticle: function () { return localStorage.getItem(i.campaignCode + "article") }, setCurrentArticleType: function (e) { return localStorage.setItem(i.campaignCode + "article_type", e), !0 }, getCurrentArticleType: function () { return localStorage.getItem(i.campaignCode + "article_type") }, setCurrentQuiz: function (e) { return localStorage.setItem(i.campaignCode + "quiz", e), !0 }, getCurrentQuiz: function () { return localStorage.getItem(i.campaignCode + "quiz") }, setSearchSubject: function (e) { return localStorage.setItem(i.campaignCode + "search_subject", e), !0 }, getSearchSubject: function () { return localStorage.getItem(i.campaignCode + "search_subject") }, setSearchKeyword: function (e) { return localStorage.setItem(i.campaignCode + "keyword", e), !0 }, getSearchKeyword: function () { return localStorage.getItem(i.campaignCode + "keyword") }, setCurrentLandingPage: function (e) { return localStorage.setItem(i.campaignCode + "landing_page", e), !0 }, getCurrentLandingPage: function () { return localStorage.getItem(i.campaignCode + "landing_page") }, setCurrentBusinessPage: function (e) { return localStorage.setItem(i.campaignCode + "business_page", e), !0 }, getCurrentBusinessPage: function () { return localStorage.getItem(i.campaignCode + "business_page") }, getPathToAPI: function (e, t, n, r) { console.log("[utilities] getPathToAPI type: " + e + ", subject: " + t + ", unit: " + n + ", id: " + r); var s = "", o = "", u = this.returnValueFromJSONObject(this.getLanguageCode(), i.languages, "directory", "id"); t == undefined && (t = ""), n == undefined && (n = ""); switch (e) { case "subjects": s = "subjects.json", o = "subjects?lang=" + u; break; case "units": s = "/units.json", o = "articles/" + t + "?lang=" + u; break; case "articles": s = "/articles.json", t += "/", o = "articles/" + n + "?lang=" + u; break; case "quizzes": s = "/quizzes.json", t += "/", o = "articles/" + n + "?type=quiz&lang=" + u; break; case "galleries": s = "gallery-index.json", o = "galleries?lang=" + u; break; case "videos": s = "video-index.json", o = "videos?lang=" + u; break; case "quiz-index": s = "quiz-index.json", o = "quizzes?lang=" + u; break; case "business": s = "business-pages.json", o = "articles/business?type=business&lang=" + u; break; case "explore": s = "explore-posts.json", o = "articles/explore-posts?type=business&lang=" + u; break; case "article": s = r + ".json", t += "/", n += "/", o = "article/" + r; break; case "landing": s = t + ".json"; var a = "/data/" + u + "/" + s; return a } var a = "/data/" + u + "/" + t + n + s; return previewApplication && (a = i.previewContentAPI + o), devApplication && (a = "http://dev.dkfindout.com/hugoagogo/" + o, a = i.devContentAPI + o), console.log("[utilities] getPathToAPI url: " + a), a }, getPathToDocumentAPI: function () { return stagingApplication ? i.stagingDocumentAPI : devApplication ? i.devDocumentAPI : i.liveDocumentAPI }, loadNewSubject: function (e) { this.setCurrentSubject(e), localStorage.setItem(i.campaignCode + "unit", ""), unitDataRetrieved = !1, unitData.reset(); var t = this, n = this.getPathToAPI("units", e); unitData.fetch({ url: n, complete: function (e) { console.log("UNITS data is completed") }, success: function (e) { console.log("UNITS data is successful"), unitDataRetrieved = !0, dataLoading = !1, i.subjectChange.trigger("done"), i.dataReady.trigger("units") }, error: function (e) { console.log("UNITS data has error") } }) }, loadNewUnit: function (e, t) { this.setCurrentUnit(e), localStorage.setItem(i.campaignCode + "article", ""), articleDataRetrieved = !1, articleData.reset(), quizDataRetrieved = !1, quizData.reset(); var n = this, r = this.getPathToAPI("articles", t, e); articleData.fetch({ url: r, complete: function (e) { console.log("ARTICLES data is completed") }, success: function (e) { console.log("ARTICLES data is successful"), articleDataRetrieved = !0, dataLoading = !1, i.unitChange.trigger("done"), i.dataReady.trigger("articles") }, error: function (e) { console.log("ARTICLES data has error") } }); var s = this.getPathToAPI("quizzes", t, e); quizData.fetch({ url: s, complete: function (e) { console.log("QUIZ data is completed") }, success: function (e) { console.log("QUIZ data is successful"), quizDataRetrieved = !0, i.dataReady.trigger("quiz") }, error: function (e) { console.log("QUIZ data has error") } }) }, loadLandingPage: function (e) { console.log("[utilities] loadLandingPage"), console.log("current LP is " + this.getCurrentLandingPage()); var t = this; if (e !== t.getCurrentLandingPage()) { landingPageDataRetrieved = !1, landingPageData.reset(); var n = t.getPathToAPI("landing", e); landingPageData.fetch({ url: n, complete: function (e) { console.log("LANDING PAGE data is completed") }, success: function (n) { console.log("LANDING PAGE data is successful"), landingPageDataRetrieved = !0, t.setCurrentLandingPage(e), i.dataReady.trigger("landingPage") }, error: function (e) { console.log("LANDING PAGE data has error") } }) } }, loadBusinessPage: function (e) { console.log("[utilities] loadBusinessPage"), console.log("current business page is " + this.getCurrentLandingPage()); var t = this; if (!businessPageData.length) { var n = this.getPathToAPI("business"); businessPageData.fetch({ url: n, complete: function (e) { console.log("BUSINESS PAGE data is completed") }, success: function (n) { console.log("BUSINESS PAGE data is successful"), t.setCurrentBusinessPage(e), i.dataReady.trigger("businessPage") }, error: function (e) { console.log("BUSINESS PAGE data has error") } }) } }, findGallery: function (e, t) { console.log("[utilities] findGallery subject: " + e + ", gallery: " + t); var n = this; if (galleryIndex.length == 0) { var s = this.getPathToAPI("galleries"); galleryIndex.fetch({ url: s, async: !1 }).complete(function () { console.log("galleryIndex is completed") }) } var o = galleryIndex.findWhere({ titleFriendly: t, subjectFriendly: e }); if (!o) return !1; o = JSON.parse(JSON.stringify(o)), o.unitFriendly !== this.getCurrentUnit() && r.router.loadUnit(e, o.unitFriendly), function u() { if (!articleDataRetrieved || !unitDataRetrieved || !subjectDataRetrieved) { setTimeout(u, 50); return } console.log("++++++ data loaded so lets build galleryData"); if (galleryData.length) { var e = JSON.parse(JSON.stringify(galleryData.models[0])); console.log("we already have galleryData, current url is " + e.titleFriendly + ", new url is " + t); if (e.titleFriendly == t) { i.dataReady.trigger("gallery"); return } } galleryData.reset(); var r = articleData.findWhere({ titleFriendly: o.parent.titleFriendly }); r = JSON.parse(JSON.stringify(r)), n.setCurrentArticle(r.titleFriendly), galleryData.set(r.gallery), console.log("galleryData is " + JSON.stringify(galleryData)), i.dataReady.trigger("gallery") }() }, findVideo: function (e, t) { console.log("[utilities] findVideo subject: " + e + ", video: " + t); var n = this; if (videoIndex.length == 0) { var s = this.getPathToAPI("videos"); videoIndex.fetch({ url: s, async: !1 }).complete(function () { console.log("videoIndex is completed") }) } var o = videoIndex.findWhere({ titleFriendly: t, subjectFriendly: e }); if (!o) return !1; o = JSON.parse(JSON.stringify(o)), o.unitFriendly !== this.getCurrentUnit() && r.router.loadUnit(e, o.unitFriendly), function u() { if (!articleDataRetrieved || !unitDataRetrieved || !subjectDataRetrieved) { setTimeout(u, 50); return } console.log("++++++ data loaded so lets build videoData"); if (videoData) { console.log("we already have videoData, current url is " + videoData.url + ", new url is " + t); if (videoData.titleFriendly == t) { i.dataReady.trigger("video"); return } } videoData.reset(); var e = articleData.findWhere({ titleFriendly: o.parent.titleFriendly }); e = JSON.parse(JSON.stringify(e)), n.setCurrentArticle(e.titleFriendly), videoData.set(e.field_video), i.dataReady.trigger("video") }() }, loadQuiz: function (e) { console.log("[utilities] findQuiz id: " + e); var t = this; (function n() { if (!quizIndexRetrieved) { setTimeout(n, 50); return } console.log("++++++ quiz index loaded so lets build quizData"); if (quizDataRetrieved) { console.log("we already have quizData, current quiz is " + quizData.titleFriendly + ", new quiz is " + e); if (quizData.titleFriendly == e) { i.dataReady.trigger("quiz"); return } } var t = quizIndex.findWhere({ titleFriendly: e }); if (t) { t = JSON.parse(JSON.stringify(t)); var s = t.subjectFriendly, o = t.unitFriendly; o ? r.router.loadUnit(s, o) : r.router.loadSubject(s) } else r.router.notFound() })() }, loadSingleArticle: function (e, t, n, r) { console.log("+++++++++ [utilities] loadSingleArticle subject: " + e + ", unit: " + t + ", article: " + n + ", id:" + r), singleArticleData.reset(), singleArticleDataRetrieved = !1; var i = this; if (r && (previewApplication || devApplication)) { var s = i.getPathToAPI("article", e, t, r); n ? articleDataRetrieved && t == i.getCurrentUnit() ? i.getSingleArticleFromCollection(n, "article", s) : i.downloadSingleArticleFromAPI(s, e, t) : unitDataRetrieved && t == i.getCurrentUnit() ? i.getSingleArticleFromCollection(t, "unit", s) : i.downloadSingleArticleFromAPI(s, e, t) } else i.loadCollections(e, t), function o() { if (n) { if (!articleDataRetrieved || !unitDataRetrieved || !subjectDataRetrieved) { setTimeout(o, 50); return } console.log("++++++ articles ready"), i.getSingleArticleFromCollection(n, "article") } else if (t) { if (!unitDataRetrieved || !subjectDataRetrieved) { setTimeout(o, 50); return } console.log("++++++ units ready"), i.getSingleArticleFromCollection(t, "unit") } else { if (!subjectDataRetrieved) { setTimeout(o, 50); return } console.log("++++++ subjects ready"), i.getSingleArticleFromCollection(e, "subject") } }() }, loadCollections: function (e, t) { console.log("[utilities] loadCollections subject: " + e + ", unit: " + t), t ? r.router.loadUnit(e, t) : r.router.loadSubject(e) }, downloadSingleArticleFromAPI: function (e, t, n) { console.log("[utilities] downloadSingleArticleFromAPI: " + e); var s = this, o = s.returnValueFromJSONObject(s.getLanguageCode(), i.languages, "directory", "id"); $.ajax({ url: e + "?lang=" + o, complete: function (e) { console.log("SINGLE ARTICLE data is complete") }, success: function (e) { console.log("SINGLE ARTICLE data has success"), e.length ? (console.log("SINGLE ARTICLE data is found"), singleArticleData.set(e), singleArticleDataRetrieved = !0, i.dataReady.trigger("article"), s.loadCollections(t, n)) : (console.log("SINGLE ARTICLE data not found"), singleArticleDataRetrieved = !0, i.dataReady.trigger("article"), r.router.notFound()) }, error: function (e) { console.log("SINGLE ARTICLE data has error") } }) }, getSingleArticleFromCollection: function (e, t, n) { console.log("[utilities] getSingleArticleFromCollection: " + e + " (" + t + ")"); var s = this; switch (t) { case "subject": var o = subjectData; break; case "unit": var o = unitData; break; case "article": var o = articleData } var u = o.findWhere({ titleFriendly: e }); u ? (console.log("SINGLE ARTICLE data is found"), singleArticleData.set(u), singleArticleDataRetrieved = !0, i.dataReady.trigger("article")) : (console.log("SINGLE ARTICLE data not found"), n ? s.downloadSingleArticleFromAPI(n) : r.router.notFound()) }, getSearchResults: function (e, t) { console.log("[utilities] getSearchResults "); var n = this; t = t.replace(/-/g, " "); if (t.length === 0) return !1; searchData.reset(); var r = "http://ec2-eu-ireland.opensolr.com/solr/LIVE_DKFO"; stagingApplication && (r = "http://ec2-eu-ireland.opensolr.com/solr/DEV_DKFO"); var s = this.returnValueFromJSONObject(this.getLanguageCode(), i.languages, "directory", "id"), o = r + "/select?q=(text:" + t + " AND language:" + s + ")&wt=json&indent=true&start=0&rows=100"; console.log("search url: " + o), $.ajax({ url: o, dataType: "jsonp", jsonp: "json.wrf", complete: function (e) { }, success: function (e) { searchData.set(e.response.docs), n.setSearchKeyword(t), i.dataReady.trigger("search") }, error: function (e) { } }) }, getSolrSearchSuggestion: function () { return "http://ec2-eu-ireland.opensolr.com/solr/DEV_DKFO/suggest?wt=json" }, displaySearchError: function (e, t) { console.log("[utilities] displaySearchError"); var n = this; switch (t) { case "keyword": var r = n.returnValueFromJSONObject("searchError", i.staticMessaging, "name", "copy"); break; case "subject": var r = n.returnValueFromJSONObject("searchErrorSubject", i.staticMessaging, "name", "copy") } r = "<p class='error'>" + r + "</p>", e.$el.find(".error").length || (e.$el.find(".searchSubmit").after(r), e.$el.find(".error").delay(2e3).fadeOut("slow", function () { $(this).remove() })) }, removeViews: function (e, t) { return t === "takeover" && ($(".view").remove(), $(".view").unbind()), t === "search" && ($(".view").not("#search_view, #search_box_view").remove(), $(".view").not("#search_view, #search_box_view").unbind()), t === "page" && ($(".page").not("#" + e + "_view").remove(), $(".page").not("#" + e + "_view").unbind(), $(".popup").remove(), $(".popup").unbind(), $(".takeover").remove(), $(".takeover").unbind(), $(".search").remove(), $(".search").unbind()), !0 }, returnToPreviousView: function (e) { if (window.history && window.history.pushState) { var t = i.viewArray[i.viewArray.length - 1].count * -1; i.sessionHistory = 1; var n = i.viewArray.length - i.viewArray[i.viewArray.length - 1].count - 1, r = i.viewArray[i.viewArray.length - 1].count + 1; i.viewArray.splice(n, r) } else t = -1; return this.removeView(e), t }, getImageSize: function (e, t, n) { var r = i.imgThumb, s = i.imgGrid, o = i.imgGridWide, u = i.imgTablet, a = i.imgDesktop, f = i.imgScrollLandscape; return screen.availWidth < 600 && (o = i.imgGrid, u = i.imgGridWide, a = i.imgGridWide, f = i.imgGridWide), screen.availWidth > 1280 && screen.availWidth <= 1440 && (u = i.imgDesktop), screen.availWidth > 1440 && (r = i.imgGrid, s = i.imgGridWide, o = i.imgTablet, u = i.imgDesktop, a = i.imgLarge, f = i.imgScrollLandscapeLarge, n > 2.6 && (a = i.imgTall)), e <= 75 && e > 50 ? (console.log("image width is less than 75%"), u) : e <= 50 && e > 25 ? (console.log("image width is less than 50%"), o) : e <= 25 && e > 12.5 ? (console.log("image width is less than 25%"), s) : e <= 12.5 ? (console.log("image width is less than 12.5%"), r) : t == "scrolling-landscape" ? (n < .2 && (f = i.imgScrollLandscape5000), f) : a }, clearInlineStyle: function (e) { console.log("entering clearInlineStyle"), $.each(e, function (e, t) { t.attr("style", "") }) }, focusElement: function (e) { var t = window.scrollX, n = window.scrollY; return e.focus(), window.scrollTo(t, n), this }, sendGoogleEvent: function (e, t, n, r) { if (typeof dataLayer == "undefined") return !1; dataLayer.push({ event: e, eventCategory: t, eventAction: n, eventLabel: r }) }, updateLanguageConstants: function (e) { return console.log("[utilities] updateLanguageConstants: " + e), i.staticMessaging = content[e].staticMessaging, i.menuLinks = content[e].menuLinks, i.metaData = content[e].meta, i.dialogMessages = content[e].dialog, !0 }, setUserProfile: function (e) { return localStorage.setItem(i.campaignCode + "user-profile", JSON.stringify(e)), !0 }, getUserProfile: function () { return this.log("utilities", "[getUserProfile] retrieve content from local storage"), localStorage.getItem(i.campaignCode + "user-profile") }, setStoredLessonPlans: function (e) { return localStorage.setItem(i.campaignCode + "your-lesson-plans", JSON.stringify(e)), !0 }, getStoredLessonPlans: function () { var e = []; this.log("utilities", "[getStoredLessonPlans] retrieve content from local storage"); var t = localStorage.getItem(i.campaignCode + "your-lesson-plans"); return t !== null && (e = JSON.parse(t)), e }, addNewLessonPlan: function () { var e = Date.parse(new Date), t = JSON.parse(this.getUserProfile()), n = { content_id: e.toString(), id: e.toString(), created_date: e, edited_date: e, status: "draft", draft: !0, published: !1, title: this.generateNewTitle(), author: t.friendlyName, guid: t.uid, image: { publicID: "b_rgb:fff,bo_10px_solid_rgb:fff,c_pad,e_grayscale,o_50/icons/logo" }, content_type: "lessonPlanHeader" }; return console.log("lessonPlanHeaderModel: " + n), lessonPlanHeadersData.push(n), n }, duplicateLessonPlan: function (e) { var t = Date.now().toString(), n = "Untitled", r, i, s; return r = JSON.parse(JSON.stringify(lessonPlanHeadersData.findWhere({ id: e }))), i = r.title, !i || (n = this.generateNewTitle(i)), delete r._id, r.id = t, r.content_id = t, r.title = n, lessonPlanHeadersData.push(r), originalContent = JSON.parse(JSON.stringify(lessonPlanContentData.where({ LPID: e }))), _.each(originalContent, function (e) { var n = Date.now().toString(); delete e._id, e.id = n, e.content_id = n, e.LPID = t, lessonPlanContentData.push(e) }), lessonPlanHeadersData.findWhere({ id: t }) }, upadateLessonPlanTitle: function (e) { var t = this, n = lessonPlanHeadersData.findWhere({ content_id: t.getLessonPlanID() }); n.set({ title: e }); var r = JSON.parse(t.getUserProfile()), i = r.uid, s = t.getPathToDocumentAPI() + "content/" + i + "/" + t.getLessonPlanID(); delete n.attributes._id, console.log("PUT " + s), n.save({}, { url: s }).complete(function () { console.log("PUT " + s + " COMPLETE") }) }, addNewLessonPlanContent: function (e, t) { var n = this, r, i; if (!e.title) return !1; r = lessonPlanContentData.where({ LPID: n.getLessonPlanID() }); if (!_.isEmpty(r)) { i = _.max(r, function (e) { return e.get("order") || 0 }), typeof i.get == "function" && (i = i.get("order") + 1); if (isNaN(i) || !isFinite(i)) i = 1 } else i = 0; var s = Date.parse(new Date), o = JSON.parse(this.getUserProfile()), u = { content_id: s.toString(), id: s.toString(), order: i, LPID: n.getLessonPlanID(), object_id: e.id, url: e.url, title: e.title, titleFriendly: e.titleFriendly, subject: e.subject, subjectFriendly: e.subjectFriendly, unit: e.unit, unitFriendly: e.unitFriendly, introSummary: e.introSummary, notes: [], guid: o.uid, content_type: "lessonPlanContent" }; if (t == "search") e.themeImage && (u.image = { publicID: e.themeImage[0] }); else switch (e.type) { case "gallery": e.image && (u.image = { publicID: e.image[0].publicID }); break; case "quiz": u.image = { publicID: e.image.publicID }; break; case "video": u.image = { publicID: "b_rgb:fff,bo_60px_solid_rgb:fff,c_pad/icons/Teachers_icons_blue-large-playx3" }; break; default: u.image = { publicID: e.themeImage.publicID } } u.image || (u.image = { publicID: "b_rgb:fff,bo_10px_solid_rgb:fff,c_pad,e_grayscale,o_50/icons/logo" }), console.log("lessonPlanContentModel: " + u); if (lessonPlanContentData.where({ LPID: n.getLessonPlanID() }).length < 1) { var a = lessonPlanHeadersData.findWhere({ content_id: n.getLessonPlanID() }); console.log(JSON.stringify(a)), a.set({ image: { publicID: u.image.publicID } }); var f = JSON.parse(n.getUserProfile()), l = f.uid, c = n.getPathToDocumentAPI() + "content/" + l + "/" + n.getLessonPlanID(); console.log("PUT " + c), delete a.attributes._id, a.save({}, { url: c }).complete(function () { console.log("PUT " + c + " COMPLETE") }) } lessonPlanContentData.push(u) }, removeLessonPlanContent: function (e) { var t = this, n = t.getLessonPlanID(), r = lessonPlanContentData.findWhere({ object_id: e, LPID: t.getLessonPlanID() }), i, s, o, u; console.log("[utilities] removeLessonPlanContent object_id", e, "getLessonPlanID()", n, "model", JSON.stringify(r)), lessonPlanContentData.remove(r), lessonPlanContentData.where({ LPID: n }).length < 1 && (i = lessonPlanHeadersData.findWhere({ content_id: n }), i.set({ image: { publicID: "b_rgb:fff,bo_10px_solid_rgb:fff,c_pad,e_grayscale,o_50/icons/logo" } }), s = JSON.parse(t.getUserProfile()), o = s.uid, u = t.getPathToDocumentAPI() + "content/" + o + "/" + n, console.log("PUT " + u), delete i.attributes._id, i.save({}, { url: u }).complete(function () { console.log("PUT " + u + " COMPLETE") })) }, removeLessonPlan: function (e) { console.log("[utilities] removeLessonPlan id: " + e); var t = this, n = lessonPlanHeadersData.findWhere({ id: e }); contentModels = lessonPlanContentData.where({ LPID: e }), t.setLessonPlanID(e), _.each(contentModels, function (e) { t.removeLessonPlanContent(e.get("object_id")) }), contentModels = lessonPlanContentData.where({ LPID: e }), contentModels.length === 0 && lessonPlanHeadersData.remove(n) }, generateNewTitle: function (e) { console.log("[utilities] generateNewTitle(" + e + ")"); var t = "", n = JSON.stringify(lessonPlanHeadersData); if (n) { var r; e ? r = e.replace(/\s*\d+$/, "") : r = "Untitled lesson plan"; var i = new RegExp(r, "g"), s = n.match(i); s && (t = s.length + 1) } var e = r + " " + t; return e }, getCurrentObject: function () { return JSON.parse(localStorage.getItem(i.campaignCode + "object")) }, setCurrentObject: function (e) { return localStorage.setItem(i.campaignCode + "object", JSON.stringify(e)), !0 }, setPlanningMode: function (e) { return localStorage.setItem(i.campaignCode + "planningMode", e), !0 }, getPlanningMode: function () { return JSON.parse(localStorage.getItem(i.campaignCode + "planningMode")) }, setLessonPlanID: function (e) { return localStorage.setItem(i.campaignCode + "lessonPlanID", e), !0 }, getLessonPlanID: function () { var e = localStorage.getItem(i.campaignCode + "lessonPlanID"); return e ? e.toString() : null }, setPlayMode: function (e) { return localStorage.setItem(i.campaignCode + "playMode", e), !0 }, getPlayMode: function () { return JSON.parse(localStorage.getItem(i.campaignCode + "playMode")) }, getLessonPlanCursor: function () { return JSON.parse(localStorage.getItem(i.campaignCode + "lessonPlanCursor")) }, setLessonPlanCursor: function (e) { return localStorage.setItem(i.campaignCode + "lessonPlanCursor", e), !0 }, clearHypeScripts: function () { window.HYPE = null, window.HYPE_338 = null, window.HYPE_dtl_338 = null, window.HYPE_344 = null, window.HYPE_dtl_344 = null, window.HYPE_466 = null, window.HYPE_dtl_466 = null, $("script[src*='HYPE']").remove(), $("head div").remove() }, post: function (e, t) { var n = Date.now(), r = $('<iframe name="hiddenFrame" class="hide hiddenFrame' + n + '" style="position:absolute; top:-1px; left:-1px; width:1px; height:1px;"></iframe>'); $(document.body).append(r); var i = $('<form target="hiddenFrame" class="hiddenForm' + n + '"></form>'); i.attr("method", "post"), i.attr("action", e), $.each(t, function (e, t) { var n = $("<input></input>"); n.attr("type", "hidden"), n.attr("name", e), n.attr("value", t), i.append(n) }), $(document.body).append(i), i.submit() }, adestraDateString: function () { var e = new Date, t = e.getMonth() + 1, n = e.getDate(), r = e.getFullYear(), i = e.getHours(), s = e.getMinutes(); s < 10 && (s = "0" + s), t < 10 && (t = "0" + t), n < 10 && (n = "0" + n); var o = r + "-" + t + "-" + n; return o } }, n.exports = Utilities }), require.register("lib/view_helper", function (e, t, n) { var r = t("../lib/utilities"), i = t("../lib/constants"); Handlebars.registerHelper("formatIntro", function (e) { var t = ""; if (e) { t = e; var n = r.returnValueFromJSONObject("introExpand", i.staticMessaging, "name", "copy"); e.match(/<p>/g).length > 1 && (t = t + "<button class='readMore'>" + n + "</button>") } return t }), Handlebars.registerHelper("formatSummary", function (e) { var t = e; return t = $(t).text(), t = t.substring(0, 150), t }), Handlebars.registerHelper("formatThumbs", function (e, t, n) { var r = ""; n == null ? n = "" : n += "/"; var s = i.imgGrid, o = i.imgGridWide, u = i.imgGridTall; screen.availWidth <= 320 && (s = i.imgThumb, o = i.imgGrid), e = JSON.parse(JSON.stringify(e)); for (var a = 0, f = e.length; a < f; a++) { var l = 1, c = "", h = ""; e[a].themeImage.publicID && (l = e[a].themeImage.ratio); var p = e[a].url; if (previewApplication || devApplication) p = p + "id=" + e[a].id + "/"; var d = "", v = s; l > 1 && (d = "fixHeight "), l < .5 && (d = "wide ", v = o), l >= 1.5 && (d = "tall ", v = u), e[a].themeImage.publicID && (c = '<img role="presentation" class="image" src="' + i.imgLocation + v + e[a].themeImage.publicID + i.imgExt + '" alt="' + e[a].themeImage.alt + '" data-pid="' + e[a].themeImage.publicID + '" />', h = ' data-pid="' + e[a].themeImage.publicID + '"'), r = r + '<article class="thumb ' + d + e[a].status + '"><div class="wrapper"><a class="pageLink" href="' + p + '" data-type="article" data-id="' + e[a].id + '" ' + h + ">" + c + '<h3 class="thumbTitle"><span>' + e[a].title + "</span></h3></a></div></article>" } return r }), Handlebars.registerHelper("formatCutout", function (e, t, n, s, o, u, a, f) { var l = wrapperClose = wrapper = ""; if (f == "home") { wrapperClose = "</div>"; var c = $(window).width(); n = c * i.carouselRatio; var h = '" style="height: ' + n + 'px;"'; s > i.carouselRatio && (t = n / s, h = 'fixHeight" style="width: ' + t + "px; height: " + n + 'px;"'), wrapper = '<div class="cutout-wrapper slide-wrapper ' + h + '" data-ratio="' + s + '">' } var p = '<div id="annotations-wrapper" class="inner-container">', d = "<span class='beak'></span>"; e = JSON.parse(JSON.stringify(e)); var v = e.length; f == "home" ? l = wrapper + '<div class="home-images inner-container">' : l = wrapper + '<div id="images-wrapper" class="inner-container" style="width:' + t + "px; height: " + n + 'px;">'; for (var m = 0; m < v; m++) { var g = "", y = "data-pid='" + e[m].publicID + "'", b = r.getImageSize(e[m].widthPC, o, e[m].ratio), w = e[m].publicID.replace(/_/g, " "), E = i.imgExt; e[m].float == "true" && v > 1 && (E = ".png", g = "float"); var S = i.imgLocation + b + e[m].publicID + E, x = e[m].annotations, T = x.length; f == "home" ? l = l + '<img itemprop="contentURL" class="image image-' + m + " " + g + " annos-" + T + '" src="' + S + '" alt="' + w + '" style="left:' + e[m].xPC + "%; top:" + e[m].yPC + "%; width:" + e[m].widthPC + '%;" ' + y + ' role="presentation" />' : l = l + '<span itemscope itemtype="http://schema.org/ImageObject"><img itemprop="contentURL" class="image image-' + m + " " + g + " annos-" + T + '" src="' + S + '" alt="' + w + '" style="left:' + e[m].xPC + "%; top:" + e[m].yPC + "%; width:" + e[m].widthPC + '%;" ' + y + ' role="presentation" /><meta itemprop="name" content="' + w + '"></span>'; for (var N = 0; N < T; N++) { var C = JSON.parse(JSON.stringify(x[N])), k = "data-type='article'", L = "noLeader", A = "noCaption", O = "noBeak", M = "noURL", _ = C.label.replace("<br/>", " "), D = "", P = "", H = "", B = "", j = "", F = "", I = "", q = "", R = "", U = "", z = "", W = "", X = "", V = "", J = "", K = "", Q = "", G = "", Y = "", Z = ""; C.parent && (D = "data-id='" + C.parent.id + "'"); var et = "span", tt = (100 - C.xPC).toFixed(2), nt = (C.labelLength + 16 + 15) / 2, rt = "<span class='annoThumb' style='background-image: url(" + S + ");'></span>", it = "' style='left: " + C.xPC + "%; top: " + C.yPC + "%;' data-left='" + C.xPC + "' data-top='" + C.yPC + "' data-align='left'"; C.alignment == "left" && (it = " " + C.alignment + "' style='left: " + C.xPC + "%; top: " + C.yPC + "%;' data-left='" + C.xPC + "' data-top='" + C.yPC + "' data-align='left'"), C.alignment == "right" && (it = " " + C.alignment + "' style='right: " + tt + "%; top: " + C.yPC + "%; margin-right: 15px;' data-left='" + C.xPC + "' data-right='" + tt + "' data-top='" + C.yPC + "' data-align='right'"), C.alignment == "center" && (it = " " + C.alignment + "' style='left: " + C.xPC + "%; top: " + C.yPC + "%; margin-left: -" + nt + "px;' data-left='" + C.xPC + "' data-top='" + C.yPC + "' data-adjust='" + nt + "' data-align='center'"); var st = r.getCurrentSubject(), ot = r.getCurrentUnit(); if (C.parent) { if (C.parent.url) { Z = _, C.parent.title && (Z = C.parent.title); var ut = C.parent.url; if (previewApplication || devApplication) ut = ut + "id=" + C.parent.id + "/"; j = "<a class='pageLink' href='" + ut + "'>" + Z + " &rsaquo;</a>", I = "href='" + ut + "'", M = "hasURL", F = "pageLink", f !== "home" && (et = "a") } if (!Modernizr.csstransforms || !C.leaderPoint.xPC || o === "fullscreen") q = " <span class='linkCursor'>&rsaquo;</span>"; C.type == "Gallery" && (k = "data-type='gallery", I = "href='" + C.parent.url + "'", j = "<a class='pageLink' href='" + C.parent.url + "'>" + Z + " &rsaquo;</a>", q = " <span class='galleryIcon'>Gallery</span>"), C.type == "Quiz" && (k = "data-type='quiz'", I = "href='/quiz/solar-system'") } C.type == "Video" && a && (f !== "home" && (et = "a"), Z = Z = _, k = "data-type='video'", I = "href='" + a + "'", j = "<a class='pageLink' href='" + a + "'>" + Z + " &rsaquo;</a>", q = " <span class='videoIcon'>Video</span>", M = "hasURL", F = "pageLink"), C.hotspot.x && (B = "<" + et + " tabindex='-1' role-'presentation' class='hotspot openCaption " + F + "' style='left: " + C.hotspot.xPC + "%; top: " + C.hotspot.yPC + "%; width: " + C.hotspot.widthPC + "%; height: " + C.hotspot.heightPC + "%;' data-left='" + C.hotspot.xPC + "' data-top='" + C.hotspot.yPC + "' data-width='" + C.hotspot.widthPC + "' data-height='" + C.hotspot.heightPC + "' " + I + " " + y + " " + k + " " + D + "></" + et + ">"); if (C.caption) { U = r.createFriendlyString(C.label), V = " role='button' aria-label='" + C.label + "' aria-controls='caption-" + U + "'"; var at = "<p>", ft = "</p>", lt = C.caption; lt.substring(0, 3) !== at && (lt = at + lt), lt.substr(lt.length - 8).indexOf(ft) == -1 && (lt += ft), J = "<div class='caption' id='caption-" + U + "' data-position='left' data-align='top' tabindex='0' role='region' aria-label='" + C.label + "' aria-expanded='false'>" + lt + j + "</div>", C.parent || (et = "button"), A = "hasCaption", K = "openCaption" } if (C.type == "Audio" && C.url) { k = "data-type='audio'"; var ct = r.returnValueFromJSONObject("audioSupport", i.staticMessaging, "name", "copy"); D = "data-id='" + C.url + "'", Q = "<span class='audioIcon paused' tabindex='0' role='button' aria-label='" + C.label + "'>Play</span><audio id='" + C.url + "' class='audioItem'><source src='" + i.storageDomain + "/audio/" + C.url + ".mp3' type='audio/mpeg' /><source src='" + i.storageDomain + "/audio/" + C.url + ".ogg' type='audio/ogg' />" + ct + "</audio>", et = "div", K = "", G = " class='openCaption audioCaption'", (!Modernizr.csstransforms || o === "fullscreen") && C.leaderPoint.xPC && (Y = Q, Q = "") } if (C.leaderPoint.xPC) { L = "hasLeader", H = " tabindex='-1' role-'presentation'"; var ht = C.leaderPoint.xPC, pt = C.xPC, dt = C.leaderPoint.yPC * s, vt = C.yPC * s, mt = Math.sqrt((ht - pt) * (ht - pt) + (dt - vt) * (dt - vt)); mt = Math.round(mt); var gt = Math.atan2(vt - dt, pt - ht) * 180 / Math.PI; gt = Math.round(gt), Modernizr.csstransforms && (X = " transform: rotate(" + gt + "deg); -webkit-transform: rotate(" + gt + "deg); -moz-transform: rotate(" + gt + "deg); -ms-transform: rotate(" + gt + "deg);"), (!Modernizr.csstransforms || o === "fullscreen") && !C.url && (H = " tabindex='0'" + V), P = "<" + et + H + " class='point openCaption " + F + "' style='left: " + C.leaderPoint.xPC + "%; top: " + C.leaderPoint.yPC + "%;' data-left='" + C.leaderPoint.xPC + "' data-top='" + C.leaderPoint.yPC + "' " + I + " " + y + " " + k + " " + D + "'>" + Y + "<span class='leaderLabel' style='display: none;'>" + C.label + q + d + "</span></" + et + "><div class='leader openCaption' style='left: " + C.leaderPoint.xPC + "%; top: " + C.leaderPoint.yPC + "%; width: " + mt + "%;" + X + "'><div class='leader-inner'></div></div>" } f == "home" && (M = A = q = J = I = "", V = " role='presentation' tabindex='-1'"); var yt = "<article class='annotation annos-" + T + " " + A + " " + L + " " + O + " " + M + " " + z + " " + C.type + "'><" + et + " class='label " + K + " " + F + it + " " + I + " " + y + " " + k + " " + D + V + ">" + Q + rt + "<h3" + G + ">" + C.label + q + d + "</h3></" + et + ">" + P + B + J + "</article>"; o == "fullscreen" ? p += yt : l += yt } } return o == "fullscreen" ? l = l + "</div>" + p + "</div>" : l += "</div>", f == "home" && (l += "</div>"), l }), Handlebars.registerHelper("rowWidth", function (e) { console.log("length will be " + e); var e = ""; return e }), Handlebars.registerHelper("isSelected", function (e, t, n) { var i = "", s = ""; switch (t) { case "subject": s = r.getCurrentSubject(); break; case "unit": s = r.getCurrentUnit(); break; case "article": case "childArticle": s = r.getCurrentArticle(); break; case "language": s = r.getLanguageCode() } if (e === s || e === n) i = "selected"; return i }), Handlebars.registerHelper("hasCursor", function (e, t) { var n = "", r = !1; t && JSON.stringify(t).length > 2 && (r = !0); if (e == "unit" || e == "subject" || r) n = "<button class='cursor " + e + "-cursor'>Expand</button>"; return n }), Handlebars.registerHelper("buildURL", function (e, t, n, r) { var i = ""; switch (e) { case "subject": i = "href='/" + t + "' data-subject='" + t + "'"; break; case "unit": i = "href='/" + r + "/" + t + "' data-subject='" + r + "' data-unit='" + t + "'"; break; case "article": case "childArticle": i = "href='/" + r + "/" + n + "/" + t + "' data-subject='" + r + "' data-unit='" + n + "' data-article='" + t + "'" } return i }), Handlebars.registerHelper("searchURL", function (e, t) { var n = ""; console.log("url is " + e), e = "/" + e, e == "/solar-system" && (e = ""); switch (t) { case "science": case "space": n = "/science/solar-system" + e } return n }), Handlebars.registerHelper("eachWithIndex", function (e, t) { var n = ""; for (var r = 0, i = e.length; r < i; r++) { var s = e[r]; s.index = r, n += t(s) } return n }), Handlebars.registerHelper("eachWithIndexPlusOne", function (e, t) { var n = ""; for (var r = 0, i = e.length; r < i; r++) { var s = e[r]; s.index = r + 1, n += t(s) } return n }), Handlebars.registerHelper("formatComponents", function (e, t, n) { var r = factHTML = contentBoxHTML = "", s = " cutout"; if ((!e || $.isEmptyObject(e)) && (t == 0 || !t) || n == "fullscreen") return r; n == "scrolling-landscape" && (s = " intro"); var o = 0; e && (o = 1, e = JSON.parse(JSON.stringify(e)), factHTML += "<div class='box factFile'><div class='box-inner'>", factHTML += "<h3 role='heading'><span>Fast Facts</span></h3>", factHTML += "<div class='box-content'>", $.each(e, function (e, t) { if (e == "type") return !0; factHTML = factHTML + "<div class='fact'><h4>" + e + "</h4><p>" + t.value + "</p></div>" }), factHTML += "</div>", factHTML += "<div class='clear'></div></div></div>"); if (t) { t = JSON.parse(JSON.stringify(t)); for (var u = 0, a = t.length; u < a; u++) { var f = t[u], l = image = caption = hasImage = schemaImage = schemaName = schemaDesc = ""; if (o == 2) continue; if (!f.title) continue; o++; if (f.themeImage) { var c = i.imgGrid; image = "<img role='presentation' itemprop='contentURL' src='" + i.imgLocation + c + f.themeImage + i.imgExt + "' alt='" + f.alt + "' />", hasImage = "hasImage", schemaImage = " itemscope itemtype='http://schema.org/ImageObject'", schemaName = " itemprop='name'", schemaDesc = " itemprop='description'" } f.body && (caption = "<p tabindex='0'" + schemaDesc + ">" + f.body + "</p>"), contentBoxHTML = contentBoxHTML + "<div class='box standard " + hasImage + "'><div class='box-inner'" + schemaImage + ">", l = "<h3 role='heading' tabindex='0'><span" + schemaName + ">" + f.title + "</span></h3>"; var h = image + caption; contentBoxHTML = contentBoxHTML + l + "<div class='box-content " + f.image_position + "'>" + h + "</div>", contentBoxHTML += "<div class='clear'></div></div></div>" } } return r = "<div class='boxes col-" + o + " " + n + s + "'><div class='boxes-inner'>" + contentBoxHTML + factHTML + "<div class='clear'></div></div></div>", r }), Handlebars.registerHelper("returnImageSize", function () { var e = r.getImageSize(100, null, 1); return e }), Handlebars.registerHelper("countPlusOne", function (e) { var t = e + 1; return t }), Handlebars.registerHelper("ifCompSlides", function (e, t) { return console.log("no of slides are " + e.length), e.length > 1 ? t(this) : !1 }), Handlebars.registerHelper("objectIsInModels", function (e, t, n) { var r = !1; return e && t && $.each(t, function (t, n) { n.object_id == e.id && (r = !0) }), r ? n.fn(this) : n.inverse(this) }), Handlebars.registerHelper("displayDate", function (e) { var t, n = parseInt(e * 1e3), i = new Date(n), s = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], o = i.getUTCDate(), u = ("" + o).split(""); return r.getLanguageCode() === "uk" && (o == 11 ? o += "th" : o == 12 ? o += "th" : o == 13 ? o += "th" : u[u.length - 1] === "1" ? o += "st" : u[u.length - 1] === "2" ? o += "nd" : u[u.length - 1] === "3" ? o += "rd" : o += "th"), r.getLanguageCode() === "uk" ? t = o + " " + s[i.getMonth()] + " " + i.getFullYear() : t = s[i.getMonth()] + " " + o + " " + i.getFullYear(), t }), Handlebars.registerHelper("formatExploreIntro", function (e) { var t = e.intro, n = $(t).text(); return n.length > 400 && (t = e.introSummary), t }), Handlebars.registerHelper("readMoreOrRelated", function (e) { var t = []; return $(e.intro).text().length > 400 || e.field_content_block.length ? '<li><a class="read-more-link page-link" href="/' + e.langCode + "/explore/" + e.titleFriendly + '/">Read More &gt;&gt;</a></li>' : ($.each(e.findoutmore, function (e, n) { t.push('<li><a class="page-link" href="' + n.url + '">' + n.title + " &gt;&gt;</a></li>") }), t.toString().replace(/,/g, "")) }) }), require.register("models/articleCollection", function (e, t, n) { var r = t("./articleModel"); n.exports = Backbone.Collection.extend({ model: r, defaultDiacriticsRemovalMap: [{ base: "A", letters: /[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g }, { base: "AA", letters: /[\uA732]/g }, { base: "AE", letters: /[\u00C6\u01FC\u01E2]/g }, { base: "AO", letters: /[\uA734]/g }, { base: "AU", letters: /[\uA736]/g }, { base: "AV", letters: /[\uA738\uA73A]/g }, { base: "AY", letters: /[\uA73C]/g }, { base: "B", letters: /[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g }, { base: "C", letters: /[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g }, { base: "D", letters: /[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g }, { base: "DZ", letters: /[\u01F1\u01C4]/g }, { base: "Dz", letters: /[\u01F2\u01C5]/g }, { base: "E", letters: /[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g }, { base: "F", letters: /[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g }, { base: "G", letters: /[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g }, { base: "H", letters: /[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g }, { base: "I", letters: /[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g }, { base: "J", letters: /[\u004A\u24BF\uFF2A\u0134\u0248]/g }, { base: "K", letters: /[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g }, { base: "L", letters: /[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g }, { base: "LJ", letters: /[\u01C7]/g }, { base: "Lj", letters: /[\u01C8]/g }, { base: "M", letters: /[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g }, { base: "N", letters: /[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g }, { base: "NJ", letters: /[\u01CA]/g }, { base: "Nj", letters: /[\u01CB]/g }, { base: "O", letters: /[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g }, { base: "OI", letters: /[\u01A2]/g }, { base: "OO", letters: /[\uA74E]/g }, { base: "OU", letters: /[\u0222]/g }, { base: "P", letters: /[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g }, { base: "Q", letters: /[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g }, { base: "R", letters: /[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g }, { base: "S", letters: /[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g }, { base: "T", letters: /[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g }, { base: "TZ", letters: /[\uA728]/g }, { base: "U", letters: /[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g }, { base: "V", letters: /[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g }, { base: "VY", letters: /[\uA760]/g }, { base: "W", letters: /[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g }, { base: "X", letters: /[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g }, { base: "Y", letters: /[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g }, { base: "Z", letters: /[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g }, { base: "a", letters: /[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g }, { base: "aa", letters: /[\uA733]/g }, { base: "ae", letters: /[\u00E6\u01FD\u01E3]/g }, { base: "ao", letters: /[\uA735]/g }, { base: "au", letters: /[\uA737]/g }, { base: "av", letters: /[\uA739\uA73B]/g }, { base: "ay", letters: /[\uA73D]/g }, { base: "b", letters: /[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g }, { base: "c", letters: /[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g }, { base: "d", letters: /[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g }, { base: "dz", letters: /[\u01F3\u01C6]/g }, { base: "e", letters: /[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g }, { base: "f", letters: /[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g }, { base: "g", letters: /[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g }, { base: "h", letters: /[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g }, { base: "hv", letters: /[\u0195]/g }, { base: "i", letters: /[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g }, { base: "j", letters: /[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g }, { base: "k", letters: /[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g }, { base: "l", letters: /[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g }, { base: "lj", letters: /[\u01C9]/g }, { base: "m", letters: /[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g }, { base: "n", letters: /[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g }, { base: "nj", letters: /[\u01CC]/g }, { base: "o", letters: /[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g }, { base: "oi", letters: /[\u01A3]/g }, { base: "ou", letters: /[\u0223]/g }, { base: "oo", letters: /[\uA74F]/g }, { base: "p", letters: /[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g }, { base: "q", letters: /[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g }, { base: "r", letters: /[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g }, { base: "s", letters: /[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g }, { base: "t", letters: /[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g }, { base: "tz", letters: /[\uA729]/g }, { base: "u", letters: /[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g }, { base: "v", letters: /[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g }, { base: "vy", letters: /[\uA761]/g }, { base: "w", letters: /[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g }, { base: "x", letters: /[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g }, { base: "y", letters: /[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g }, { base: "z", letters: /[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g }], defaultSymbolRemovalMap: [{ base: "-", symbols: /[\u2013\u2014\u00A0\u2060]/g }, { base: "and", symbols: /[\u002B\u0026]/g }, { base: "-14", symbols: /[\u00BC]/g }, { base: "-12", symbols: /[\u00BD]/g }, { base: "-34", symbols: /[\u00BE]/g }], initialize: function () { console.log("initialising the article collection") }, comparator: function (e, t) { var n = e.get("sortOrder"), r = e.get("sort"), i = t.get("sort"); if (r !== null && i !== null) { isNaN(parseFloat(r)) || (r = parseFloat(r)), isNaN(parseFloat(i)) || (i = parseFloat(i)); if (!isNaN(r - i)) return n == "ascending" ? r - i : i - r; if (typeof r == "string" && typeof r == typeof i) return n == "ascending" ? r.localeCompare(i) : i.localeCompare(r) } return r = this._getLocalCompare(e, t), i = this._getLocalCompare(t, e), n == "ascending" ? r - i : i - r }, _getLocalCompare: function (e, t) { var n = 0, r = e.get("sort"); return n = e.get("title").toString().localeCompare(t.get("title").toString()), r = r === null ? e.get("sortOrder") == "ascending" ? n + 1e3 : n - 1e3 : n, r }, sync: function (e, t, n) { return console.log("starting fetching ... method is " + e + " model is " + JSON.stringify(t) + " options are " + JSON.stringify(n)), n.timeout = 1e5, Backbone.sync(e, t, n) }, parse: function (e) { console.log("ARTICLES want to parse ..."); if (e) { console.log("ARTICLES can parse ..."); var t = []; for (var n = 0; n < e.length; n++) e[n].titleFriendly.length > 1 && t.push(e[n]); return t } }, search: function (e) { if (e === "") return this; var t = this.createFriendlyString(e); return _(this.filter(function (e) { var n = (new RegExp(t, "gi")).test(e.get("titleFriendly")), r = (new RegExp(t, "gi")).test(e.get("intro")); if (n) return e.set("weight", 8), !0; if (r) return e.set("weight", 4), !0 })) }, removeDiacritics: function (e) { for (var t = 0; t < this.defaultDiacriticsRemovalMap.length; t++) e = e.replace(this.defaultDiacriticsRemovalMap[t].letters, this.defaultDiacriticsRemovalMap[t].base); return e }, removeSymbols: function (e) { for (var t = 0; t < this.defaultSymbolRemovalMap.length; t++) e = e.replace(this.defaultSymbolRemovalMap[t].symbols, this.defaultSymbolRemovalMap[t].base); return e }, createFriendlyString: function (e) { var t = e.toLowerCase().replace(/'|&rsquo;|(<([^>]+)>)/g, ""); return t = this.removeDiacritics(this.removeSymbols(t)), t = t.replace(/^-|-$/g, ""), t } }) }), require.register("models/articleModel", function (e, t, n) { n.exports = Backbone.Model.extend({ defaults: {} }) }), require.register("models/businessPageCollection", function (e, t, n) { var r = t("./businessPageModel"); n.exports = Backbone.Collection.extend({ model: r, initialize: function () { console.log("initialising the Business Page collection") }, sync: function (e, t, n) { return console.log("starting fetching ... method is " + e + " model is " + JSON.stringify(t) + " options are " + JSON.stringify(n)), n.timeout = 1e4, Backbone.sync(e, t, n) }, parse: function (e) { console.log("BUSINESS PAGE want to parse ..."); if (e) { console.log("BUSINESS PAGE can parse ..."); var t = []; for (var n = 0; n < e.length; n++) e[n].id.length > 1 && t.push(e[n]); return t } } }) }), require.register("models/businessPageModel", function (e, t, n) { n.exports = Backbone.Model.extend({ defaults: {} }) }), require.register("models/explorePageCollection", function (e, t, n) { var r = t("./explorePageModel"); n.exports = Backbone.Collection.extend({ model: r, initialize: function () { console.log("initialising the explore Page collection") }, sync: function (e, t, n) { return console.log("starting fetching ... method is " + e + " model is " + JSON.stringify(t) + " options are " + JSON.stringify(n)), n.timeout = 3e4, Backbone.sync(e, t, n) }, parse: function (e) { console.log("explore PAGE want to parse ..."); if (e) { console.log("explore PAGE can parse ..."); var t = []; for (var n = 0; n < e.length; n++) if (e[n].id.length > 1) { if (!devApplication && !previewApplication && e[n].published !== "1") continue; t.push(e[n]) } return t } }, comparator: function (e) { var t = e.get("published_date"); return t || (t = 0), -parseInt(t) } }) }), require.register("models/explorePageModel", function (e, t, n) { n.exports = Backbone.Model.extend({ defaults: {} }) }), require.register("models/galleryCollection", function (e, t, n) { var r = t("./galleryModel"); n.exports = Backbone.Collection.extend({ model: r, initialize: function () { console.log("initialising the gallery collection") }, comparator: function (e) { return e.get("$oid") }, sync: function (e, t, n) { return console.log("starting fetching ... method is " + e + " model is " + JSON.stringify(t) + " options are " + JSON.stringify(n)), n.timeout = 1e4, Backbone.sync(e, t, n) }, parse: function (e) { console.log("GALLERY want to parse ..."); if (e) { console.log("GALLERY can parse ..."); var t = []; for (var n = 0; n < e.length; n++) e[n].url.length > 1 && t.push(e[n]); return t } } }) }), require.register("models/galleryIndexCollection", function (e, t, n) { var r = t("./galleryIndexModel"); n.exports = Backbone.Collection.extend({ model: r, initialize: function () { console.log("initialising the gallery index collection") }, sync: function (e, t, n) { return console.log("starting fetching ... method is " + e + " model is " + JSON.stringify(t) + " options are " + JSON.stringify(n)), n.timeout = 1e4, Backbone.sync(e, t, n) }, parse: function (e) { console.log("GALLERY INDEX want to parse ..."); if (e) { console.log("GALLERY INDEX can parse ..."); var t = []; for (var n = 0; n < e.length; n++) e[n].url.length > 1 && t.push(e[n]); return t } } }) }), require.register("models/galleryIndexModel", function (e, t, n) { n.exports = Backbone.Model.extend({ defaults: {} }) }), require.register("models/galleryModel", function (e, t, n) { n.exports = Backbone.Model.extend({ defaults: {} }) }), require.register("models/landingPageCollection", function (e, t, n) { var r = t("./landingPageModel"); n.exports = Backbone.Collection.extend({ model: r, initialize: function () { console.log("initialising the Landing Page collection") }, sync: function (e, t, n) { return console.log("starting fetching ... method is " + e + " model is " + JSON.stringify(t) + " options are " + JSON.stringify(n)), n.timeout = 1e4, Backbone.sync(e, t, n) }, parse: function (e) { console.log("LANDING PAGE want to parse ..."); if (e) { console.log("LANDING PAGE can parse ..."); var t = []; for (var n = 0; n < e.length; n++) t.push(e[n]); return t } } }) }), require.register("models/landingPageModel", function (e, t, n) { n.exports = Backbone.Model.extend({ defaults: {} }) }), require.register("models/lessonPlanContentCollection", function (e, t, n) { var r = t("./lessonPlanContentModel"), i = t("../lib/constants"); n.exports = Backbone.Collection.extend({ model: r, initialize: function () { console.log("initialising the lesson plan content collection") }, comparator: function (e) { return e.get("order") || 0 }, _order_by: "asc", sync: function (e, t, n) { return console.log("LESSON PLAN CONTENT starting fetching ... method is " + e + " model is " + JSON.stringify(t) + " options are " + JSON.stringify(n)), n.timeout = 1e4, Backbone.sync(e, t, n) }, parse: function (e) { console.log("LESSON PLAN CONTENT want to parse ..."); if (e) { console.log("LESSON PLAN CONTENT can parse ..."); var t = []; for (var n = 0; n < e.length; n++) t.push(e[n]); return t } }, push: function (e, t) { console.log("lessonPlanContentCollection pushed"); var n = this, r = Utilities.getPathToDocumentAPI() + "content/" + e.guid; return console.log("model: " + JSON.stringify(e)), $.ajax({ url: r, type: "POST", async: !1, dataType: "json", contentType: "application/json", data: JSON.stringify(e), complete: function (e) { console.log("COMPLETE and PUSHED TO MONGO " + e) }, success: function (r) { console.log("SUCCESS and PUSHED TO MONGO"), Backbone.Collection.prototype.push.call(n, e, t) }, error: function () { return console.log("----- can't load/find data"), !1 } }), !0 }, save: function () { var e = this, t = JSON.parse(Utilities.getUserProfile()), n = t.uid, r = Utilities.getPathToDocumentAPI() + "content/" + n, i = [], s = $.Deferred(); return _.each(this.models, function (e) { var t = _.clone(e.attributes); delete t._id, i.push($.ajax({ url: r + "/" + t.content_id.toString() + "?type=lessonPlanContent", type: "PUT", async: !0, dataType: "json", contentType: "application/json", data: JSON.stringify(t) })) }), $.when.apply($, i).then(function () { s.resolve() }), s }, remove: function (e, t) { var n = this, r = JSON.parse(JSON.stringify(e)), i = Utilities.getPathToDocumentAPI() + "content/" + r.guid + "/" + r.content_id + "?type=lessonPlanContent"; console.log("url: " + i), $.ajax({ url: i, type: "DELETE", async: !1, dataType: "json", contentType: "application/json", complete: function (e) { console.log("COMPLETE and PUSHED TO MONGO " + JSON.stringify(e)) }, success: function (r) { console.log("SUCCESS and PUSHED TO MONGO" + JSON.stringify(r)), Backbone.Collection.prototype.remove.call(n, e, t) }, error: function () { return console.log("----- can't load/find data"), !1 } }) } }) }), require.register("models/lessonPlanContentModel", function (e, t, n) { n.exports = Backbone.Model.extend({ defaults: {} }) }), require.register("models/lessonPlanHeaderModel", function (e, t, n) { n.exports = Backbone.Model.extend({ defaults: {} }) }), require.register("models/lessonPlanHeadersCollection", function (e, t, n) { var r = t("./lessonPlanHeaderModel"), i = t("../lib/constants"); n.exports = Backbone.Collection.extend({ model: r, initialize: function () { console.log("initialising the lesson plan headers collection") }, comparator: function (e) { return e.get("content_id") }, _order_by: "az", sync: function (e, t, n) { return console.log("LESSON PLAN HEADERS starting fetching ... method is " + e + " model is " + JSON.stringify(t) + " options are " + JSON.stringify(n)), n.timeout = 1e4, Backbone.sync(e, t, n) }, parse: function (e) { console.log("LESSON PLAN HEADERS want to parse ..."); if (e) { console.log("LESSON PLAN HEADERS can parse ..."); var t = []; for (var n = 0; n < e.length; n++) t.push(e[n]); return t } }, push: function (e, t) { console.log("lessonPlanHeadersCollection pushed"); var n = this, r = Utilities.getPathToDocumentAPI() + "content/" + e.guid; return console.log("model: " + JSON.stringify(e)), $.ajax({ url: r, type: "POST", async: !1, dataType: "json", contentType: "application/json", data: JSON.stringify(e), complete: function (e) { console.log("COMPLETE and PUSHED TO MONGO " + e) }, success: function (r) { console.log("SUCCESS and PUSHED TO MONGO"), Backbone.Collection.prototype.push.call(n, e, t) }, error: function () { return console.log("----- can't load/find data"), !1 } }), !0 }, remove: function (e, t) { var n = this, r = JSON.parse(JSON.stringify(e)), i = Utilities.getPathToDocumentAPI() + "content/" + r.guid + "/" + r.content_id + "?type=lessonPlanHeader"; return console.log("url: " + i), $.ajax({ url: i, type: "DELETE", async: !1, dataType: "json", contentType: "application/json", complete: function (e) { console.log("COMPLETE and PUSHED TO MONGO " + JSON.stringify(e)) }, success: function (r) { console.log("SUCCESS and PUSHED TO MONGO" + JSON.stringify(r)), Backbone.Collection.prototype.remove.call(n, e, t) }, error: function () { return console.log("----- can't load/find data"), !1 } }), !0 } }) }), require.register("models/parentsFomCollection", function (e, t, n) { var r = t("./parentsFomModel"); n.exports = Backbone.Collection.extend({ model: r, initialize: function () { console.log("initialising the parents find out more collection") }, sync: function (e, t, n) { return console.log("starting fetching ... method is " + e + " model is " + JSON.stringify(t) + " options are " + JSON.stringify(n)), n.timeout = 1e4, Backbone.sync(e, t, n) }, parse: function (e) { console.log("parents PAGE want to parse ..."); if (e) { console.log("parents PAGE can parse ..."); var t = []; for (var n = 0; n < e.length; n++) e[n].id.length > 1 && t.push(e[n]); return t } } }) }), require.register("models/parentsFomModel", function (e, t, n) { n.exports = Backbone.Model.extend({ defaults: {} }) }), require.register("models/quizCollection", function (e, t, n) { var r = t("./quizModel"); n.exports = Backbone.Collection.extend({ model: r, initialize: function () { console.log("initialising the quiz collection") }, sync: function (e, t, n) { return console.log("starting fetching ... method is " + e + " model is " + JSON.stringify(t) + " options are " + JSON.stringify(n)), n.timeout = 1e5, Backbone.sync(e, t, n) }, parse: function (e) { console.log("QUIZ want to parse ..."); if (e) { console.log("QUIZ can parse ..."); var t = []; for (var n = 0; n < e.length; n++) e[n].titleFriendly.length > 1 && t.push(e[n]); return t } } }) }), require.register("models/quizIndexCollection", function (e, t, n) { var r = t("./quizIndexModel"); n.exports = Backbone.Collection.extend({ model: r, initialize: function () { console.log("initialising the quiz index collection") }, sync: function (e, t, n) { return console.log("starting fetching ... method is " + e + " model is " + JSON.stringify(t) + " options are " + JSON.stringify(n)), n.timeout = 1e4, Backbone.sync(e, t, n) }, parse: function (e) { console.log("QUIZ INDEX want to parse ..."); if (e) { console.log("QUIZ INDEX can parse ..."); var t = []; for (var n = 0; n < e.length; n++) e[n].titleFriendly.length > 1 && t.push(e[n]); return t } } }) }), require.register("models/quizIndexModel", function (e, t, n) { n.exports = Backbone.Model.extend({ defaults: {} }) }), require.register("models/quizModel", function (e, t, n) { n.exports = Backbone.Model.extend({ defaults: {} }) }), require.register("models/searchCollection", function (e, t, n) { var r = t("./searchModel"); n.exports = Backbone.Collection.extend({ model: r, initialize: function () { console.log("initialising the search collection") }, comparator: function (e) { if (this._order_by == "az") return e.get("title"); if (this._order_by == "weight") return -e.get("weight") }, order_by_az: function () { this._order_by = "az", this.sort() }, order_by_weight: function () { this._order_by = "weight", this.sort() }, _order_by: "weight" }) }), require.register("models/searchModel", function (e, t, n) { n.exports = Backbone.Model.extend({ defaults: function () { } }) }), require.register("models/singleArticleCollection", function (e, t, n) { var r = t("./singleArticleModel"); n.exports = Backbone.Collection.extend({ model: r, defaultDiacriticsRemovalMap: [{ base: "A", letters: /[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g }, { base: "AA", letters: /[\uA732]/g }, { base: "AE", letters: /[\u00C6\u01FC\u01E2]/g }, { base: "AO", letters: /[\uA734]/g }, { base: "AU", letters: /[\uA736]/g }, { base: "AV", letters: /[\uA738\uA73A]/g }, { base: "AY", letters: /[\uA73C]/g }, { base: "B", letters: /[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g }, { base: "C", letters: /[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g }, { base: "D", letters: /[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g }, { base: "DZ", letters: /[\u01F1\u01C4]/g }, { base: "Dz", letters: /[\u01F2\u01C5]/g }, { base: "E", letters: /[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g }, { base: "F", letters: /[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g }, { base: "G", letters: /[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g }, { base: "H", letters: /[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g }, { base: "I", letters: /[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g }, { base: "J", letters: /[\u004A\u24BF\uFF2A\u0134\u0248]/g }, { base: "K", letters: /[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g }, { base: "L", letters: /[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g }, { base: "LJ", letters: /[\u01C7]/g }, { base: "Lj", letters: /[\u01C8]/g }, { base: "M", letters: /[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g }, { base: "N", letters: /[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g }, { base: "NJ", letters: /[\u01CA]/g }, { base: "Nj", letters: /[\u01CB]/g }, { base: "O", letters: /[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g }, { base: "OI", letters: /[\u01A2]/g }, { base: "OO", letters: /[\uA74E]/g }, { base: "OU", letters: /[\u0222]/g }, { base: "P", letters: /[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g }, { base: "Q", letters: /[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g }, { base: "R", letters: /[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g }, { base: "S", letters: /[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g }, { base: "T", letters: /[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g }, { base: "TZ", letters: /[\uA728]/g }, { base: "U", letters: /[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g }, { base: "V", letters: /[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g }, { base: "VY", letters: /[\uA760]/g }, { base: "W", letters: /[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g }, { base: "X", letters: /[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g }, { base: "Y", letters: /[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g }, { base: "Z", letters: /[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g }, { base: "a", letters: /[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g }, { base: "aa", letters: /[\uA733]/g }, { base: "ae", letters: /[\u00E6\u01FD\u01E3]/g }, { base: "ao", letters: /[\uA735]/g }, { base: "au", letters: /[\uA737]/g }, { base: "av", letters: /[\uA739\uA73B]/g }, { base: "ay", letters: /[\uA73D]/g }, { base: "b", letters: /[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g }, { base: "c", letters: /[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g }, { base: "d", letters: /[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g }, { base: "dz", letters: /[\u01F3\u01C6]/g }, { base: "e", letters: /[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g }, { base: "f", letters: /[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g }, { base: "g", letters: /[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g }, { base: "h", letters: /[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g }, { base: "hv", letters: /[\u0195]/g }, { base: "i", letters: /[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g }, { base: "j", letters: /[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g }, { base: "k", letters: /[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g }, { base: "l", letters: /[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g }, { base: "lj", letters: /[\u01C9]/g }, { base: "m", letters: /[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g }, { base: "n", letters: /[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g }, { base: "nj", letters: /[\u01CC]/g }, { base: "o", letters: /[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g }, { base: "oi", letters: /[\u01A3]/g }, { base: "ou", letters: /[\u0223]/g }, { base: "oo", letters: /[\uA74F]/g }, { base: "p", letters: /[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g }, { base: "q", letters: /[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g }, { base: "r", letters: /[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g }, { base: "s", letters: /[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g }, { base: "t", letters: /[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g }, { base: "tz", letters: /[\uA729]/g }, { base: "u", letters: /[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g }, { base: "v", letters: /[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g }, { base: "vy", letters: /[\uA761]/g }, { base: "w", letters: /[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g }, { base: "x", letters: /[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g }, { base: "y", letters: /[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g }, { base: "z", letters: /[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g }], defaultSymbolRemovalMap: [{ base: "-", symbols: /[\u2013\u2014\u00A0\u2060]/g }, { base: "and", symbols: /[\u002B\u0026]/g }, { base: "-14", symbols: /[\u00BC]/g }, { base: "-12", symbols: /[\u00BD]/g }, { base: "-34", symbols: /[\u00BE]/g }], initialize: function () { console.log("initialising the single article collection") }, comparator: function (e) { return e.get("url") }, _order_by: "az", sync: function (e, t, n) { return console.log("starting fetching ... method is " + e + " model is " + JSON.stringify(t) + " options are " + JSON.stringify(n)), n.timeout = 1e5, Backbone.sync(e, t, n) }, parse: function (e) { console.log("SINGLE ARTICLE want to parse ..."); if (e) { console.log("SINGLE ARTICLE can parse ..."); var t = []; for (var n = 0; n < e.length; n++) console.log("response is " + e), e[n].titleFriendly.length > 1 && t.push(e[n]); return t } }, search: function (e) { if (e === "") return this; var t = this.createFriendlyString(e); return _(this.filter(function (e) { var n = (new RegExp(t, "gi")).test(e.get("titleFriendly")), r = (new RegExp(t, "gi")).test(e.get("intro")); if (n) return e.set("weight", 8), !0; if (r) return e.set("weight", 4), !0 })) }, removeDiacritics: function (e) { for (var t = 0; t < this.defaultDiacriticsRemovalMap.length; t++) e = e.replace(this.defaultDiacriticsRemovalMap[t].letters, this.defaultDiacriticsRemovalMap[t].base); return e }, removeSymbols: function (e) { for (var t = 0; t < this.defaultSymbolRemovalMap.length; t++) e = e.replace(this.defaultSymbolRemovalMap[t].symbols, this.defaultSymbolRemovalMap[t].base); return e }, createFriendlyString: function (e) { var t = e.toLowerCase().replace(/'|&rsquo;|(<([^>]+)>)/g, ""); return t = this.removeDiacritics(this.removeSymbols(t)), t = t.replace(/^-|-$/g, ""), t } }) }), require.register("models/singleArticleModel", function (e, t, n) { n.exports = Backbone.Model.extend({ defaults: {} }) }), require.register("models/subjectCollection", function (e, t, n) { var r = t("./subjectModel"); n.exports = Backbone.Collection.extend({ model: r, initialize: function () { console.log("initialising the subject collection") }, comparator: function (e) { return e.get("weight") }, sync: function (e, t, n) { return console.log("SUBJECTS starting fetching ... method is " + e + " model is " + JSON.stringify(t) + " options are " + JSON.stringify(n)), n.timeout = 1e4, Backbone.sync(e, t, n) }, parse: function (e) { console.log("SUBJECTS want to parse ..."); if (e) { console.log("SUBJECTS can parse ..."); var t = []; for (var n = 0; n < e.length; n++) e[n].subjectFriendly.length > 1 && (e[n].subjectFriendly === Constants.lastSubjectToDisplay ? e[n].weight = "zzzzz" + e[n].subjectFriendly : e[n].weight = e[n].subjectFriendly, t.push(e[n])); return t } } }) }), require.register("models/subjectModel", function (e, t, n) { n.exports = Backbone.Model.extend({ defaults: {} }) }), require.register("models/unitCollection", function (e, t, n) { var r = t("./unitModel"); n.exports = Backbone.Collection.extend({ model: r, defaultDiacriticsRemovalMap: [{ base: "A", letters: /[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g }, { base: "AA", letters: /[\uA732]/g }, { base: "AE", letters: /[\u00C6\u01FC\u01E2]/g }, { base: "AO", letters: /[\uA734]/g }, { base: "AU", letters: /[\uA736]/g }, { base: "AV", letters: /[\uA738\uA73A]/g }, { base: "AY", letters: /[\uA73C]/g }, { base: "B", letters: /[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g }, { base: "C", letters: /[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g }, { base: "D", letters: /[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g }, { base: "DZ", letters: /[\u01F1\u01C4]/g }, { base: "Dz", letters: /[\u01F2\u01C5]/g }, { base: "E", letters: /[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g }, { base: "F", letters: /[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g }, { base: "G", letters: /[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g }, { base: "H", letters: /[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g }, { base: "I", letters: /[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g }, { base: "J", letters: /[\u004A\u24BF\uFF2A\u0134\u0248]/g }, { base: "K", letters: /[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g }, { base: "L", letters: /[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g }, { base: "LJ", letters: /[\u01C7]/g }, { base: "Lj", letters: /[\u01C8]/g }, { base: "M", letters: /[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g }, { base: "N", letters: /[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g }, { base: "NJ", letters: /[\u01CA]/g }, { base: "Nj", letters: /[\u01CB]/g }, { base: "O", letters: /[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g }, { base: "OI", letters: /[\u01A2]/g }, { base: "OO", letters: /[\uA74E]/g }, { base: "OU", letters: /[\u0222]/g }, { base: "P", letters: /[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g }, { base: "Q", letters: /[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g }, { base: "R", letters: /[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g }, { base: "S", letters: /[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g }, { base: "T", letters: /[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g }, { base: "TZ", letters: /[\uA728]/g }, { base: "U", letters: /[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g }, { base: "V", letters: /[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g }, { base: "VY", letters: /[\uA760]/g }, { base: "W", letters: /[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g }, { base: "X", letters: /[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g }, { base: "Y", letters: /[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g }, { base: "Z", letters: /[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g }, { base: "a", letters: /[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g }, { base: "aa", letters: /[\uA733]/g }, { base: "ae", letters: /[\u00E6\u01FD\u01E3]/g }, { base: "ao", letters: /[\uA735]/g }, { base: "au", letters: /[\uA737]/g }, { base: "av", letters: /[\uA739\uA73B]/g }, { base: "ay", letters: /[\uA73D]/g }, { base: "b", letters: /[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g }, { base: "c", letters: /[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g }, { base: "d", letters: /[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g }, { base: "dz", letters: /[\u01F3\u01C6]/g }, { base: "e", letters: /[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g }, { base: "f", letters: /[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g }, { base: "g", letters: /[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g }, { base: "h", letters: /[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g }, { base: "hv", letters: /[\u0195]/g }, { base: "i", letters: /[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g }, { base: "j", letters: /[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g }, { base: "k", letters: /[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g }, { base: "l", letters: /[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g }, { base: "lj", letters: /[\u01C9]/g }, { base: "m", letters: /[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g }, { base: "n", letters: /[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g }, { base: "nj", letters: /[\u01CC]/g }, { base: "o", letters: /[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g }, { base: "oi", letters: /[\u01A3]/g }, { base: "ou", letters: /[\u0223]/g }, { base: "oo", letters: /[\uA74F]/g }, { base: "p", letters: /[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g }, { base: "q", letters: /[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g }, { base: "r", letters: /[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g }, { base: "s", letters: /[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g }, { base: "t", letters: /[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g }, { base: "tz", letters: /[\uA729]/g }, { base: "u", letters: /[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g }, { base: "v", letters: /[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g }, { base: "vy", letters: /[\uA761]/g }, { base: "w", letters: /[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g }, { base: "x", letters: /[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g }, { base: "y", letters: /[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g }, { base: "z", letters: /[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g }], defaultSymbolRemovalMap: [{ base: "-", symbols: /[\u2013\u2014\u00A0\u2060]/g }, { base: "and", symbols: /[\u002B\u0026]/g }, { base: "-14", symbols: /[\u00BC]/g }, { base: "-12", symbols: /[\u00BD]/g }, { base: "-34", symbols: /[\u00BE]/g }], initialize: function (e) { console.log("initialising the unit collection") }, comparator: function (e, t) { var n = e.get("sortOrder"), r = e.get("sort"), i = t.get("sort"); if (r !== null && i !== null) { isNaN(parseFloat(r)) || (r = parseFloat(r)), isNaN(parseFloat(i)) || (i = parseFloat(i)); if (!isNaN(r - i)) return n == "ascending" ? r - i : i - r; if (typeof r == "string" && typeof r == typeof i) return n == "ascending" ? r.localeCompare(i) : i.localeCompare(r) } return r = this._getLocalCompare(e, t), i = this._getLocalCompare(t, e), n == "ascending" ? r - i : i - r }, _getLocalCompare: function (e, t) { var n = 0, r = e.get("sort"); return n = e.get("title").toString().localeCompare(t.get("title").toString()), r = r === null ? e.get("sortOrder") == "ascending" ? n + 1e3 : n - 1e3 : n, r }, sync: function (e, t, n) { return console.log("starting fetching ... method is " + e + " model is " + JSON.stringify(t) + " options are " + JSON.stringify(n)), n.timeout = 1e5, Backbone.sync(e, t, n) }, parse: function (e) { console.log("UNITS want to parse ..."); if (e) { console.log("UNITS can parse ..."); var t = []; for (var n = 0; n < e.length; n++) e[n].titleFriendly.length > 1 && t.push(e[n]); return t } }, search: function (e) { if (e === "") return this; var t = this.createFriendlyString(e); return _(this.filter(function (e) { var n = (new RegExp(t, "gi")).test(e.get("titleFriendly")), r = (new RegExp(t, "gi")).test(e.get("intro")); if (n) return e.set("weight", 8), !0; if (r) return e.set("weight", 4), !0 })) }, removeDiacritics: function (e) { for (var t = 0; t < this.defaultDiacriticsRemovalMap.length; t++) e = e.replace(this.defaultDiacriticsRemovalMap[t].letters, this.defaultDiacriticsRemovalMap[t].base); return e }, removeSymbols: function (e) { for (var t = 0; t < this.defaultSymbolRemovalMap.length; t++) e = e.replace(this.defaultSymbolRemovalMap[t].symbols, this.defaultSymbolRemovalMap[t].base); return e }, createFriendlyString: function (e) { var t = e.toLowerCase().replace(/'|&rsquo;|(<([^>]+)>)/g, ""); return t = this.removeDiacritics(this.removeSymbols(t)), t = t.replace(/^-|-$/g, ""), t } }) }), require.register("models/unitModel", function (e, t, n) { n.exports = Backbone.Model.extend({ defaults: {} }) }), require.register("models/videoCollection", function (e, t, n) { var r = t("./videoModel"); n.exports = Backbone.Collection.extend({ model: r, initialize: function () { console.log("initialising the video collection") }, comparator: function (e) { return e.get("$oid") }, sync: function (e, t, n) { return console.log("starting fetching ... method is " + e + " model is " + JSON.stringify(t) + " options are " + JSON.stringify(n)), n.timeout = 1e4, Backbone.sync(e, t, n) }, parse: function (e) { console.log("VIDEO want to parse ..."); if (e) { console.log("VIDEO can parse ..."); var t = []; for (var n = 0; n < e.length; n++) e[n].url.length > 1 && t.push(e[n]); return t } } }) }), require.register("models/videoIndexCollection", function (e, t, n) { var r = t("./videoIndexModel"); n.exports = Backbone.Collection.extend({ model: r, initialize: function () { console.log("initialising the video index collection") }, sync: function (e, t, n) { return console.log("starting fetching ... method is " + e + " model is " + JSON.stringify(t) + " options are " + JSON.stringify(n)), n.timeout = 1e4, Backbone.sync(e, t, n) }, parse: function (e) { console.log("VIDEO INDEX want to parse ..."); if (e) { console.log("VIDEO INDEX can parse ..."); var t = []; for (var n = 0; n < e.length; n++) e[n].url.length > 1 && t.push(e[n]); return t } } }) }), require.register("models/videoIndexModel", function (e, t, n) { n.exports = Backbone.Model.extend({ defaults: {} }) }), require.register("models/videoModel", function (e, t, n) { n.exports = Backbone.Model.extend({ defaults: {} }) }), require.register("views/business_page_view", function (e, t, n) { var r = t("./view"), i = t("./templates/business_page"), s = t("../lib/utilities"), o = t("../lib/constants"), u = t("../application"); n.exports = r.extend({ id: "business_page_view", template: i, className: "view", initialize: function () { console.log("initialize business page"), _.bindAll(this), this.render = _.bind(this.render, this), o.dataReady.on("businessPages", this.dataLoaded) }, dataLoaded: function () { console.log("+++ BUSINESS PAGE VIEW dataLoaded: has been triggered"); var e = this; if ($("#business_page_view").hasClass("hidden") || $("#business_page_view").length < 1) return console.log("BUSINESS PAGE VIEW dataLoaded: don't do anything"), !0; this.render(s.getCurrentBusinessPage()) }, render: function (e) { console.log("render business page for " + e); var t = this, n = !1; e == "contact-us" && (n = !0); var r = ""; return businessPageData.length && (r = JSON.parse(JSON.stringify(businessPageData.findWhere({ titleFriendly: e })))), s.updateMeta(r, !0, "business-page"), t.$el.html(t.template({ object: r, contactUs: n })), setTimeout(function () { s.unlockScreen(), $("html, body").animate({ scrollTop: 0 }, "fast"), s.showCurrentView(t, ["header_view", "footer_view"]), $("#header_view").focus() }, 0), this } }) }), require.register("views/dialog_view", function (e, t, n) { var r = t("./view"), i = t("./templates/dialog"), s = t("../lib/utilities"), o = t("../application"), u = t("../lib/constants"); n.exports = r.extend({ id: "dialog_view", template: i, className: "screen", isCutawayVisible: !1, storeTripID: "", currentDialog: "", initialize: function () { s.log(this.id, "initialize dialog"), this.render = _.bind(this.render, this) }, render: function (e, t) { s.log(this.id, "render dialog " + t, ">>>>>"); var n = e, r = u.dialogMessages, i = []; $.each(r, function (e, t) { t["name"] == n && (i = t) }), this.$el.html(this.template({ message: i, id: t })); var a = this; return setTimeout(function () { s.showCurrentView(a), s.lockScreen(), a.$el.show(), s.getLinkReady(".button", a), a.$el.find(".button").tappable(function (e) { var n = $(this).attr("data-type"), r; e.preventDefault(); switch (n) { case "1": return console.log("1st pressed"), s.unlockScreen(), s.removeView(a.id), !1; case "2": console.log("2nd pressed"), console.log("delete lessonPlan id:" + t), a.$el.find(".option-1").text(s.returnValueFromJSONObject("deletingMessage", u.staticMessaging, "name", "copy")), setTimeout(function () { return s.removeLessonPlan(t.toString()), u.dataReady.trigger("lessonPlanHeaderData"), s.removeView(a.id), r = "/" + s.getLanguageCode() + "/teachers/", o.router.navigate(r, !0), !1 }, 50); break; default: console.log("nothing pressed") } return !1 }), a.$el.find(".closeDialog").tappable(function (e) { return s.unlockScreen(), s.removeView(a.id), !1 }) }, 0), this } }) }), require.register("views/discover_view", function (e, t, n) { var r = t("./view"), i = t("./templates/discover"), s = t("./templates/partials/discover_row"), o = t("./templates/partials/search_form"), u = t("../lib/utilities"), a = t("../lib/constants"), f = t("../application"); n.exports = r.extend({ id: "discover_view", template: i, partials: { listRow: s, form: o }, className: "view", initialize: function () { console.log("initialize discover view"), _.bindAll(this), this.render = _.bind(this.render, this), a.subjectChange.on("done", this.updateSubject), a.unitChange.on("done", this.updateUnit) }, updateSubject: function () { console.log("+++ EXPLORE VIEW updateSubject: has been triggered"); if ($("#discover_view").hasClass("hidden") || !$("#discover_view").length) return console.log("updateSubject: don't do anything"), !0; var e = u.getCurrentSubject(), t = u.getCurrentUnit(), n = u.getCurrentArticle(); this.displayCarousels(e, null, null, "subject") }, updateUnit: function () { console.log("+++ EXPLORE VIEW updateUnit: has been triggered"); if ($("#discover_view").hasClass("hidden") || !$("#discover_view").length) return console.log("updateUnit: don't do anything"), !0; var e = u.getCurrentSubject(), t = u.getCurrentUnit(), n = u.getCurrentArticle(); this.displayCarousels(e, t, null, "unit") }, cursorTransition: function (e, t) { console.log("++++++ entering cursorTransition"); var n = this, r = e.siblings(".pageLink"), i = r.attr("data-subject"), s = r.attr("data-unit"), o = r.attr("data-article"); switch (t) { case "article": var a = e.parents(".article-thumb"), l = $(".childArticle-row"), c = $(".article-thumb"); break; case "unit": var a = e.parents(".unit-thumb"), l = $(".article-row"), c = $(".unit-thumb"); break; case "subject": var a = e.parents(".subject-thumb"), l = $(".unit-row"), c = $(".subject-thumb") } if (a.hasClass("draft")) return !1; if (a.hasClass("selected")) console.log("thumb already selected, so close"), l.slideUp("fast", function () { l.remove(), t == "subject" && u.setCurrentSubject(""), t !== "article" && u.setCurrentUnit(""), u.setCurrentArticle(""), c.removeClass("selected") }); else if (l.length > 0) l.slideUp("fast", function () { l.remove(), c.removeClass("selected"), a.addClass("selected"), console.log("+++ EXPLORE VIEW loading new " + t + " for subject " + i + ", unit " + s + ", article " + o); switch (t) { case "article": n.displayCarousels(i, s, o, "article"); break; case "unit": f.router.loadUnit(i, s); break; case "subject": f.router.loadSubject(i) } }); else { c.removeClass("selected"), a.addClass("selected"), console.log("+++ EXPLORE VIEW loading new " + t + " for subject " + i + ", unit " + s + ", article " + o); switch (t) { case "article": n.displayCarousels(i, s, o, "article"); break; case "unit": f.router.loadUnit(i, s); break; case "subject": f.router.loadSubject(i) } } }, displayCarousels: function (e, t, n, r) { var i = this, s = [], o = [], f = [], l = "", c = "", h = "", p = !1; if (previewApplication || devApplication) p = !0; e && (s = JSON.parse(JSON.stringify(unitData))); if (t) { var d = JSON.parse(JSON.stringify(unitData.findWhere({ titleFriendly: t }))), v = d.id; $.each(articleData.models, function (e, t) { var n = JSON.parse(JSON.stringify(t)); (n.parent == null || n.parent == v) && o.push(articleData.models[e]) }), o = JSON.parse(JSON.stringify(o)) } if (n) { var m = articleData.where({ titleFriendly: n }); m = JSON.parse(JSON.stringify(m[0])); var d = JSON.parse(JSON.stringify(unitData.findWhere({ titleFriendly: t }))), v = d.id; m.parent !== null && m.parent !== v && m.parent ? (f = JSON.parse(JSON.stringify(articleData.where({ parent: m.parent }))), c = JSON.parse(JSON.stringify(articleData.findWhere({ id: m.parent }))), c = c.titleFriendly) : (c = v, f = articleData.where({ parent: m.id }), f.length && (f = JSON.parse(JSON.stringify(f)))) } var g = ""; switch (r) { case "unit": $(".article-row").remove().unbind(), g = $(".unit-row .selected"), g.append(i.partials.listRow({ objects: o, imgLocation: a.imgLocation, imgCrop: a.imgGalleryThumb, imgExt: a.imgExt, rowNumber: l, objectType: "article", subjectURL: e, unitURL: t, preview: p })); break; case "article": f.length && ($(".childArticle-row").remove().unbind(), g = $(".article-row .selected"), g.append(i.partials.listRow({ objects: f, imgLocation: a.imgLocation, imgCrop: a.imgGalleryThumb, imgExt: a.imgExt, rowNumber: l, objectType: "childArticle", subjectURL: e, unitURL: t, preview: p }))); break; default: g = $(".subject-row .selected"), g.append(i.partials.listRow({ objects: s, imgLocation: a.imgLocation, imgCrop: a.imgGalleryThumb, imgExt: a.imgExt, rowNumber: l, objectType: "unit", subjectURL: e, preview: p })); var y = $(".unit-row .selected"); y.length && y.append(i.partials.listRow({ objects: o, imgLocation: a.imgLocation, imgCrop: a.imgGalleryThumb, imgExt: a.imgExt, rowNumber: l, objectType: "article", subjectURL: e, unitURL: t, parent: c, preview: p })); var b = $(".article-row .selected"); f.length && b.append(i.partials.listRow({ objects: f, imgLocation: a.imgLocation, imgCrop: a.imgGalleryThumb, imgExt: a.imgExt, rowNumber: l, objectType: "childArticle", subjectURL: e, unitURL: t, preview: p })) } i.$el.find(".subject-thumb.selected .unit-row").slideDown("fast", function () { }), i.$el.find(".unit-thumb.selected .article-row").slideDown("fast", function () { }), i.$el.find(".article-thumb.selected .childArticle-row").slideDown("fast", function () { }), i.$el.find(".unit-cursor").unbind("click").bind("click", function (e) { return e.preventDefault(), console.log("unit cursor clicked"), i.cursorTransition($(this), "unit"), !1 }), i.$el.find(".article-cursor").unbind("click").bind("click", function (e) { return e.preventDefault(), console.log("article cursor clicked"), i.cursorTransition($(this), "article"), !1 }), i.$el.find(".pageLink").tappable(function (e) { e.preventDefault(); var t = $(this).parents(".thumb"); return t.hasClass("draft") ? !1 : (u.navigateRemoveView($(this), this, !1), !1) }) }, render: function (e, t, n) { console.log(">>>>>render discover_view for subject: " + e + ", unit: " + t + ", article: " + n); var r = this, i = $.Deferred(); return function s() { if (t) { if (!articleDataRetrieved || !unitDataRetrieved || !subjectDataRetrieved) { setTimeout(s, 50); return } } else if (e) { if (!unitDataRetrieved || !subjectDataRetrieved) { setTimeout(s, 50); return } } else if (!subjectDataRetrieved) { setTimeout(s, 50); return } i.resolve() }(), i.done(function () { console.log("+++++ DATA IS LOADED FOR EXPLORE_VIEW"); var i = JSON.parse(JSON.stringify(subjectData)), s = "", o = a.menuLinks; $("html").attr("id", ""), u.updateMeta("noData", !1, "discover"); var l = r.partials.listRow({ objects: i, imgLocation: a.imgLocation, imgCrop: a.imgGalleryThumb, imgExt: a.imgExt, rowNumber: s, objectType: "subject" }), c = u.returnValueFromJSONObject("searchPlaceholder", a.staticMessaging, "name", "copy"), h = r.partials.form({ placeholder: c }); r.$el.html(r.template({ listRow: l, imgLocation: a.imgLocation, imgCrop: a.imgGalleryThumb, imgExt: a.imgExt, links: o, searchForm: h })), setTimeout(function () { u.showCurrentView(r), r.displayCarousels(e, t, n); var i = ""; e && (i = $(".subject-thumb.selected")), t && (i = $(".unit-thumb.selected")), console.log("selected is " + i); if (i) { var s = i.offset().top; $("html, body").animate({ scrollTop: s }, "slow") } r.$el.find(".close").tappable(function (e) { return e.preventDefault(), window.history.back(), !1 }), r.$el.find(".subject-cursor").tappable(function (e) { return e.preventDefault(), console.log("subject cursor clicked"), r.cursorTransition($(this), "subject"), !1 }), r.$el.find(".pageLink").tappable(function (e) { e.preventDefault(); var t = $(this).parents(".thumb"); return t.hasClass("draft") ? !1 : (u.navigateRemoveView($(this), this, !1), !1) }), r.$el.find(".menuLink").tappable(function (e) { return e.preventDefault(), !1 }), r.$el.find(".searchForm").submit(function (e) { e.preventDefault(), console.log("search form submitted"); var t = r.$el.find(".searchKeyword").val(); console.log("keyword is " + t); if (!t) return u.displaySearchError(r, "keyword"), !1; var n = "/" + u.getLanguageCode() + "/search/" + u.createFriendlyString(t) + "/"; return f.router.navigate(n, !0), !1 }) }, 0) }), this } }) }), require.register("views/explore_article_view", function (e, t, n) { var r = t("./view"), i = t("./templates/explore_article"), s = t("../lib/utilities"), o = t("../lib/constants"), u = t("../application"); n.exports = r.extend({ id: "explore_article_view", template: i, className: "view", titleFriendly: "", initialize: function () { console.log("initialize explore article page"), _.bindAll(this), this.render = _.bind(this.render, this), o.dataReady.on("explorePages", this.dataLoaded) }, dataLoaded: function () { console.log("+++ EXPLORE ARTICLE VIEW dataLoaded: has been triggered"); var e = this; if ($("#explore_article_view").hasClass("hidden") || $("#explore_article_view").length < 1) return console.log("EXPLORE ARTICLE VIEW dataLoaded: don't do anything"), !0; this.render(this.titleFriendly) }, render: function (e) { console.log("render explore article page: ", e); var t = this, n = !1, r, i = "", a, f = {}, l = {}, c, h, p = !1; this.titleFriendly = e; if (explorePageData.length) { explorePageData.each(function (e) { e.attributes.langCode = s.getLanguageCode() }), r = explorePageData.findWhere({ titleFriendly: e }); if (r === undefined) { u.router.notFound(); return } a = explorePageData.indexOf(r); var d = explorePageData.last(), v = explorePageData.size(); a != 0 ? (f.url = explorePageData.at(a - 1).get("titleFriendly"), f.title = explorePageData.at(a - 1).get("title")) : (f.url = explorePageData.at(v - 1).get("titleFriendly"), f.title = explorePageData.at(v - 1).get("title")), f.langCode = s.getLanguageCode(), a != v - 1 ? (l.url = explorePageData.at(a + 1).get("titleFriendly"), l.title = explorePageData.at(a + 1).get("title")) : (l.url = explorePageData.at(0).get("titleFriendly"), l.title = explorePageData.at(0).get("title")), l.langCode = s.getLanguageCode(), p = r.get("content_block_titles") === "numbered", console.log("explorearticledata", r), r = JSON.parse(JSON.stringify(r)) } return s.updateMeta(r, !0, "explore-article"), console.log("exploreArticleData: ", r), t.$el.html(t.template({ imgLocation: o.imgLocation, imgDesktop: o.imgDesktop, imgExplore: o.imgExplore, imgExt: o.imgExt, exploreArticleData: r, nextArticle: l, previousArticle: f, numberedContentBlockTitles: p })), setTimeout(function () { s.unlockScreen(), $("html, body").animate({ scrollTop: 0 }, "fast"), s.showCurrentView(t, ["header_view", "footer_view"]), t.$el.find(".pageLink").tappable(function (e) { return e.preventDefault(), console.log("link clicked"), s.navigateRemoveView($(this), t, !1), !1 }), $("#header_view").focus() }, 0), this } }) }), require.register("views/explore_landing_view", function (e, t, n) { var r = t("./view"), i = t("./templates/explore_landing"), s = t("../lib/utilities"), o = t("../lib/constants"), u = t("../application"); n.exports = r.extend({ id: "explore_landing_view", template: i, className: "view", events: { "click .page-link": "linkClicked" }, initialize: function () { console.log("initialize explore landing page"), _.bindAll(this), this.render = _.bind(this.render, this), o.dataReady.on("explorePages", this.dataLoaded) }, dataLoaded: function () { console.log("+++ EXPLORE LANDING VIEW dataLoaded: has been triggered"); var e = this; if ($("#explore_landing_view").hasClass("hidden") || $("#explore_landing_view").length < 1) return console.log("EXPLORE LANDING VIEW dataLoaded: don't do anything"), !0; this.render() }, render: function () { console.log("render explore landing page"); var e = this, t = !1, n = ""; return explorePageData.length && (explorePageData.each(function (e) { e.attributes.langCode = s.getLanguageCode() }), n = JSON.parse(JSON.stringify(explorePageData))), s.updateMeta(n, !0, "explore"), e.$el.html(e.template({ object: n })), setTimeout(function () { s.unlockScreen(), $("html, body").animate({ scrollTop: 0 }, "fast"), s.showCurrentView(e, ["header_view", "footer_view"]), $("#header_view").focus() }, 0), this }, linkClicked: function (e) { e.preventDefault(), s.navigateRemoveView($(e.currentTarget), this, !1) } }) }), require.register("views/footer_view", function (e, t, n) { var r = t("./view"), i = t("./templates/footer"), s = t("../lib/utilities"), o = t("../lib/constants"), u = t("../application"); n.exports = r.extend({ id: "footer_view", tagName: "footer", template: i, className: "component view", initialize: function () { console.log("initialize footer"), _.bindAll(this), this.render = _.bind(this.render, this), o.dataReady.on("businessPages", this.dataLoaded) }, dataLoaded: function () { console.log("+++ FOOTER VIEW dataLoaded: has been triggered"); var e = this; if (e.$el.hasClass("hidden") || e.$el.length < 1) return console.log("FOOTER VIEW dataLoaded: don't do anything"), !0; this.render() }, render: function () { console.log("render footer"); var e = this, t = ""; businessPageData.length && (t = JSON.parse(JSON.stringify(businessPageData))); var n = s.returnValueFromJSONObject("copyright", o.staticMessaging, "name", "copy"), r = "", i = "", a = ""; return langDir && (r = "/" + s.getLanguageCode() + "/", i = JSON.parse(JSON.stringify(s.returnValueFromJSONObject(s.getLanguageCode(), o.languages, "directory", "aboutDK"))), a = JSON.parse(JSON.stringify(s.returnValueFromJSONObject(s.getLanguageCode(), o.languages, "directory", "DKImages")))), e.$el.html(e.template({ copyright: n, objects: t, language: s.getLanguageCode(), langCode: r, aboutDK: i, DKImages: a })), setTimeout(function () { s.showCurrentView(e), e.$el.find(".pageLink").tappable(function (e) { return e.preventDefault(), s.navigateRemoveView($(this), this, !1), !1 }), e.$el.find(".selectLanguage").tappable(function (e) { return e.preventDefault(), u.router.selectLanguage(), !1 }) }, 0), this } }) }), require.register("views/gallery_view", function (e, t, n) { var r = t("./view"), i = t("./templates/gallery"), s = t("../lib/utilities"), o = t("../lib/constants"), u = t("../application"); n.exports = r.extend({ id: "gallery_view", template: i, className: "view", initialize: function () { console.log("initialize gallery"), _.bindAll(this), this.render = _.bind(this.render, this), o.dataReady.on("gallery", this.galleryLoaded) }, galleryLoaded: function () { console.log("+++ GALLERY VIEW galleryLoaded: has been triggered"); if ($("#gallery_view").hasClass("hidden") || $("#gallery_view").length < 1) return console.log("galleryLoaded: don't do anything"), !0; this.render() }, render: function () { console.log(">>>>>render gallery"); var e = "/" + s.getLanguageCode() + "/" + s.getCurrentSubject() + "/" + s.getCurrentUnit() + "/" + s.getCurrentArticle() + "/", t = ""; galleryData.length && (t = JSON.parse(JSON.stringify(galleryData.models[0]))), s.updateMeta(t, !0, "gallery"), t && (t.type = "gallery", t.id = t.id + "_gallery"), s.setCurrentObject(t), o.dataReady.trigger("object"), this.$el.html(this.template({ objects: t, imgLocation: o.imgLocation, imgLarge: o.imgGallery, imgThumb: o.imgGalleryThumbCrop, imgExt: o.imgExt, articleLink: e })); var n = this; return setTimeout(function () { function e(e) { function a() { s = e.width(), i.each(function () { $(this).width(s) }), r.width(s * o) } function f(e, t) { r.removeClass("animate"), t && r.addClass("animate"); if (Modernizr.csstransforms3d) r.css("transform", "translate3d(" + e + "%,0,0) scale3d(1,1,1)"); else if (Modernizr.csstransforms) r.css("transform", "translate(" + e + "%,0)"); else { var n = s * o / 100 * e; r.css("left", n + "px") } } function l(e) { e.gesture.preventDefault(); switch (e.type) { case "dragright": case "dragleft": var n = -(100 / o) * u, r = 100 / s * e.gesture.deltaX / o; if (u == 0 && e.gesture.direction == Hammer.DIRECTION_RIGHT || u == o - 1 && e.gesture.direction == Hammer.DIRECTION_LEFT) r *= 0; f(r + n); break; case "swipeleft": t.next(), e.gesture.stopDetect(); break; case "swiperight": t.prev(), e.gesture.stopDetect(); break; case "release": Math.abs(e.gesture.deltaX) > s / 2 ? e.gesture.direction == "right" ? t.prev() : t.next() : t.showPane(u, !0) } } var t = this; e = $(e); var r = $("#carousel-inner"), i = $(".slide"), s = 0, o = i.length, u = 0; this.init = function () { a(), $(window).on("load resize orientationchange", function () { a() }) }, this.showPane = function (e) { e = Math.max(0, Math.min(e, o - 1)), u = e, n.$el.find(".slide").removeClass("active"), n.$el.find(".slide[data-slide$='" + u + "']").addClass("active"), n.$el.find(".thumb").removeClass("active"), n.$el.find(".thumb[data-thumb$='" + u + "']").addClass("active"); var t = -(100 / o * u); f(t, !0) }, this.next = function () { return this.showPane(u + 1, !0) }, this.prev = function () { return this.showPane(u - 1, !0) }, e.hammer({ drag_lock_to_axis: !0 }).on("release dragleft dragright swipeleft swiperight", l), n.$el.find(".thumb").tappable(function (e) { e.preventDefault(); var r = $(this).attr("data-thumb"); $("html").hasClass("no-csstransforms") ? (n.$el.find(".slide").removeClass("active"), n.$el.find(".slide[data-slide$='" + r + "']").addClass("active"), n.$el.find(".thumb").removeClass("active"), n.$el.find(".thumb[data-thumb$='" + r + "']").addClass("active")) : t.showPane(r) }) } n.$el.find(".hidden").fadeIn("slow", function () { $(this).removeClass("hidden") }), s.showCurrentView(n), $(window).scrollTop(0, 60), n.$el.find(".slide:first").addClass("active"), n.$el.find(".thumb:first").addClass("active"), n.$el.find(".header").delay(3e3).fadeOut("slow", function () { $(this).addClass("hide").attr("style", "") }), n.$el.find(".detail-open").unbind("click").bind("click", function (e) { e.preventDefault(), console.log("detail display toggled"); var t = $(this).parents(".slide").children(".detail"); t.hasClass("display") ? $(".slide .detail").switchClass("display", "closed", 300, function () { $(".detail-toggle").text("Show text") }) : ($(".slide .detail").switchClass("closed", "display", 300), $(".detail-toggle").text("Hide text")) }), n.$el.find(".close").tappable(function (e) { e.preventDefault(), console.log(">>>>> close gallery view"); var t = $(this); return $(this).hasClass("pageLink") ? ($(this).fadeOut("fast"), n.$el.find(".gallery-inner").fadeOut("fast", function () { s.navigateRemoveView(t, n, !1) })) : window.history.back(), !1 }), n.$el.find(".slide-image img").on("dragstart", function (e) { e.preventDefault() }), n.$el.find(".slide-image img").on("dragstart", function (e) { e.preventDefault() }); var t = new e("#carousel"); t.init() }, 0), this } }) }), require.register("views/header_view", function (e, t, n) { var r = t("./view"), i = t("./templates/header"), s = t("./templates/partials/categories"), o = t("../lib/utilities"), u = t("../lib/constants"), a = t("../application"); n.exports = r.extend({ id: "header_view", tagName: "nav", logoTransformed: !1, hideLogo: "", attributes: { role: "navigation", tabindex: "0" }, template: i, partials: { categories: s }, className: "component view", initialize: function () { console.log("initialize header"), _.bindAll(this), this.render = _.bind(this.render, this), u.loginStatus.on("logout", this.refreshView), u.loginStatus.on("login", this.refreshView) }, refreshView: function () { this.render(this.hideLogo, this.logoTransformed) }, render: function (e, t) { console.log("render header"); var n = this; n.hideLogo = e, n.logoTransformed = t; var r = $.Deferred(); return function i() { if (!subjectDataRetrieved) { setTimeout(i, 50); return } r.resolve() }(), r.done(function () { console.log("+++++ SUBJECT DATA IS LOADED FOR HEADER"); var e = JSON.parse(JSON.stringify(subjectData)), t = u.menuLinks, r = n.partials.categories({ categories: e, imgLocation: u.imgLocation, imgCrop: u.imgThumbLimit, imgGrid: u.imgGrid, imgExt: u.imgExt }), i = ""; langDir && (i = "/" + o.getLanguageCode() + "/"), n.$el.html(n.template({ user: JSON.parse(o.getUserProfile()), subjects: r, imgLocation: u.imgLocation, imgCrop: u.imgThumbLimit, imgExt: u.imgExt, links: t, hideLogo: n.hideLogo, langCode: i, logoTransformed: n.logoTransformed })), setTimeout(function () { n.hideLogo || setTimeout(function () { if (n.logoTransformed) return !1; $("html").hasClass("csstransforms3d") ? n.$el.find(".topNav").addClass("hideLogo").removeClass("loading").delay(600).queue(function () { $(this).addClass("logoHidden").removeClass("hideLogo"), n.logoTransformed = !0, n.hideLogo = !0 }) : (n.$el.find(".logoBtn a").animate({ width: 50 }, { duration: 600, specialEasing: { width: "easeOutBounce" }, complete: function () { n.$el.find(".topNav").addClass("logoHidden").removeClass("loading") } }), n.$el.find(".logoBtn .logo").fadeOut(600), n.logoTransformed = !0, n.hideLogo = !0) }, 5e3), o.showCurrentView(n), n.$el.find(".page-link").tappable(function (e) { return e.preventDefault(), $(this).hasClass("news") ? !1 : (n.$el.find(".menu").removeClass("display"), o.navigateRemoveView($(this), this, !1), !1) }), n.$el.find(".menuBtn button").tappable(function (e) { return e.preventDefault(), n.$el.find("#menuContainer").animate({ scrollTop: 0 }, 1), n.$el.find(".menu").addClass("display"), o.lockScreen(), n.$el.find(".topNav").addClass("logoHidden").removeClass("loading"), n.logoTransformed = !0, n.$el.find(".menu").focus().attr("aria-expanded", "true"), !1 }), n.$el.find(".menuClose").tappable(function (e) { return e.preventDefault(), n.$el.find(".menu").removeClass("display"), o.unlockScreen(), n.$el.find(".menu").attr("aria-expanded", "false"), n.$el.focus(), !1 }), n.$el.find(".profileBtn button").tappable(function (e) { return e.preventDefault(), !1 }) }) }, 0), this } }) }), require.register("views/landing_page_view", function (e, t, n) { var r = t("./view"), i = t("./templates/landing_page"), s = t("./templates/partials/search_form"), o = t("./templates/partials/categories"), u = t("./templates/partials/explore_section"), a = t("../lib/utilities"), f = t("../lib/constants"), l = t("../application"); n.exports = r.extend({ id: "landing_page_view", template: i, partials: { form: s, categories: o, exploreSection: u }, className: "view", isLandingPageVisible: !1, playing: !1, paused: !1, initialize: function () { console.log("initialize landing page"), _.bindAll(this), this.render = _.bind(this.render, this), f.dataReady.on("subjects", this.subjectsLoaded), f.dataReady.on("explorePages", this.explorePagesLoaded) }, explorePagesLoaded: function () { console.log("+++ LANDING PAGE VIEW dataLoaded: has been triggered"); if ($("#landing_page_view").hasClass("hidden") || $("#landing_page_view").length < 1) return console.log("dataLoaded: don't do anything"), !0; this.displayExploreSection() }, subjectsLoaded: function () { console.log("+++ LANDING PAGE VIEW subjectsLoaded: has been triggered"); if ($("#landing_page_view").hasClass("hidden") || $("#landing_page_view").length < 1) return console.log("subjectsLoaded: don't do anything"), !0; this.displayCategories() }, updateMainCarousel: function (e, t) { $(".carousel .slide.selected").stop(!0).fadeOut("slow", function () { $(".carousel .slide.selected").removeClass("selected"), $(".selector li.selected").removeClass("selected").attr("aria-selected", "false"), $('.selector li[data-index*="' + e + '"]').addClass("selected").attr("aria-selected", "true"), $('.carousel .slide[data-index*="' + e + '"]').fadeIn("slow", function () { $(this).addClass("selected"), t && $(this).focus() }) }) }, updateComponentCarousel: function (e, t) { var n = $(".component." + t + " .comp-slide.selected"), r = $(".component." + t + ' .comp-slide[data-index="' + e + '"]'); n.addClass("hiding").delay(600).queue(function (e) { $(this).addClass("hidden").removeClass("hiding selected"), e() }), r.addClass("reveal").delay(600).queue(function (e) { $(this).addClass("selected").removeClass("reveal hidden"), $(this).children(".slide-link").focus(), e() }) }, previousSlide: function (e, t) { var n = parseInt(e) - 1; return n < 1 && (n = t), n }, nextSlide: function (e, t) { var n = parseInt(e) + 1; return n > t && (n = 1), n }, displayCategories: function () { console.log("landing_page_view: DISPLAY CATEGORIES"); var e = this; if (e.$el.find(".thumbs").length) return !1; var t = ""; subjectData.length && (t = JSON.parse(JSON.stringify(subjectData))); var n = e.$el.find(".components-outer-wrapper"); n.length && n.before(e.partials.categories({ categories: t, imgLocation: f.imgLocation, imgCrop: f.imgThumbLimit, imgGrid: f.imgGrid, imgExt: f.imgExt, langCode: a.getLanguageCode() })), e.$el.find(".thumbs a.pageLink").tappable(function (t) { return t.preventDefault(), console.log("pageLink thumb clicked"), a.navigateRemoveView($(this), e, !0), !1 }) }, displayExploreSection: function () { console.log("landing_page_view: DISPLAY EXPLORE SECTION"); var e = this; if (explorePageData.length) { explorePageData.each(function (e) { e.attributes.langCode = a.getLanguageCode() }); var t = explorePageData.first(3); console.log("collectionOfThreeArticles", t); var n = JSON.parse(JSON.stringify(t)); console.log("exploreArticles", n) } var r = e.$el.find(".explore-section"); r.length && r.html(e.partials.exploreSection({ exploreArticles: n, imgLocation: f.imgLocation, imgCrop: f.imgThumbLimit, imgGrid: f.imgGrid, imgExt: f.imgExt, langCode: a.getLanguageCode() })), r.find("a.pageLink").tappable(function (t) { return t.preventDefault(), console.log("pageLink explore section clicked"), a.navigateRemoveView($(this), e, !0), !1 }) }, render: function (e) { console.log("render landing page for " + e); var t = this, n = $.Deferred(); return t.$el.html("loading..."), function r() { console.log("waitForData in teachers_view"); if (!landingPageDataRetrieved) { setTimeout(r, 50); return } n.resolve() }(), n.done(function () { var n = a.returnValueFromJSONObject("homeIntro", f.staticMessaging, "name", "copy"), r = a.returnValueFromJSONObject("homeSubjects", f.staticMessaging, "name", "copy"), i = a.returnValueFromJSONObject("homeStatics", f.staticMessaging, "name", "copy"), s = a.returnValueFromJSONObject("alertFormHeader", f.staticMessaging, "name", "copy"), o = a.returnValueFromJSONObject("alertFormDesc", f.staticMessaging, "name", "copy"), u = a.returnValueFromJSONObject("searchPlaceholder", f.staticMessaging, "name", "copy"), c = t.partials.form({ placeholder: u }); t.isLandingPageVisible = !0, a.updateMeta("noData", !0, e); var h = ""; landingPageData.length && (h = JSON.parse(JSON.stringify(landingPageData))); if (explorePageData.length) { explorePageData.each(function (e) { e.attributes.langCode = a.getLanguageCode() }); var p = explorePageData.first(3); console.log("collectionOfThreeArticles", p); var d = JSON.parse(JSON.stringify(p)); console.log("exploreArticles", d) } t.$el.html(t.template({ object: h, homeIntro: n, imgLocation: f.imgLocation, imgCrop: f.imgThumbLimit, imgGrid: f.imgGrid, imgExt: f.imgExt, catHeader: r, staticHeader: i, formHeader: s, formIntro: o, langCode: a.getLanguageCode(), searchForm: c, exploreArticles: d })), setTimeout(function () { a.unlockScreen(), a.showCurrentView(t, ["header_view", "footer_view"]), subjectData.length && t.displayCategories(), explorePageData.length && t.displayExploreSection(), t.$el.find(".searchForm").submit(function (e) { e.preventDefault(), console.log("search form submitted"); var n = t.$el.find(".searchKeyword").val(); console.log("keyword is " + n); if (!n) return a.displaySearchError(t, "keyword"), !1; var r = "/" + a.getLanguageCode() + "/search/" + a.createFriendlyString(n) + "/"; return l.router.navigate(r, !0), !1 }), t.$el.find("a.pageLink").tappable(function (e) { return e.preventDefault(), console.log("pageLink clicked"), a.navigateRemoveView($(this), t, !0), !1 }), t.$el.find(".slideBtn").tappable(function (e) { e.preventDefault(), t.paused = !0, console.log("slide selector clicked"); var n = $(this).parent("li"), r = n.attr("data-index"); return n.hasClass("selected") ? !1 : (t.updateMainCarousel(r, !0), !1) }), t.$el.find("a.explore-article-link").tappable(function (e) { return e.preventDefault(), console.log("explore article link clicked"), a.navigateRemoveView($(this), t, !0), !1 }), t.$el.find("a.see-more-link").tappable(function (e) { return e.preventDefault(), a.navigateRemoveView($(this), t, !0), !1 }), t.$el.find(".slideDir").unbind().bind().tappable(function (e) { e.preventDefault(), t.paused = !0; var n = $(".carousel .slide.selected").attr("data-index"), r = $(".slide").length, i = t.nextSlide(n, r); return console.log("main carousel button clicked, current is " + n + ", length is " + r), $(this).hasClass("prevBtn") && (i = t.previousSlide(n, r)), t.updateMainCarousel(i, !0), !1 }), t.$el.find(".slide").hammer({ drag_lock_to_axis: !0 }).on("swipe drag", function (e) { (e.gesture.direction == Hammer.DIRECTION_UP || e.gesture.direction == Hammer.DIRECTION_DOWN) && e.gesture.stopDetect(); var n = $(".carousel .slide.selected").attr("data-index"), r = $(".slide").length, i = t.nextSlide(n, r); e.gesture.direction == Hammer.DIRECTION_LEFT && (e.type == "swipe" ? (e.gesture.preventDefault(), t.updateMainCarousel(i, !0)) : e.gesture.preventDefault()); if (e.gesture.direction == Hammer.DIRECTION_RIGHT) if (e.type == "swipe") { e.gesture.preventDefault(); var i = t.previousSlide(n, r); t.updateMainCarousel(i, !0) } else e.gesture.preventDefault(); return !1 }); var e = function () { var e = 0; return function (t, n) { clearTimeout(e), e = setTimeout(t, n) } }(); $(function () { var n = 100; $(window).resize(function () { if (!t.isLandingPageVisible || t.$el.hasClass("hidden")) return !1; e(function () { var e = $(window).width(); $(".slide-wrapper").each(function (t) { var n = $(this).attr("data-ratio"), r = e * f.carouselRatio, i = r / n; n > f.carouselRatio ? ($(this).css({ height: r, width: i }), $(this).addClass("fixHeight")) : ($(this).css({ height: r, width: "" }), $(this).removeClass("fixHeight")) }) }, n) }), $(window).resize() }), t.$el.find(".navBtn").unbind().bind().tappable(function (e) { var n = $(this).parents(".component").attr("data-component"), r = $(".component." + n + " .comp-slide.selected").attr("data-index"), i = $(this).parents(".component").find(".comp-slide").length, s = t.nextSlide(r, i); console.log("component carousel button clicked, current is " + r + ", length is " + i), $(this).hasClass("prev") && (s = t.previousSlide(r, i)), t.updateComponentCarousel(s, n) }), t.$el.find(".scrollBtn").tappable(function (e) { var n = t.$el.find(".searchBox").offset().top; $("html, body").animate({ scrollTop: n }, "slow") }), $(".slide:first").addClass("selected"), $(".selector li:first").addClass("selected").attr("aria-selected", "true"), $(".comp-slide:first-child").addClass("selected"), $(window).scroll(function () { t.$el.find(".scrollBtn").addClass("hidden").delay(1e3).queue(function (e) { $(this).remove().unbind() }) }), $("#header_view").focus() }, 0) }), this } }) }), require.register("views/lesson_plan_controls_view", function (e, t, n) { var r = t("./view"), i = t("./templates/lesson_plan_controls"), s = t("../lib/utilities"), o = t("../lib/constants"), u = t("../application"); n.exports = r.extend({ id: "lesson_plan_controls_view", template: i, className: "view component", initialize: function () { console.log("initialize lesson plan controls"), _.bindAll(this), this.render = _.bind(this.render, this), o.dataReady.on("object", this.objectLoaded) }, objectLoaded: function () { var e = this; console.log("+++ #" + e.id + " objectLoaded: has been triggered"); if ($("#" + e.id).hasClass("hidden") || $("#" + e.id).length < 1) return console.log("objectLoaded: don't do anything"), !0; this.render() }, render: function () { console.log("render lesson plan controls"); var e = this, t = $.Deferred(); return e.$el.html("loading..."), function n() { console.log("waitForData in " + e.id); if (!lessonPlanContentDataRetrieved) { setTimeout(n, 50); return } t.resolve() }(), t.done(function () { var t = JSON.parse(JSON.stringify(lessonPlanContentData.where({ LPID: s.getLessonPlanID() }))), n = s.getLessonPlanCursor(); e.$el.html(e.template({ langCode: s.getLanguageCode(), lessonPlanID: s.getLessonPlanID(), atBeginning: n === 0, atEnd: n === t.length - 1 })), setTimeout(function () { s.unlockScreen(), s.showCurrentView(e), e.$el.find(".plan").unbind("click").bind("click", function (t) { return t.preventDefault(), console.log(".plan clicked"), s.setPlayMode(!1), s.setPlanningMode(!0), s.navigateRemoveView($(this), e, !0), !1 }), e.$el.find(".back").unbind("click").bind("click", function (e) { e.preventDefault(), console.log(".back clicked"); if (n > 0) { s.setLessonPlanCursor(n - 1); var r = t[n - 1].url; u.router.navigate(r, !0) } return !1 }), e.$el.find(".forward").unbind("click").bind("click", function (e) { e.preventDefault(), console.log(".forward clicked"); if (n < t.length - 1) { s.setLessonPlanCursor(n + 1); var r = t[n + 1].url; u.router.navigate(r, !0) } return !1 }) }, 0) }), this } }) }), require.register("views/lesson_plan_toolbar_view", function (e, t, n) { var r = t("./view"), i = t("./templates/lesson_plan_toolbar"), s = t("../lib/utilities"), o = t("../lib/constants"), u = t("../application"); n.exports = r.extend({ id: "lesson_plan_toolbar_view", template: i, className: "view component", initialize: function () { console.log("initialize lesson plan toolbar"), _.bindAll(this), this.render = _.bind(this.render, this), o.dataReady.on("object", this.objectLoaded), o.dataReady.on("lessonPlanContentData", this.contentDataLoaded) }, contentDataLoaded: function () { var e = this; console.log("+++ #" + e.id + " contentDataLoaded: has been triggered"); if ($("#" + e.id).hasClass("hidden") || $("#" + e.id).length < 1) return console.log("contentDataLoaded: don't do anything"), !0; this.render() }, objectLoaded: function () { var e = this; console.log("+++ #" + e.id + " objectLoaded: has been triggered"); if ($("#" + e.id).hasClass("hidden") || $("#" + e.id).length < 1) return console.log("objectLoaded: don't do anything"), !0; this.render() }, render: function () { console.log("render lesson plan toolbar"); var e = this, t = s.getCurrentObject(), n, r, i; t && t.id && (n = t.id), r = lessonPlanContentData.findWhere({ LPID: s.getLessonPlanID(), object_id: n }), r && (i = JSON.parse(JSON.stringify(r))), console.log("lessonPlanContentItem: ", i); var o = ""; return langDir && (o = "/" + s.getLanguageCode() + "/"), e.$el.html(e.template({ object: t, lessonPlanID: s.getLessonPlanID(), lessonPlanContentItem: i, langCode: o })), setTimeout(function () { s.unlockScreen(), s.showCurrentView(e), e.$el.find("a").tappable(function (t) { return t.preventDefault(), s.navigateRemoveView($(this), e, !0), !1 }), e.$el.find(".add").unbind("click").bind("click", function (t) { t.preventDefault(), s.addNewLessonPlanContent(s.getCurrentObject()), e.render() }), e.$el.find(".remove").unbind("click").bind("click", function (t) { t.preventDefault(); var n = s.getCurrentObject(), r = n.id.toString(); s.removeLessonPlanContent(r), e.render() }), e.$el.find(".notes").unbind("click").bind("click", function (e) { e.preventDefault(); if ($(this).hasClass("disabled")) return !1; if ($(this).hasClass("active")) s.removeView("#notes_toolbar_view"), $(this).removeClass("active"); else { var t = s.getCurrentObject(), n = t.id; console.log("id: " + n), u.router.notesToolbar(n, "page"), $(this).addClass("active") } }), e.$el.find(".quit").unbind("click").bind("click", function (t) { t.preventDefault(), s.setPlanningMode(!1), $("#video_view #controls").removeClass("planningMode"), e.$el.remove() }), $("#header_view").focus() }, 0), this } }) }), require.register("views/lesson_plan_view", function (e, t, n) { var r = t("./view"), i = t("./templates/lesson_plan"), s = t("../lib/utilities"), o = t("../lib/constants"), u = t("../application"); n.exports = r.extend({ id: "lesson_plan_view", template: i, className: "view", editMode: !1, reordered: !1, loaded: !1, hidden: !0, LPID: 0, initialize: function () { console.log("initialize lesson plan"), _.bindAll(this), this.render = _.bind(this.render, this), o.dataReady.on("lessonPlanContentData", this.lessonPlanChanged) }, lessonPlanChanged: function () { console.log("+++ [lesson_plan_view] lessonPlanChanged: has been triggered"); if ($("#lesson_plan_view").hasClass("hidden") || $("#lesson_plan_view").length < 1) return console.log("lessonPlanChanged: don't do anything"), !0; this.render(this.LPID, !1) }, render: function (e, t) { console.log("render lesson plan id: " + e + ", hidden: " + t); var n = this; n.hidden = t, n.LPID = e; var r = $.Deferred(); n.$el.html("loading..."); var i = []; return s.setLessonPlanID(e), function a() { console.log("waitForData in lesson_plan_view"); if (!lessonPlanHeadersDataRetrieved || !lessonPlanContentDataRetrieved) { setTimeout(a, 50); return } r.resolve() }(), r.done(function () { var t = lessonPlanHeadersData.where({ content_id: e })[0], r, i, a, f; t ? t = JSON.parse(JSON.stringify(t)) : (r = "/" + s.getLanguageCode() + "/teachers/", u.router.navigate(r, !0)), a = JSON.parse(JSON.stringify(lessonPlanContentData.where({ LPID: e }))); var f = ""; a.length > 0 && (f = a[0].url), s.updateMeta("noData", !1, "lesson-plan"), n.$el.html(n.template({ title: t.title, objects: a, langCode: s.getLanguageCode(), imgLocation: o.imgLocation, imgCrop: o.imgPlanThumb, playURL: f, editMode: n.editMode, hidden: n.hidden })), setTimeout(function () { s.unlockScreen(), s.showCurrentView(n), setTimeout(function () { n.$el.find(".plan-container.hidden").fadeIn(600, function () { console.log("fade in page " + n.id), n.$el.find(".plan-container").removeClass("hidden") }) }, 600), n.$el.find(".addNote").tappable(function (t) { console.log(".addNote clicked"), t.preventDefault(), t.stopPropagation(); var n = $(this).attr("data-id"); console.log("id: " + e), u.router.notesToolbar(n, "overview") }), n.$el.find(".close").tappable(function (e) { return e.preventDefault(), n.editMode = !1, n.reordered = !1, s.navigateRemoveView($(this), n, !1), !1 }), n.$el.find(".addContent").tappable(function (t) { return t.preventDefault(), s.setPlayMode(!1), s.setPlanningMode(!0), s.setLessonPlanID(e), s.navigateRemoveView($(this), n, !1), !1 }), n.$el.find(".deletePage").tappable(function (e) { e.preventDefault(), e.stopPropagation(); var t = $(this).data("id").toString(); s.removeLessonPlanContent(t), $(this).parents(".page").remove() }), n.$el.find(".deleteLessonPlan").tappable(function (e) { var t; return u.router.dialog("delete-lesson-plan", s.getLessonPlanID()), !1 }), n.$el.find(".editTitle").tappable(function (e) { console.log(".editTitle clicked"), n.$el.find("h1").attr("contenteditable") == "false" ? ($(this).text("Save >"), n.$el.find("h1").addClass("editing"), n.$el.find("h1").attr("contenteditable", "true").focus()) : (n.$el.find("h1").attr("contenteditable", "false"), $(this).text("Edit title >"), n.$el.find("h1").removeClass("editing"), s.upadateLessonPlanTitle(n.$el.find("h1").text())) }), n.$el.find("h1").keyup(function (e) { e.which == 13 && n.$el.find(".editTitle").click() }), n.$el.find("h1").keypress(function (e) { return e.which != 13 }), n.$el.find(".playPlan").tappable(function (e) { e.preventDefault(), console.log(".playPan clicked"), s.setPlanningMode(!1), s.setPlayMode(!0), s.setLessonPlanCursor(0), s.navigateRemoveView($(this), n, !0) }), n.$el.find("#sortable").sortable({ disabled: !n.editMode, containment: n.$el.find(".pages"), handle: ".handle", helper: "clone", stop: function (e, t) { n.reordered = !0 } }), n.$el.find("#sortable").disableSelection(), n.$el.find(".editBtn").unbind("click").bind("click", function (t) { n.editMode ? (n.editMode = !1, n.reordered ? (n.$el.find(".loadingGif").removeClass("hidden"), $(this).text(s.returnValueFromJSONObject("savingMessage", o.staticMessaging, "name", "copy")), n.$el.find("#sortable article.page").each(function (e) { var t = $(this).data("id"), n = lessonPlanContentData.findWhere({ id: t.toString() }); n && n.set("order", e) }), lessonPlanContentData.save().done(function () { lessonPlanContentData.sort(), n.reordered = !1, n.render(e, !1) })) : n.render(e, !1)) : (n.editMode = !0, n.render(e, !1)) }), s.getLinkReady(".pageLink", n), n.$el.find(".pageLink").tappable(function (t) { return t.preventDefault(), console.log(".pageLink clicked"), n.editMode || (s.setPlayMode(!1), s.setPlanningMode(!0), s.setLessonPlanID(e), s.navigateRemoveView($(this), n, !0)), !1 }), $("#header_view").focus() }, 0) }), this } }) }), require.register("views/newsletter_confirmation_view", function (e, t, n) { var r = t("./view"), i = t("./templates/newsletter_confirmation"), s = t("./templates/partials/search_form"), o = t("../lib/utilities"), u = t("../lib/constants"), a = t("../application"); n.exports = r.extend({ id: "newsletter_confirmation_view", template: i, partials: { form: s }, className: "view", data: "", initialize: function () { console.log("initialize newsletter_confirmation"), _.bindAll(this), this.render = _.bind(this.render, this) }, dataLoaded: function () { console.log("+++ NEWSLETTER CONFIRMATION PAGE VIEW dataLoaded: has been triggered"); var e = this; this.render() }, render: function () { console.log("render newsletter confirmation page"); var e = this, t = $.Deferred(); return e.$el.html("loading..."), function n() { console.log("waitForData in newsletter_confirmation_view"); if (!landingPageDataRetrieved) { setTimeout(n, 50); return } t.resolve() }(), t.done(function () { console.log("+++++ DATA IS LOADED FOR NEWSLETTER_CONFIRMATION_VIEW"); var t = o.returnValueFromJSONObject("searchPlaceholder", u.staticMessaging, "name", "copy"), n = e.partials.form({ placeholder: t }), r = JSON.parse(JSON.stringify(landingPageData.models[0])); e.data = r; var i = ""; langDir && (i = "/" + o.getLanguageCode() + "/"), o.updateMeta(r, !0, "teachers"), e.$el.html(e.template({ langCode: i, object: r, searchForm: n })), setTimeout(function () { o.unlockScreen(), $("html, body").animate({ scrollTop: 0 }, 1), o.showCurrentView(e, ["header_view", "footer_view"]), e.$el.find(".pageLink").tappable(function (t) { return t.preventDefault(), o.navigateRemoveView($(this), e, !0), !1 }), $("#header_view").focus(), e.$el.find(".searchForm").submit(function (t) { t.preventDefault(), console.log("search form submitted"); var n = e.$el.find(".searchKeyword").val(); console.log("keyword is " + n); if (!n) return o.displaySearchError(e, "keyword"), !1; var r = "/" + o.getLanguageCode() + "/search/" + o.createFriendlyString(n) + "/"; return a.router.navigate(r, !0), !1 }), e.$el.find(".button").tappable(function (t) { return t.preventDefault(), console.log("button clicked"), o.navigateRemoveView($(this), e, !0), !1 }) }, 0) }), this } }) }), require.register("views/newsletter_sign_up_view", function (e, t, n) { var r = t("./view"), i = t("./templates/newsletter_sign_up"), s = t("../lib/utilities"), o = t("../lib/constants"), u = t("../application"); n.exports = r.extend({ id: "newsletter_sign_up_view", template: i, className: "view", initialize: function () { console.log("initialize newsletter sign up view"), _.bindAll(this), this.render = _.bind(this.render, this) }, useUKAdestra: function () { var e = this, t = s.getLanguageCode(); e.$el.find('input[name="_account_id"]').val("1130"), e.$el.find('input[name="_table_id"]').val("3"), e.$el.find('input[name="_email_field"]').val("3.email"), e.$el.find("#tag").attr("name", "3.tag"), e.$el.find('input[name="_list_id"]').val("1041"), e.$el.find("#adestraDate").attr("name", "3.lastaction"), e.$el.find("#firstName").attr("name", "3.first_name"), e.$el.find("#lastName").attr("name", "3.last_name"), e.$el.find("#email").attr("name", "3.email"), e.$el.find("#country").attr("name", "3.country"), e.$el.find("#userType").attr("name", "3.company"), e.$el.find("#userType").attr("name", "3.company"), e.$el.find("#over18").attr("name", "3.age") }, useUSAdestra: function () { var e = this, t = s.getLanguageCode(); e.$el.find('input[name="_account_id"]').val("1294"), e.$el.find('input[name="_table_id"]').val("1"), e.$el.find('input[name="_email_field"]').val("1.email"), e.$el.find("#tag").attr("name", "1.tag"), e.$el.find('input[name="_list_id"]').val("79"), e.$el.find("#adestraDate").attr("name", "1.lastaction"), e.$el.find("#firstName").attr("name", "1.first_name"), e.$el.find("#lastName").attr("name", "1.last_name"), e.$el.find("#email").attr("name", "1.email"), e.$el.find("#country").attr("name", "1.country"), e.$el.find("#userType").attr("name", "1.company"), e.$el.find("#over18").attr("name", "1.age") }, adestraDate: function () { var e = new Date, t = e.getMonth() + 1, n = e.getDate(), r = e.getFullYear(), i = e.getHours(), s = e.getMinutes(); s < 10 && (s = "0" + s), t < 10 && (t = "0" + t), n < 10 && (n = "0" + n); var o = r + "-" + t + "-" + n; return o }, render: function () { console.log("render newsletter sign up page"); var e = this, t = $.Deferred(); return e.$el.html("loading..."), function n() { console.log("waitForData in newsletter_sign_up_view"); if (!landingPageDataRetrieved) { setTimeout(n, 50); return } t.resolve() }(), t.done(function () { console.log("+++++ DATA IS LOADED FOR NEWSLETTER_SIGN_UP_VIEW"); var t = JSON.parse(JSON.stringify(landingPageData.models[0])), n = "", r = ""; langDir && (n = "/" + s.getLanguageCode() + "/", r = s.getLanguageCode()); var i = ""; window.location.origin ? i = window.location.origin : i = window.location.protocol + "//" + window.location.hostname + (window.location.port ? ":" + window.location.port : ""), s.updateMeta(t, !0, "newsletter_sign_up"), e.$el.html(e.template({ imgLocation: o.imgLocation, langCode: n, langCodeNoSlashes: r, object: t, adestraDate: e.adestraDate(), origin: i })), setTimeout(function () { s.unlockScreen(), $("html, body").animate({ scrollTop: 0 }, 1), s.showCurrentView(e, ["header_view", "footer_view"]), e.$el.find(".pageLink").tappable(function (t) { return t.preventDefault(), s.navigateRemoveView($(this), e, !0), !1 }); switch (s.getLanguageCode().toUpperCase()) { case "US": e.useUSAdestra(); break; default: e.useUKAdestra() } e.$el.find(".country").change(function () { switch (e.$el.find(".country").val().toUpperCase()) { case "US": e.useUSAdestra(); break; default: e.useUKAdestra() } }); var t = function (t) { var n = e.$el.find("#formSignUp"), r = n[0], i; if (r.checkValidity) r.checkValidity() ? e.$el.find(".error").addClass("hidden") : (e.$el.find(".error").addClass("hidden"), setTimeout(function () { e.$el.find(".error").removeClass("hidden") }, 300)); else { i = !0; if (!n.find("#firstName").val() || !n.find("#lastName").val() || !n.find("#email").val() || n.find("#email").val().indexOf("@") === -1 || !n.find("#country").val() || !n.find("#over18").val()) i = !1; i ? e.$el.find(".error").addClass("hidden") : (e.$el.find(".error").addClass("hidden"), setTimeout(function () { e.$el.find(".error").removeClass("hidden") }, 300), t.preventDefault()) } }; e.$el.find("#formSignUp").submit(function (e) { this.checkValidity && !this.checkValidity() && ($(this).find(":invalid").first().focus(), e.preventDefault()) }), e.$el.find("input[type=submit], button:not([type=button])").click(function (e) { t(e) }), e.$el.find("input").on("keypress", function (e) { var n = $(this).attr("type"); /date|email|month|number|search|tel|text|time|url|week/.test(n) && e.keyCode == 13 && t(e) }), $("#header_view").focus() }, 0) }), this } }) }), require.register("views/not_found_view", function (e, t, n) { var r = t("./view"), i = t("./templates/not_found"), s = t("./templates/partials/search_form"), o = t("./templates/partials/links"), u = t("../lib/utilities"), a = t("../lib/constants"), f = t("../application"); n.exports = r.extend({ id: "not_found_view", template: i, className: "view", partials: { form: s, linksSection: o }, initialize: function (e) { this.render = _.bind(this.render, this, e), a.dataReady.on("parentsFomSection", this.displayLinksSection) }, parentsFomDataLoaded: function () { if ($("#not_found_view").hasClass("hidden") || $("#not_found_view").length < 1) return console.log("dataLoaded: don't do anything"), !0; this.displayLinksSection() }, displayLinksSection: function () { console.log("not_found_view: Display links section"); var e = this, t, n; parentsFomData.length && (parentsFomData.each(function (e) { e.attributes.langCode = u.getLanguageCode() }), t = JSON.parse(JSON.stringify(parentsFomData)), console.log("links: ", t)), e.$el && (n = e.$el.find(".links")), n && n.length && (n.html(e.partials.linksSection({ langCode: u.getLanguageCode(), imgLocation: a.imgLocation, imgLink: a.imgLink, imgExt: a.imgExt, links: t })), e.$el.find("a.pageLink").tappable(function (t) { return t.preventDefault(), console.log("pageLink find out more section clicked"), u.navigateRemoveView($(this), e, !1), !1 })) }, render: function (e) { var t = this, n = ""; langDir && (n = "/" + u.getLanguageCode() + "/"); var r = $.Deferred(); return t.$el.html("loading..."), function i() { console.log("waitForData in " + t.id); if (!landingPageDataRetrieved) { setTimeout(i, 50); return } r.resolve() }(), r.done(function () { var e = JSON.parse(JSON.stringify(landingPageData.models[0])); u.updateMeta(e, !1, "not-found"); var r = u.returnValueFromJSONObject("searchPlaceholder", a.staticMessaging, "name", "copy"), i = t.partials.form({ placeholder: r }); t.$el.html(t.template({ hashFragment: a.hashFragment, imgLocation: a.imgLocation, imgLink: a.imgLink, imgExt: a.imgExt, langCode: n, object: e, searchForm: i })), setTimeout(function () { t.displayLinksSection(), u.showCurrentView(t, ["header_view", "footer_view"]), $("html, body").animate({ scrollTop: 0 }, 1), u.unlockScreen(), t.$el.find(".pageLink").tappable(function (e) { return e.preventDefault(), u.navigateRemoveView($(this), t, !0), !1 }), t.$el.find(".searchBtn").tappable(function (e) { return e.preventDefault(), u.navigateRemoveView($(this), t, !1), !1 }), t.$el.find(".searchForm").submit(function (e) { e.preventDefault(), console.log("search form submitted"); var n = t.$el.find(".searchKeyword").val(), r = t.$el.find("input[name=subject]:checked").val(); console.log("keyword is " + n + ", subject is " + r); if (!n) return u.displaySearchError(t, "keyword"), !1; var i = "/" + u.getLanguageCode() + "/search/" + u.createFriendlyString(n) + "/"; return f.router.navigate(i, !0), !1 }), $(".searchKeyword").focus() }, 0) }), this } }) }), require.register("views/notes_toolbar_view", function (e, t, n) { var r = t("./view"), i = t("./templates/notes_toolbar"), s = t("../lib/utilities"), o = t("../lib/constants"), u = t("../application"); n.exports = r.extend({ id: "notes_toolbar_view", template: i, className: "view component", context: "", initialize: function () { console.log("initialize lesson plan toolbar"), _.bindAll(this), this.render = _.bind(this.render, this), o.dataReady.on("object", this.objectLoaded) }, objectLoaded: function () { var e = this; console.log("+++ #" + e.id + " objectLoaded: has been triggered"); if ($("#" + e.id).hasClass("hidden") || $("#" + e.id).length < 1) return console.log("objectLoaded: don't do anything"), !0; this.render(null, e.context) }, render: function (e, t) { console.log("render notes toolbar"); var n = this; n.context = t; if (!e) var r = s.getCurrentObject(), e = r.id; console.log("id: " + e), console.log("lessonPlan: " + s.getLessonPlanID()); var i = lessonPlanContentData.findWhere({ LPID: s.getLessonPlanID(), object_id: e }); console.log("contentModel:" + JSON.stringify(i)); var u = JSON.parse(JSON.stringify(i)), a = ""; return langDir && (a = "/" + s.getLanguageCode() + "/"), n.$el.html(n.template({ content: u, langCode: a, context: n.context })), setTimeout(function () { s.unlockScreen(), s.showCurrentView(n), n.$el.find(".add_note").unbind("click").bind("click", function (t) { t.preventDefault(); var r = i.get("notes"); r[0] = "New note", i.set("notes", r), o.dataReady.trigger("lessonPlanContentData"), n.render(e, n.context) }), n.$el.find(".content").tappable(function () { console.log("content clicked to edit"), $content = $(this); var e = $content.attr("contenteditable"); $content.attr("contenteditable", "true").focus(), $(".edit").html("Save &rsaquo;") }), n.$el.find(".edit").unbind("click").bind("click", function (e) { console.log(".edit clicked"), $content = $(this).parent().find(".content"); var t = $content.attr("contenteditable"); if (t == "false") $content.attr("contenteditable", "true").focus(), $(this).html("Save &rsaquo;"); else { $content.attr("contenteditable", "false"); var n = i.get("notes"), r = $content.html().replace(/<div>/gi, "<br>").replace(/<\/div>/gi, "").replace(/<p>/gi, "<br>").replace(/<\/p>/gi, ""); n[0] = r, i.set("notes", n); var o = JSON.parse(s.getUserProfile()), u = o.uid, a = s.getPathToDocumentAPI() + "content/" + u + "/" + i.get("content_id"); console.log("PUT " + a), delete i.attributes._id, i.save({}, { url: a }).complete(function () { console.log("PUT " + a + " COMPLETE") }), $(this).html("Edit &rsaquo;") } }), n.$el.find(".delete_note").unbind("click").bind("click", function (t) { t.preventDefault(); var r = i.get("notes"); r = [], i.set("notes", r); var u = JSON.parse(s.getUserProfile()), a = u.uid, f = s.getPathToDocumentAPI() + "content/" + a + "/" + i.get("content_id"); console.log("PUT " + f), delete i.attributes._id, i.save({}, { url: f }).complete(function () { console.log("PUT " + f + " COMPLETE") }), o.dataReady.trigger("lessonPlanContentData"), n.render(e, n.context) }), n.$el.find(".close").tappable(function (e) { s.removeView(n.id) }), $("#header_view").focus() }, 0), this } }) }), require.register("views/parents_view", function (e, t, n) { var r = t("./view"), i = t("./templates/parents"), s = t("./templates/partials/explore_section"), o = t("./templates/partials/components"), u = t("./templates/partials/find_out_more"), a = t("../lib/utilities"), f = t("../lib/constants"), l = t("../application"); n.exports = r.extend({ id: "parents_view", template: i, partials: { exploreSection: s, componentsSection: o, findOutMoreSection: u }, className: "view", data: "", initialize: function () { console.log("initialize parents page"), _.bindAll(this), this.render = _.bind(this.render, this), f.dataReady.on("explorePages", this.explorePagesLoaded), f.dataReady.on("parentsFomSection", this.parentsFomDataLoaded) }, explorePagesLoaded: function () { console.log("+++ PARENTS VIEW dataLoaded: has been triggered"); if ($("#parents_view").hasClass("hidden") || $("#parents_view").length < 1) return console.log("dataLoaded: don't do anything"), !0; this.displayExploreSection() }, parentsFomDataLoaded: function () { if ($("#parents_view").hasClass("hidden") || $("#parents_view").length < 1) return console.log("dataLoaded: don't do anything"), !0; this.displayFindoutmoreSection() }, displayExploreSection: function () { console.log("parents_view: DISPLAY EXPLORE SECTION"); var e = this; if (explorePageData.length) { explorePageData.each(function (e) { e.attributes.langCode = a.getLanguageCode() }); var t = explorePageData.first(3); console.log("collectionOfThreeArticles", t); var n = JSON.parse(JSON.stringify(t)); console.log("exploreArticles", n) } var r = e.$el.find(".parents-explore-section"); r.length && r.html(e.partials.exploreSection({ exploreArticles: n, imgLocation: f.imgLocation, imgCrop: f.imgThumbLimit, imgGrid: f.imgGrid, imgExt: f.imgExt, langCode: a.getLanguageCode() })), e.$el.find("a.pageLink").tappable(function (t) { return t.preventDefault(), console.log("pageLink explore section clicked"), a.navigateRemoveView($(this), e, !1), !1 }) }, dataLoaded: function () { console.log("+++ PARENTS VIEW dataLoaded: has been triggered"); var e = this; if ($("#parents_view").hasClass("hidden") || $("#parents_view").length < 1) return console.log("PARENTS VIEW dataLoaded: don't do anything"), !0; this.render() }, displayFindoutmoreSection: function () { console.log("parents_view: DISPLAY Find out more SECTION"); var e = this, t; parentsFomData.length && (parentsFomData.each(function (e) { e.attributes.langCode = a.getLanguageCode() }), t = JSON.parse(JSON.stringify(parentsFomData)), console.log("findoutmoreArticles", t)); var n = e.$el.find(".find-out-more"); n.length && n.html(e.partials.findOutMoreSection({ findoutmoreArticles: t, imgExt: f.imgExt, langCode: a.getLanguageCode() })), e.$el.find("a.pageLink").tappable(function (t) { return t.preventDefault(), console.log("pageLink find out more section clicked"), a.navigateRemoveView($(this), e, !1), !1 }) }, renderShareButtons: function () { var e = this, t = e.data; if (typeof gigya != "undefined") { var n = new gigya.socialize.UserAction; n.setLinkBack(document.URL), n.setTitle(t.socialShareTitle), n.setDescription(t.socialShareDescription), n.addActionLink("Read More", document.URL); var r = "parent-social-share-icon-facebook_hh0rgk", i = { src: f.imgLocation + f.imgFacebook + r + f.imgExt, href: document.URL, type: "image" }; n.addMediaItem(i); var s = [{ provider: "Facebook", iconImgUp: f.imgLocation + f.imgShare + "icons/assets_facebook-iconx3" + f.imgExt }, { provider: "Twitter", iconImgUp: f.imgLocation + f.imgShare + "icons/assets_twitter-iconx3" + f.imgExt }, { provider: "LinkedIn", iconImgUp: f.imgLocation + f.imgShare + "icons/assets_linkedin-iconx3" + f.imgExt }, { provider: "Googleplus", iconImgUp: f.imgLocation + f.imgShare + "icons/assets_gplus-iconx3" + f.imgExt }, { provider: "Email", iconImgUp: f.imgLocation + f.imgShare + "icons/assets_mail-iconx3" + f.imgExt }], o = { userAction: n, shareButtons: "facebook-like,twitter-tweet,LinkedIn,google-plusone,Email", containerID: "social-share-buttons", cid: "", iconsOnly: "true", showCounts: "none", shareButtons: s, operationMode: "simpleShare", deviceType: "auto" }; gigya.socialize.showShareBarUI(o) } }, scrollToTestimonials: function () { var e = this; e.$el.find("#testimonial-link").tappable(function (e) { e.preventDefault(), $("html,body").animate({ scrollTop: $(this.hash).offset().top }, 1e3) }), e.$el.find("#testimonial-badge").tappable(function (e) { e.preventDefault(), $("html,body").animate({ scrollTop: $(this.hash).offset().top }, 1e3) }) }, render: function () { console.log("render parents homepage"); var e = this, t = $.Deferred(); return e.$el.html("loading..."), function n() { console.log("waitForData in parents_view"); if (!landingPageDataRetrieved) { setTimeout(n, 50); return } t.resolve() }(), t.done(function () { console.log("+++++ DATA IS LOADED FOR PARENTS_VIEW"); var t = JSON.parse(JSON.stringify(landingPageData.models[0])); e.data = t; var n = ""; langDir && (n = "/" + a.getLanguageCode() + "/"), a.updateMeta(t, !0, "parents"), e.$el.html(e.template({ imgLocation: f.imgLocation, imgCrop: f.imgPlanThumb, langCode: n, object: t, imgGrid: f.imgGrid, componentsSection: e.partials.componentsSection })), setTimeout(function () { a.unlockScreen(), e.displayFindoutmoreSection(), e.displayExploreSection(), $("html, body").animate({ scrollTop: 0 }, 1), a.showCurrentView(e, ["header_view", "footer_view"]), e.$el.find(".pageLink").tappable(function (t) { return t.preventDefault(), a.navigateRemoveView($(this), e, !0), !1 }), e.scrollToTestimonials(), typeof gigya != "undefined" && e.renderShareButtons(), e.$el.find(".navBtn").unbind().bind().tappable(function (t) { var n = $(this).parents(".component").attr("data-component"), r = $(".component." + n + " .comp-slide.selected").attr("data-index"), i = $(this).parents(".component").find(".comp-slide").length, s = e.nextSlide(r, i); console.log("component carousel button clicked, current is " + r + ", length is " + i), $(this).hasClass("prev") && (s = e.previousSlide(r, i)), e.updateComponentCarousel(s, n) }), e.$el.find(".comp-slide:first-child").addClass("selected"), $("#header_view").focus() }, 0) }), this } }) }), require.register("views/quiz_view", function (e, t, n) { var r = t("./view"), i = t("./templates/quiz"), s = t("../lib/utilities"), o = t("../lib/constants"), u = t("../application"); n.exports = r.extend({ id: "quiz_view", template: i, className: "view", quizTitle: "", startTimer: "", initialize: function () { console.log("initialize quiz"), _.bindAll(this), this.render = _.bind(this.render, this), o.dataReady.on("quiz", this.quizLoaded) }, quizLoaded: function () { console.log("+++ QUIZ VIEW quizLoaded: has been triggered"); if ($("#quiz_view").hasClass("hidden") || $("#quiz_view").length < 1) return console.log("quizLoaded: don't do anything"), !0; var e = s.getCurrentQuiz(); this.render(e) }, changePane: function (e) { e > 1 && $(".controls").removeClass("started"), e == 1 && $(".controls").addClass("started"), $(".pane.selected").fadeOut("fast", function () { $(this).removeClass("selected"), $('.pane[data-index="' + e + '"]').fadeIn("fast", function () { $(this).addClass("selected") }) }), $(".tracker .current").removeClass("current"), $('.tracker .bullet[data-index="' + e + '"]').addClass("current") }, previousPane: function () { var e = this, t = $(".pane.selected"), n = t.attr("data-index"), r = parseInt(n) - 1; if (r == 0) return !1; e.changePane(r) }, nextPane: function () { var e = this, t = $(".pane.selected"), n = t.attr("data-index"), r = parseInt(n) + 1; if ($(".pane").length - r < 2) { e.$el.find(".controls").addClass("hidden"), e.$el.find(".tracker").addClass("hidden"), e.$el.find(".timer").addClass("hidden"), e.stopTimer(); var i = $(".bullet.correct").length; i || (i = 0), $(".score").empty().append(i); var o = $(".timer").text().split(":"), u = u = "<span class='number'>" + parseInt(o[0]) + "</span> minutes and "; parseInt(o[0]) < 1 && (u = ""); var a = "<span class='number'>" + parseInt(o[1]) + "</span> seconds"; $(".time").empty().append("in " + u + a); var f = e.quizTitle + "-&" + window.location.pathname; s.sendGoogleEvent("quizEvent", "Quizzes", "Finish", f) } e.changePane(r) }, revealAnswer: function (e) { var t = e.parents(".answer"), n = t.siblings(".answer"), r = ".text-wrapper", i = ".text-wrapper", s = { opacity: 0 }, o = !0; t.hasClass("hasImage") && (s = { opacity: .1 }, r = ".image-wrapper", o = !1), e.hasClass("correct") ? (t.addClass("answered"), t.siblings(".answer").not(".answered").each(function (e) { var t = $(this), n = 300; setTimeout(function () { t.addClass("answered") }, n + e * n) }), $(".tracker .current").hasClass("track-answered") || ($(".tracker .current").addClass("correct"), $(".tracker .current").addClass("track-answered"))) : (t.addClass("answered"), $(".tracker .current").hasClass("track-answered") || ($(".tracker .current").addClass("incorrect"), $(".tracker .current").addClass("track-answered"))) }, displayTimer: function (e) { function t(e) { return (e < 10 ? "0" : "") + e } var n = Math.floor(e / 60); e %= 60; var r = Math.floor(e); n = t(n), r = t(r); var i = n + ":" + r; return i }, stopTimer: function () { console.log("+++++++ stop timer"); var e = this; clearInterval(e.startTimer) }, getRandomInt: function (e, t) { return Math.floor(Math.random() * (t - e + 1)) + e }, render: function (e) { console.log(">>>>>render quiz id: " + e); var t = this, n = "", r = ""; if (quizDataRetrieved) { n = quizData.findWhere({ titleFriendly: e }); if (n) { n = JSON.parse(JSON.stringify(n)), n.questions = _.shuffle(n.questions), _.each(n.questions, function (e) { e.answers = _.shuffle(e.answers) }); var i = quizIndex.indexOf(quizIndex.findWhere({ titleFriendly: e })), u; while ((u = t.getRandomInt(0, quizIndex.length - 1)) == i); r = JSON.parse(JSON.stringify(quizIndex.models[u])), t.quizTitle = n.title, n && (n.type = "quiz", s.setCurrentObject(n), o.dataReady.trigger("object")) } } return s.updateMeta(n, !0, "quiz"), t.$el.html(this.template({ object: n, promo: r, imgLocation: o.imgLocation, imgQuestion: o.imgGridWide, imgIntro: o.imgTablet, imgAnswer: o.imgGridWide, imgExt: o.imgExt })), setTimeout(function () { s.showCurrentView(t), $(window).scrollTop(0, 60), t.$el.find(".startBtn").tappable(function (e) { e.preventDefault(), t.changePane(1), t.$el.find(".controls").removeClass("hidden").addClass("started"), t.$el.find(".tracker").removeClass("hidden"), t.$el.find(".timer").removeClass("hidden"), t.$el.find(".tracker .bullet:first").addClass("current"), t.$el.find(".quiz-header").addClass("started"); var n = 0; t.startTimer = setInterval(function () { n += 1, $(".timer").text(t.displayTimer(n)) }, 1e3); var r = t.quizTitle + "-&" + window.location.pathname; return s.sendGoogleEvent("quizEvent", "Quizzes", "Start", r), !1 }), t.$el.find(".nextBtn").tappable(function (e) { return e.preventDefault(), console.log("next pane button clicked"), t.nextPane(), !1 }), t.$el.find(".prevBtn").tappable(function (e) { return e.preventDefault(), console.log("previous pane button clicked"), t.previousPane(), !1 }), t.$el.find(".bulletBtn").tappable(function (e) { e.preventDefault(), console.log("bullet button clicked"); var n = $(this).attr("data-index"); return t.changePane(n), !1 }), t.$el.find(".answerBtn").tappable(function (e) { e.preventDefault(), console.log("answer button clicked"); var n = $(this).parents(".answer"); return n.hasClass("answered") ? !1 : (t.revealAnswer($(this)), !1) }), t.$el.find(".replayBtn").tappable(function (e) { return e.preventDefault(), console.log("replay button clicked"), window.location.reload(), !1 }), t.$el.find(".close").tappable(function (e) { return e.preventDefault(), console.log(">>>>> close quiz view"), window.history.back(), !1 }), t.$el.find(".question-pane").hammer({ drag_lock_to_axis: !0 }).on("swipe drag", function (e) { return (e.gesture.direction == Hammer.DIRECTION_UP || e.gesture.direction == Hammer.DIRECTION_DOWN) && e.gesture.stopDetect(), e.gesture.direction == Hammer.DIRECTION_LEFT && (e.type == "swipe" ? (e.gesture.preventDefault(), t.nextPane()) : e.gesture.preventDefault()), e.gesture.direction == Hammer.DIRECTION_RIGHT && (e.type == "swipe" ? (e.gesture.preventDefault(), t.previousPane()) : e.gesture.preventDefault()), !1 }) }, 0), this } }) }), require.register("views/search_view", function (e, t, n) { var r = t("./view"), i = t("./templates/search"), s = t("./templates/partials/search_results"), o = t("./templates/partials/search_form"), u = t("../lib/utilities"), a = t("../lib/constants"), f = t("../application"); n.exports = r.extend({ id: "search_view", template: i, partials: { results: s, form: o }, className: "view", initialize: function () { console.log("initialize search"), _.bindAll(this), this.render = _.bind(this.render, this), a.dataReady.on("search", this.searchComplete) }, searchComplete: function () { console.log("+++ SEARCH VIEW searchComplete: has been triggered"); var e = this, t = u.getSearchSubject(), n = u.getSearchKeyword(); this.displayResults(n, t) }, displayResults: function (e, t) { var n = this, r = n.$el.find("#results"); r.empty(), u.updateMeta("noData", !1, "search"); var i = JSON.parse(JSON.stringify(lessonPlanContentData.where({ LPID: u.getLessonPlanID() }))); i.length === 0 && (i = ""), r.append(n.partials.results({ objects: JSON.parse(JSON.stringify(searchData.models)), imgLocation: a.imgLocation, imgCrop: a.imgSearch, imgExt: a.imgExt, keyword: e, subject: t, lessonPlanContent: i, planningMode: u.getPlanningMode() })), u.showCurrentView(n), n.$el.find(".searchKeyword").val(e), u.unlockScreen(), $("html, body").animate({ scrollTop: 0 }, "fast"), n.$el.addClass("hasResults"), n.$el.find(".count").focus(), n.$el.find(".pageLink").tappable(function (e) { return e.preventDefault(), console.log("search result clicked"), u.navigateRemoveView($(this), this, !1), !1 }), n.$el.find(".add").tappable(function (e) { e.preventDefault(); var t = $(this).data("id").toString(), n = searchData.findWhere({ id: t }); n = JSON.parse(JSON.stringify(n)), u.addNewLessonPlanContent(n, "search"), $(this).parent().find(".remove").removeClass("hidden"), $(this).addClass("hidden") }), n.$el.find(".remove").tappable(function (e) { e.preventDefault(); var t = $(this).data("id").toString(); console.log("remove clicked, id: " + t), u.removeLessonPlanContent(t), $(this).parent().find(".add").removeClass("hidden"), $(this).addClass("hidden") }) }, render: function (e, t) { console.log("render search"), console.log("searching within subject(s): " + t + ", with keyword: " + e); var n = this, r = u.returnValueFromJSONObject("searchPlaceholder", a.staticMessaging, "name", "copy"), i = n.partials.form({ placeholder: r }), s = !1; return e || (s = !0), u.updateMeta("noData", !0, "search"), n.$el.html(n.template({ searchForm: i })), setTimeout(function () { u.showCurrentView(n), e || (u.lockScreen(), n.$el.removeClass("hasResults")), n.$el.find("input[name=subject]:checked").length == 0 && u.getCurrentSubject() && (n.$el.find("." + u.getCurrentSubject() + " input[type=radio]").attr("checked", "checked"), n.$el.find(".radio-wrapper." + u.getCurrentSubject()).addClass("checked")), n.$el.find(".close").tappable(function (e) { return e.preventDefault(), window.history.go(u.returnToPreviousView(n.id)), !1 }), n.$el.find(".radio-wrapper").tappable(function () { n.$el.find("input[name=subject]:checked").prop("checked", !1), $(this).children("input[name=subject]").prop("checked", !0), n.$el.find(".radio-wrapper").removeClass("checked"), $(this).addClass("checked") }), n.$el.find(".searchForm").submit(function (e) { e.preventDefault(), console.log("search form submitted"); var t = n.$el.find(".searchKeyword").val(), r = n.$el.find("input[name=subject]:checked").val(); console.log("keyword is " + t + ", subject is " + r); if (!t) return u.displaySearchError(n, "keyword"), !1; var i = "/" + u.getLanguageCode() + "/search/" + u.createFriendlyString(t) + "/"; return f.router.navigate(i, !0), !1 }), n.$el.find(".searchKeyword").focus() }, 0), this } }) }), require.register("views/select_language_view", function (e, t, n) { var r = t("./view"), i = t("./templates/select_language"), s = t("../lib/utilities"), o = t("../lib/constants"), u = t("../application"); n.exports = r.extend({ id: "select_language_view", attributes: { tabindex: "0" }, template: i, className: "component view", initialize: function () { console.log("initialize select language view"), _.bindAll(this), this.render = _.bind(this.render, this), o.dataReady.on("all", this.reloadView) }, reloadView: function () { console.log("+++ SELECT LANGUAGE VIEW reloadView: has been triggered"); if ($("#select_language_view").hasClass("hidden") || $("#select_language_view").length < 1) return console.log("[select_language_view] reloadView: don't do anything"), !0; this.render("welcome") }, render: function (e) { console.log("render select language view"); var t = this, n = !1; e == "homepage" && s.updateMeta("noData", !0, "home"); var r = s.returnValueFromJSONObject("welcomeHeader", o.staticMessaging, "name", "copy"), i = s.returnValueFromJSONObject("languageHeader", o.staticMessaging, "name", "copy"), u = s.returnValueFromJSONObject("languageMessage", o.staticMessaging, "name", "copy"), a = s.returnValueFromJSONObject("cookiesLink", o.staticMessaging, "name", "copy"), f = s.returnValueFromJSONObject("cookiesMessage", o.staticMessaging, "name", "copy"), a = s.returnValueFromJSONObject("cookiesLink", o.staticMessaging, "name", "copy"); return t.$el.html(t.template({ languages: o.languages, cookiesMessage: f, cookiesLink: a, messaging: e, languageHeader: i, languageMessage: u, welcomeHeader: r })), setTimeout(function () { s.showCurrentView(t), s.lockScreen(), t.$el.find(".cookiesLang").tappable(function (e) { console.log("cookies clicked"), e.preventDefault(); var n = $(this).attr("data-id"); return s.setLanguageDefined("true"), n == s.getLanguageCode() ? (s.unlockScreen(), s.navigateRemoveView($(this), t, !0)) : window.location = $(this).attr("href"), !1 }), t.$el.find(".flagBtn").tappable(function (n) { n.preventDefault(); var r = $(this).attr("id"); return s.setLanguageDefined("true"), r == s.getLanguageCode() && e !== "homepage" ? (t.$el.remove(), t.$el.unbind(), s.unlockScreen(), $("body").focus()) : window.location = $(this).attr("href"), !1 }), t.$el.find("h1").focus() }, 0), this } }) }), require.register("views/show_article_view", function (e, t, n) { var r = t("./view"), i = t("./templates/show_article"), s = t("./templates/partials/thumbs"), o = t("./templates/partials/carousel"), u = t("./templates/partials/loading"), a = t("../lib/utilities"), f = t("../lib/constants"), l = t("../application"); n.exports = r.extend({ id: "show_article_view", template: i, partials: { thumbs: s, carousel: o, loading: u }, className: "view", ratio: 1, hidden: !0, scaling: !1, boxWidth: 0, boxHeight: 0, layout: "", type: "", isArticleVisible: !1, initialize: function () { console.log("initialize article view"), _.bindAll(this), this.render = _.bind(this.render, this), f.dataReady.on("subjects", this.subjectsLoaded), f.dataReady.on("units", this.unitsLoaded), f.dataReady.on("articles", this.articlesLoaded), f.dataReady.on("article", this.singleArticleLoaded) }, subjectsLoaded: function () { this.contentLoaded("subjects") }, unitsLoaded: function () { this.contentLoaded("units") }, articlesLoaded: function () { this.contentLoaded("articles") }, singleArticleLoaded: function () { this.contentLoaded("singleArticle") }, contentLoaded: function (e) { console.log("+++ SHOW ARTICLE VIEW contentLoaded: has been triggered, " + e + " are loaded"); if ($("#show_article_view").hasClass("hidden") || $("#show_article_view").length < 1) return console.log("contentLoaded: don't do anything"), !0; var t = this; switch (e) { case "subjects": return this.displayCarousel("subject"), !1; case "units": this.displayCarousel("unit"), this.displayThumbs(); break; case "articles": this.displayCarousel("article"), this.displayThumbs() } }, displayThumbs: function (e) { var e = a.getCurrentArticleType(); console.log("[show_article_view] displayThumbs type: " + e); var t = this; if (t.$el.find(".thumbs").length) return !1; if (!singleArticleData.length) return !1; if (JSON.parse(JSON.stringify(singleArticleData.models[0])).images || JSON.parse(JSON.stringify(singleArticleData.models[0])).field_animation) return !1; var n = ""; singleArticleData.length && (n = singleArticleData.models[0].id); var r = !0, i = !1; if (previewApplication || devApplication) i = !0; var s = [], o = t.$el.find(".outer-container"); o.empty(); switch (e) { case "article": articleDataRetrieved ? s = JSON.parse(JSON.stringify(articleData.where({ parent: n }))) : o.append(t.partials.loading({})); break; case "unit": articleDataRetrieved ? $.each(articleData.models, function (e, t) { var n = JSON.parse(JSON.stringify(t)); (n.parent == null || !n.parent) && s.push(articleData.models[e]) }) : o.append(t.partials.loading({})); break; case "subject": unitDataRetrieved ? (s = JSON.parse(JSON.stringify(unitData)), r = !1) : o.append(t.partials.loading({})) } if (o.length) { o.append(t.partials.thumbs({ thumbs: s, imgLocation: f.imgLocation, imgCrop: f.imgThumbLimit, imgGrid: f.imgGrid, imgExt: f.imgExt, articleThumbs: r, preview: i })); var u = t.$el.find(".unit .grid"); setTimeout(function () { u.masonry({ columnWidth: ".column-width", itemSelector: ".thumb", transitionDuration: 0 }), t.resizeEvent(), t.$el.find(".thumbs .pageLink").tappable(function (e) { e.preventDefault(), e.stopPropagation(), t.pageLinkEvent($(this), a.getCurrentUnit()) }) }, 0) } }, displayCarousel: function (e) { var t = this, n = a.getCurrentArticleType(); console.log("[show_article_view] displayCarousel loaded: " + e + ", type: " + n); if (n !== e) return !1; if (t.$el.find(".article-carousel").length) return !1; if (!singleArticleData.length) return !1; var r = [], i = !1, s = !1, o = !1, u = !1, l = v = d = data = "", c = !1; if (previewApplication || devApplication) c = !0; switch (e) { case "subject": r = subjectData.models; break; case "unit": data = JSON.parse(JSON.stringify(singleArticleData.models[0])), o = !0, r = unitData.models; break; case "article": data = JSON.parse(JSON.stringify(singleArticleData.models[0])), o = !0, u = !0; if (!articleDataRetrieved) return !1; var h = data.parent; h ? ($.each(articleData.models, function (e, t) { var n = JSON.parse(JSON.stringify(t)), i = n.parent; i == h && r.push(articleData.models[e]), n.id == data.id && (p = r.length - 1) }), l = articleData.findWhere({ id: data.parent }), l && (l = JSON.parse(JSON.stringify(l)))) : $.each(articleData.models, function (e, t) { var n = JSON.parse(JSON.stringify(t)), i = n.parent; i || r.push(articleData.models[e]), n.id == data.id && (p = r.length - 1) }) } var p = r.indexOf(singleArticleData.models[0]); r = JSON.parse(JSON.stringify(r)); if (r.length > 1) { s = !0; if (r.length > 2) { i = !0; var d = r[p - 1]; d == undefined && (d = r[r.length - 1]) } var v = r[p + 1]; v == undefined && (v = r[0]) } var m = t.$el.find(".page-container"); m.length && (m.append(t.partials.carousel({ object: data, carousel: r, next: v, previous: d, parentArticle: l, showNext: s, showPrevious: i, imgLocation: f.imgLocation, imgThumb: f.imgGalleryThumb, imgExt: f.imgExt, langCode: a.getLanguageCode(), unit: o, article: u, objectType: t.type, preview: c })), setTimeout(function () { t.resizeEvent(), t.scrollEvent(), t.styleScrollbar("carousel", !0), t.$el.find(".article-carousel .navLink").tappable(function (e) { return e.preventDefault(), $(this).hasClass("carouselLink") && $(this).parent().hasClass("selected") ? !1 : (t.fadeTransition($(this)), !1) }) }, 0)) }, resizeEvent: function () { console.log("++++++ RESIZE EVENT"); var e = this; if (!e.isArticleVisible || e.$el.hasClass("hidden")) return !1; e.storedWidth < f.tabletSize && $(window).width() >= f.tabletSize && e.captionPosition($(".selected a")), e.sizeBoundingBox(null, null, !0), e.styleScrollbar(e.layout), e.styleScrollbar("carousel"), e.storedWidth = $(window).width(); var t = $(window).height(), n = e.$el.find(".outer-container").height() + e.$el.find(".boxes").height(); $(window).width() < f.desktopSize ? n += e.$el.find(".intro-container").height() : e.$el.find(".intro-container").height() > n && (n = e.$el.find(".intro-container").height()); var r = e.$el.find(".article-carousel").height(), i = $(window).scrollTop(), s = n - t + r, o = 0; t - (n + r + o) <= 0 && i <= s ? e.$el.find(".article-carousel").addClass("fixed") : e.$el.find(".article-carousel").removeClass("fixed") }, scrollEvent: function () { console.log("++++++ SCROLL EVENT"); var e = this; if (!e.isArticleVisible || e.$el.hasClass("hidden")) return !1; var t = $(window).scrollTop(), n = e.$el.find(".outer-container").height() + e.$el.find(".boxes").height(); $(window).width() < f.desktopSize ? n += e.$el.find(".intro-container").height() : e.$el.find(".intro-container").height() > n && (n = e.$el.find(".intro-container").height()); var r = n - $(window).height() + $(".article-carousel").height(); t >= r ? e.$el.find(".article-carousel").removeClass("fixed") : e.$el.find(".article-carousel").addClass("fixed") }, captionTransition: function (e, t, n) { console.log("[show_article_view] entering captionTransition, " + e); var r = $(window).width(), i = f.tabletSize; switch (e) { case "hide": $("html").hasClass("lt-ie9") ? n.removeClass("selected") : r >= i ? t.fadeOut("fast", function () { n.removeClass("selected") }) : t.slideUp("fast", function () { n.removeClass("selected") }); break; case "reveal": $("html").hasClass("lt-ie9") ? n.addClass("selected") : r >= i ? t.fadeIn("fast", function () { n.addClass("selected") }) : t.slideDown("fast", function () { n.addClass("selected") }) } t.children("p").attr("tabindex", "0"), t.focus().attr("aria-expanded", "true") }, captionOpen: function (e) { console.log("[show_article_view] entering captionOpen"); var t = this; if (e.parents(".annotation").hasClass("selected")) return t.captionTransition("hide", e.siblings(".caption"), $(".annotation")), !1; t.captionTransition("hide", $(".caption"), $(".annotation")), t.captionPosition(e.parents(".annotation").children(".label")), t.captionTransition("reveal", e.siblings(".caption"), e.parents(".annotation")) }, captionPosition: function (e) { var t = this, n = $(".outer-container").width(), r = $(".inner-container").height(), i = "", s = "", o = "", u = "", a = "", f = ""; !Modernizr.csstransforms && e.parents(".annotation").hasClass("hasLeader") || t.$el.attr("data-layout") == "fullscreen" && e.parents(".annotation").hasClass("hasLeader") ? (f = e.parents(".annotation").children(".point"), i = e.height() + 5 + 8, s = e.width() - 4, o = 19, u = 40, a = -40) : (f = e.parents(".annotation").children(".label"), i = e.height() + 5 + 8 - 12, s = e.width(), u = 8, a = 3, o = 15), e.parents(".annotation").hasClass("hasLeader") || (i = e.height() + 5 + 8 - 12, s = e.width(), u = 8, a = 3, o = 15, e.attr("data-align") === "center" && (s = e.width() - parseInt(e.attr("data-adjust")) + 16, o = parseInt(e.attr("data-adjust"))), f.attr("data-align") === "right" && (o = e.width() + 16 + 15, s = -15)); var l = e.position(), c = $(f).attr("data-left"), h = $(f).attr("data-top"); $(f).attr("data-left") > 50 ? h > 50 ? e.siblings(".caption").css({ right: 100 - c + "%", bottom: 100 - h + "%", "margin-right": o, "margin-bottom": i * -1 - a }) : e.siblings(".caption").css({ right: 100 - c + "%", top: h + "%", "margin-top": -u, "margin-right": o }) : h > 50 ? e.siblings(".caption").css({ left: c + "%", bottom: 100 - h + "%", "margin-left": s, "margin-bottom": i * -1 - a }) : e.siblings(".caption").css({ left: c + "%", top: h + "%", "margin-top": u * -1, "margin-left": s }) }, switchWideScreen: function () { var e = this, t = $(".page-container"), n = [$(".intro-container"), $(".page-divide"), $(".outer-container"), $(".breadcrumb"), $(".inner-container"), $(".boxes")]; switch (e.layout) { case "standard": case "scrolling-portrait": t.hasClass("widescreen") ? (e.sizeBoundingBox(null, e.layout, !1), e.$el.attr("data-layout", e.layout), n[0].animate({ marginLeft: "0" }, "fast"), n[1].animate({ left: "33.33333%", marginLeft: "-40px" }, "fast"), n[2].animate({ marginLeft: "0", width: "66.66666%", height: e.boxHeight }, "fast"), n[5].animate({ marginLeft: "33.33333%", width: "66.66666%" }, "fast"), n[4].animate({ width: e.boxWidth, height: e.boxHeight }, "fast", function () { t.removeClass("widescreen"), $("html").removeClass("widescreen"), a.clearInlineStyle(n), $(".intro-toggle").html("&lsaquo;"), e.sizeBoundingBox(null, e.layout, !0) })) : (e.sizeBoundingBox(null, "widescreen", !1), e.$el.attr("data-layout", "widescreen"), n[3].removeClass("open"), $(".links").removeAttr("style"), $(".openTab").html("&rsaquo;"), n[0].animate({ marginLeft: "-33.33333%" }, 0), n[1].animate({ left: "0px", marginLeft: "0" }, "fast"), n[2].css({ marginLeft: "33.33333%" }), n[5].animate({ marginLeft: "40px", width: "94%", "float": "none" }, "fast"), n[2].animate({ marginLeft: "40px", width: "94%", height: e.boxHeight }, "fast"), n[4].animate({ width: e.boxWidth, height: e.boxHeight }, "fast", function () { a.clearInlineStyle(n), $(".intro-toggle").html("&rsaquo;"), t.addClass("widescreen"), $("html").addClass("widescreen"), e.sizeBoundingBox(null, "widescreen", !0) })); break; case "scrolling-landscape": t.hasClass("widescreen") ? (e.sizeBoundingBox(null, e.layout, !1), e.$el.attr("data-layout", "scrolling-landscape"), n[0].animate({ marginLeft: "0" }, "fast"), n[1].animate({ left: "33.33333%", marginLeft: "-40px" }, "fast"), n[2].animate({ marginLeft: "33.33333%", width: "66.66666%" }, "fast", function () { t.removeClass("widescreen"), $("html").removeClass("widescreen"), a.clearInlineStyle(n), $(".intro-toggle").html("&lsaquo;"), e.sizeBoundingBox(null, e.layout, !0) })) : (e.sizeBoundingBox(null, "scrolling-landscape-widescreen", !1), e.$el.attr("data-layout", "scrolling-landscape-widescreen"), n[3].removeClass("open"), $(".links").removeAttr("style"), $(".openTab").html("&rsaquo;"), n[0].animate({ marginLeft: "-33.33333%" }, 0), n[1].animate({ left: "0px", marginLeft: "0" }, "fast"), n[2].css({ marginLeft: "33.33333%" }), n[2].animate({ marginLeft: "40px", width: "94%" }, "fast", function () { a.clearInlineStyle(n), $(".intro-toggle").html("&rsaquo;"), t.addClass("widescreen"), $("html").addClass("widescreen"), e.sizeBoundingBox(null, "scrolling-landscape-widescreen", !0) })) } }, toggleText: function () { function h(r) { a.clearInlineStyle(n), t.addClass("widescreen"), $("html").addClass("widescreen"), o.removeClass("hide"), e.sizeBoundingBox(null, r, !0) } function p() { t.removeClass("widescreen"), $("html").removeClass("widescreen"), o.addClass("hide"), a.clearInlineStyle(n), e.sizeBoundingBox(null, e.layout, !0) } function d() { t.hasClass("widescreen") ? (e.sizeBoundingBox(null, e.layout, !1), e.$el.attr("data-layout", e.layout), s.fadeIn("fast"), $(".outer-container").animate(u(), "fast"), $("#annotations-wrapper").animate({ width: e.boxWidth, height: e.boxHeight, opacity: 1 }, "fast"), $("#images-wrapper").animate({ width: e.boxWidth, height: e.boxHeight }, "fast", function () { p() }), $(".intro-container").delay(10).animate({ marginLeft: "0" }, "fast")) : (e.sizeBoundingBox(null, r, !1), e.$el.attr("data-layout", r), s.fadeOut("fast"), $(".intro-container").animate({ marginLeft: "-33.33333%" }, "fast"), c(), l.delay(25).animate(f(), "fast", function () { h(r) })) } var e = this, t = $(".page-container"), n = [$(".intro-container"), $("#annotations-wrapper"), $(".annotation"), $(".outer-container"), $(".breadcrumb"), $("#images-wrapper"), $(".boxes"), $(".article-carousel"), $(".pullFact")], r = "widescreen", i = r, s = $(".boxes, .article-carousel, .pullFact, .annotation"), o = $(".display-text"); switch (e.layout) { case "standard": case "scrolling-portrait": var u = function () { return { marginLeft: "0", width: "66.66666%", height: e.boxHeight } }, f = function () { return { width: e.boxWidth, height: e.boxHeight } }, l = $("#images-wrapper"), c = function () { $(".outer-container").delay(25).animate({ width: "100%", height: e.boxHeight }, "fast") }; d(); break; case "scrolling-landscape": var r = "scrolling-landscape-widescreen", i = "scrolling-landscape", u = function () { return { marginLeft: "33.33333%", width: "66.66666%", height: e.boxHeight } }, f = function () { return { marginLeft: "0", width: "100%", height: e.boxHeight } }, l = $(".outer-container"), c = function () { }; d(); break; case "fullscreen": s = $(".boxes, .article-carousel, .pullFact, #annotations-wrapper, .full-screen-icons"), t.hasClass("widescreen") ? (s.fadeIn("fast"), $(".intro-container, .full-screen-icons").fadeIn("fast", function () { p() })) : (s.fadeOut("fast"), $(".intro-container, .full-screen-icons").fadeOut("fast", function () { h() })) } }, sizeBoundingBox: function (e, t, n) { console.log("++++++ entering sizeBoundingBox resize is " + n); var r = this; if (!e) var e = r.ratio; if (!t) var t = r.$el.attr("data-layout"); console.log("ratio is " + e + ", layout is " + t + ", resize is " + n); var i = $(window).width(), s = window.innerHeight; if ($("html").hasClass("lt-ie9")) var s = $(window).height(); var o = i, u = 1, a = !1, l = 0, c = !0; switch (t) { case "standard": case "scrolling-portrait": u = i * 2 / 3; break; case "widescreen": case "fullscreen": u = i; break; case "scrolling-landscape": c = !1, u = (s - 82) / e, l = 32, i >= f.tabletSize && i < f.desktopSize && (u = i, l = 0); break; case "scrolling-landscape-widescreen": u = s / e; break; case "index": c = !1; if (r.type == "subject") { var h = r.$el.find(".thumbs").height() + $(".intro-container").height() + $("#footer_view").height() + 50; h < s ? u = s - $(".intro-container").height() - $("#footer_view").height() - 50 : u = r.$el.find(".thumbs").height() } else s > r.$el.find(".grid").height() + $("#footer_view").height() + 50 && s > r.$el.find(".intro-container").height() + $("#footer_view").height() + 50 ? u = s - $("#footer_view").height() - 50 : u = r.$el.find(".grid").height(); break; case "animation": s > 640 + $("#footer_view").height() + 50 && s > r.$el.find(".intro-container").height() + $("#footer_view").height() + 50 ? u = s - $("#footer_view").height() - 50 : u = 640 } if (i >= f.desktopSize || t == "index" || t == "animation") o = u; var p = o * e; r.boxWidth = o, r.boxHeight = p, n && (i >= f.tabletSize ? (a && this.$el.find(".outer-container").mCustomScrollbar("update"), this.$el.find(".inner-container").css({ width: o, height: p }), p + l < s - $("#footer_view").height() - 50 && c ? this.$el.find(".outer-container").css({ height: s - $("#footer_view").height() - 50 }) : this.$el.find(".outer-container").css({ height: p + l })) : (this.$el.find("#annotations-wrapper").css({ width: "", height: "" }), this.$el.find("#images-wrapper").css({ width: o, height: p }))), $(".scrolling-landscape-layout .outer-container").mCustomScrollbar("update") }, scaleTransition: function (e, t, n, r, i, s) { console.log("entering scaleTransition"); var o = this; if ($("html").hasClass("lt-ie9")) return a.navigateRemoveView(t, o, !1), !1; var u = t.attr("data-pid"); o.$el.find('.image[data-pid="' + u + '"]').addClass("scaleImage"); var l = $(".scaleImage"), c = l.position(); if (o.$el.attr("data-layout") == "index") { console.log("+++++ scaleTransition index"); var h = l.parents(".thumb"); h.addClass("targetThumb"); var p = h.position(); h.css({ left: p.left, top: p.top }), l.css({ width: l.width(), height: l.height() }) } else l.css({ left: c.left, top: c.top, width: l.width(), height: l.height() }); a.lockScreen(), o.$el.find(".grid .thumb").not(".targetThumb").animate({ opacity: 0 }, 500), o.$el.find(".image").not(".scaleImage").animate({ opacity: 0 }, 500), o.$el.find(".annotation").animate({ opacity: 0 }, 500), o.$el.find(".grid .thumbTitle").animate({ opacity: 0 }, 500), o.$el.find(".boxes").animate({ opacity: 0 }, 500), o.$el.find(".article-carousel").animate({ opacity: 0 }, 500), $("#footer_view").fadeOut(500), o.$el.find(".intro-container").animate({ opacity: 0 }, 500, function () { var h = a.getImageSize(i), d = f.imgLocation + h + u + f.imgExt; $('<img src="' + d + '" class="new-image" />').error(function () { console.log("error getting image ", d), o.fadeTransition(t) }).load(function () { $(this).appendTo(".outer-container"), l.attr("src", this.src), o.$el.attr("data-layout") == "index" && (o.$el.find(".grid").addClass("inner-container").attr("id", "images-wrapper").removeClass("grid thumbs"), l.prependTo("#images-wrapper"), l.css({ left: c.left + p.left, top: c.top + p.top })), o.sizeBoundingBox(e, "standard", !0), l.animate({ left: n + "%", top: r + "%", width: i + "%", height: s + "%" }, 500, function () { o.hidden = !1, o.scaling = !0, a.navigateRemoveView(t, o, !1) }), $("html, body").animate({ scrollTop: 0 }, 500) }) }) }, fadeTransition: function (e) { console.log("[show_article_view] fadeTransition"); var t = this; if ($("html").hasClass("lt-ie9")) return a.navigateRemoveView(e, t, !1), !1; t.$el.find(".page-container").fadeOut("fast", function () { t.$el.find(".page-container").addClass("hidden"), a.navigateRemoveView(e, t, !1) }), $("#footer_view").fadeOut("fast") }, styleScrollbar: function (e, t) { console.log("entering styleScrollbar for " + e); var n = this; switch (e) { case "fullscreen": (n.storedWidth < f.desktopSize || t) && $(window).width() >= f.desktopSize && $(".intro-container .inner.mCustomScrollbar").length == 0 && $(".fullscreen-layout .intro-container .inner").mCustomScrollbar({ scrollInertia: 150, autoDraggerLength: !1 }); break; case "scrolling-landscape": if (n.storedWidth < f.tabletSize || t) if ($(window).width() >= f.tabletSize && $(".outer-container.mCustomScrollbar").length == 0) { var r = $("#images-wrapper").width(); $(".scrolling-landscape-layout .outer-container").mCustomScrollbar({ scrollInertia: 150, horizontalScroll: !0, child_width: r, autoDraggerLength: !1, advanced: { autoExpandHorizontalScroll: !0 } }) } break; case "carousel": if (n.storedWidth < f.tabletSize || t) if ($(window).width() >= f.tabletSize && $(".scrollable.mCustomScrollbar").length == 0) { var i = $(".scrollable"), s = i.width(), o = 25; $(".scrollable li").each(function (e) { var t = $(this).innerWidth() + 35; o += t }), i.mCustomScrollbar({ scrollInertia: 0, horizontalScroll: !0, child_width: o, container_width: s, autoDraggerLength: !0 }); var u = 0; $(".scrollable .selected").length && (u = $(".scrollable .selected").position().left - 75); var a = i.scrollLeft(); u + s <= o ? i.mCustomScrollbar("scrollTo", u) : i.mCustomScrollbar("scrollTo", o) } } }, prepareAudio: function (e) { function n(e) { e.trigger("pause"), e.prop("currentTime", 0) } if (!e) return !1; var t = this; t.$el.find(".audioItem").bind("ended", function () { $(this).siblings(".audioIcon").removeClass("playing") }), t.$el.find(".audioIcon").tappable(function (e) { e.preventDefault(), e.stopPropagation(), console.log("audio clicked"), $(this).removeClass("paused"); var t = $(this).siblings(".audioItem"); t.prop("currentTime") && !t.prop("ended") ? ($(this).removeClass("playing"), n(t)) : ($(this).addClass("playing"), t.trigger("play")) }) }, pageLinkEvent: function (e, t) { console.log("[show_article_view] pageLinkEvent"); var n = this; if (e.parents(".annotation").hasClass("hasCaption") && e.hasClass("label") || e.parents(".annotation").hasClass("hasCaption") && e.hasClass("point") && !Modernizr.csstransforms || e.parents(".annotation").hasClass("hasCaption") && e.hasClass("point") && $(".page-container").hasClass("fullscreen-layout")) return n.clickAnnotationEvent(e, !0), n.captionOpen(e), !1; var r = $(window).width(); if (r < f.tabletSize) return n.fadeTransition(e), !1; if (previewApplication || devApplication) return n.fadeTransition(e), !1; var i = 1, s = 1, o = 1, u = 1, a = 1, l = !1; if (t && e.attr("data-type") == "article") { var c = e.attr("data-id"), h = e.attr("data-pid"), p = n.$el.attr("data-layout"); if (p == "index" || p == "scrolling-portrait") p = "standard"; $(".page-container").hasClass("widescreen") && (p = "widescreen"); var d = articleData.where({ id: c }); d = JSON.parse(JSON.stringify(d[0])); var v = d.layout; v == "scrolling-portrait" && (v = "standard"), console.log("currentLayout is " + p + ", newLayout is " + v); if (p == v) { console.log("layout matches"); if (!d.images || !!d.field_animation) return n.fadeTransition(e), !1; $.each(d.images, function (e, t) { var n = JSON.parse(JSON.stringify(t)); if (n.publicID == h) return console.log("image found"), s = t.xPC, o = t.yPC, u = t.widthPC, a = t.heightPC, l = !0, !1 }), i = d.boundingBox.ratio } } return l ? (n.scaleTransition(i, e, s, o, u, a), !1) : (n.fadeTransition(e), !1) }, clickAnnotationEvent: function (e, t) { if (!t) return !1; e.parents(".annotation").hasClass("selected") || a.sendGoogleEvent("clickAnnotation", "Annotations", "Click", window.location.pathname + "-" + e.attr("aria-label")) }, findVideoImage: function () { var e; if (singleArticleDataRetrieved) { var t = singleArticleData.models[0].attributes; if (t.field_video && t.field_video.length > 0) { var n = t.images; _.each(n, function (t, n) { _.each(t, function (n, r) { n instanceof Array && _.each(n, function (n, r) { n.type === "Video" && (e = t.publicID) }) }) }) } } return e }, findGalleryImage: function () { var e = "", t = !1; if (singleArticleDataRetrieved) { var n = singleArticleData.models[0].attributes; return n.gallery && n.gallery.image.length > 0 && (_.each(n.gallery, function (n, r) { _.each(n, function (n, r) { n.primary === "1" && (e = n.publicID, t = !0) }) }), t === !1 && (e = n.gallery.image[0].publicID)), e } }, articleIconsSlide: function () { var e = this, t; e.$el.find(".full-screen-icons .icon").tappable(function (n) { n.preventDefault(), window.clearTimeout(t); if ($(".full-screen-icons").css("position") === "absolute" && $(".article-icons li").css("width") === "260px") { e.$el.find(".full-screen-icons .h3-wrapper").removeClass("slide"), e.$el.find(".full-screen-icons .navLink.active").removeClass("active"); var r = $(this).parent(), i = r.find(":nth-child(3)"); e.$el.find(i).addClass("slide"), e.$el.find(".full-screen-icons .navLink").addClass("active"), t = setTimeout(function () { e.$el.find(".full-screen-icons .h3-wrapper").removeClass("slide") }, 2e3) } }) }, render: function (e, t, n) { console.log(">>>>>render show_article_view for article: " + e + ", unit: " + t + ", subject: " + n); var r = this; r.type = a.getCurrentArticleType(); var i = $.Deferred(); return r.$el.html(r.partials.loading({})), r.$el.removeClass("hidden"), function s() { console.log("waitForData in show_article_view"); if ((previewApplication || devApplication) && t) { if (!singleArticleDataRetrieved) { setTimeout(s, 50); return } } else if (t) { if (!singleArticleDataRetrieved || !articleDataRetrieved || !unitDataRetrieved || !subjectDataRetrieved) { setTimeout(s, 50); return } } else if (!singleArticleDataRetrieved || !unitDataRetrieved || !subjectDataRetrieved) { setTimeout(s, 50); return } i.resolve() }(), i.done(function () { console.log("+++++ DATA IS LOADED FOR SHOW_ARTICLE_VIEW"); var i = "", s = "", o = "", u = "", l = "", c = "", h = ""; if (singleArticleData.length) { h = r.findGalleryImage(), c = r.findVideoImage(), singleArticleData.models[0] && (singleArticleData.models[0].set({ galleryImageId: h }), singleArticleData.models[0].set({ videoImageId: c })), o = JSON.parse(JSON.stringify(singleArticleData.models[0])); if (e && articleDataRetrieved) { var p = o.parent; p && (s = articleData.findWhere({ id: o.parent }), s && (s = JSON.parse(JSON.stringify(s)))) } quizDataRetrieved && quizData.models[0] && (l = quizData.models[0].attributes.image.publicID), quizIndexRetrieved && (u = quizIndex.findWhere({ unitFriendly: t }), u && (u.set({ imageId: l }), u = JSON.parse(JSON.stringify(u)))) } var d = ""; o.layout ? r.layout = o.layout : r.layout = "index", o.field_animation && (r.layout = "animation"), r.$el.attr("data-layout", r.layout).removeClass("widescreen"), o.boundingBox ? r.sizeBoundingBox(o.boundingBox.ratio, o.layout) : r.ratio = 1; var v = a.returnValueFromJSONObject("relatedExpand", f.staticMessaging, "name", "copy"); r.isArticleVisible = !0, a.updateMeta(o, !0, "article"); var m = f.storageDomain; m = "http://dkfindout.com", o.type = "article", a.setCurrentObject(o), f.dataReady.trigger("object"), r.$el.html(r.template({ object: o, subject: n, unit: t, article: e, hidden: r.hidden, scaling: r.scaling, boxWidth: r.boxWidth, boxHeight: r.boxHeight, parentArticle: s, objectType: r.type, quiz: u, relatedExpand: v, langCode: a.getLanguageCode(), storageDomain: m, imgLocation: f.imgLocation, imgCrop: f.imgThumbLimit, imgThumb: f.imgGalleryThumb, imgExt: f.imgExt, galleryImgThumb: f.imgGalleryThumbCrop })), setTimeout(function () { a.unlockScreen(), $("html, body").animate({ scrollTop: 0 }, "fast"), a.showCurrentView(r, ["header_view", "footer_view"]), !o.images && !o.field_animation && r.displayThumbs(), r.displayCarousel(r.type), o.boundingBox && (r.ratio = o.boundingBox.ratio, r.sizeBoundingBox(r.ratio, r.layout, !0)), r.$el.find(".page-container.hidden").fadeIn("slow", function () { console.log("fade in page"), r.$el.find(".page-container").removeClass("hidden") }), r.hidden && $("#footer_view").fadeIn("slow"), r.$el.find(".page-container").hasClass("scaling") && (console.log("fade in elements after scale"), r.$el.find(".intro-container").animate({ opacity: 1 }, 500), r.$el.find(".annotation").animate({ opacity: 1 }, 500), r.$el.find(".boxes").animate({ opacity: 1 }, 500), r.$el.find(".article-carousel").animate({ opacity: 1 }, 500), $("#footer_view").fadeIn(500), r.$el.find("#images-wrapper .image").not(".scaleImage").animate({ opacity: 1 }, 500, function () { r.$el.find(".page-container").removeClass("scaling") })), r.hidden = !0, r.scaling = !1, r.$el.find(".inner-container .pageLink").tappable(function (e) { e.preventDefault(), e.stopPropagation(), r.pageLinkEvent($(this), t) }), r.$el.find(".intro-container a").tappable(function (e) { e.preventDefault(), r.fadeTransition($(this)) }), r.$el.find(".article-icons a .active").tappable(function (e) { e.preventDefault(), r.fadeTransition($(this)) }), r.articleIconsSlide(), r.$el.find(".hasCaption .openCaption").tappable(function (e) { e.preventDefault(), e.stopPropagation(), console.log("annotation clicked"); if ($(this).hasClass("pageLink")) return !1; var t = $(this); return r.clickAnnotationEvent(t, !0), $(this).hasClass("audioCaption") && (t = $(this).parent(".label")), r.captionOpen(t), !1 }), r.$el.find(".readMore").tappable(function (e) { e.preventDefault(); var t = $(this).parents(".intro-container"), n = a.returnValueFromJSONObject("introExpand", f.staticMessaging, "name", "copy"), r = a.returnValueFromJSONObject("introClose", f.staticMessaging, "name", "copy"); t.hasClass("reveal") ? $(".intro-container p:nth-child(n+3)").slideUp("fast", function () { t.removeClass("reveal"), $(".readMore").html(n) }) : $(".intro-container p:nth-child(n+3)").slideDown("fast", function () { t.addClass("reveal"), $(".readMore").html(r) }) }), r.$el.find(".relatedBtn").tappable(function (e) { e.preventDefault(); var t = $(this).parents(".intro-container"), n = a.returnValueFromJSONObject("relatedExpand", f.staticMessaging, "name", "copy"), r = a.returnValueFromJSONObject("relatedClose", f.staticMessaging, "name", "copy"); t.hasClass("reveal") ? $(".related").slideUp("fast", function () { t.removeClass("reveal"), $(".relatedBtn").html(n) }) : $(".related").slideDown("fast", function () { t.addClass("reveal"), $(".relatedBtn").html(r) }) }), r.$el.find(".intro-toggle").tappable(function (e) { e.preventDefault(), r.switchWideScreen() }), r.$el.find(".expandBtn").tappable(function (e) { e.preventDefault(), r.toggleText() }), r.$el.find(".openTab").tappable(function (e) { e.preventDefault(); var t = $(this).parents(".breadcrumb"), n = $(this).siblings(".links"), r = "-145%"; t.hasClass("open") ? t.removeClass("open") : t.addClass("open") }), r.$el.find(".summaryCursor").tappable(function (e) { e.preventDefault(), e.stopPropagation(), console.log("cursor button clicked"); var t = $(this).parents(".thumb"), n = t.find(".summary"); t.hasClass("open") ? n.slideUp("fast").animate({ opacity: 0 }, { duration: "fast", queue: !1, complete: function () { t.removeClass("open"), r.sizeBoundingBox(null, null, !0) } }) : (r.$el.find(".thumb.open .summary").slideUp("fast").animate({ opacity: 0 }, { duration: "fast", queue: !1, complete: function () { r.$el.find(".thumb.open").removeClass("open") } }), n.slideDown("fast").animate({ opacity: 1 }, { duration: "fast", queue: !1, complete: function () { t.addClass("open"), r.sizeBoundingBox(null, null, !0) } })) }), r.$el.find(".galleryOpen").tappable(function (e) { return e.preventDefault(), console.log(">>>>>>> open gallery"), r.fadeTransition($(this)), !1 }), r.$el.find(".carousel-close").tappable(function (e) { e.preventDefault(), console.log("carousel toggle clicked"); var t = $(this).parents(".article-carousel"); return t.hasClass("closed") ? t.removeClass("closed") : t.addClass("closed"), !1 }), r.$el.find(".box h3").tappable(function (e) { console.log("component box clicked"); var t = $(window).width(); if (r.layout !== "scrolling-landscape" && t >= f.tabletSize || r.layout == "scrolling-landscape" && t < f.desktopSize && t >= f.tabletSize) return !1; var n = $(this).parents(".box"), i = $(this).siblings(".box-content"); n.hasClass("open") ? i.slideUp("fast", function () { n.removeClass("open") }) : i.slideDown("fast", function () { n.addClass("open"), r.layout == "scrolling-landscape" && $(window).width() >= f.desktopSize && $("html, body").animate({ scrollTop: n.offset().top }, "slow") }) }), $(window).on("resize", _.debounce(r.resizeEvent, 250)), r.resizeEvent(), $(window).on("scroll", _.debounce(r.scrollEvent, 250)), r.scrollEvent(), r.captionPosition($(".bookmarked .label")), r.captionTransition("reveal", $(".bookmarked .caption"), $(".bookmarked")), r.styleScrollbar(r.layout, !0), r.$el.find(".page-container").hammer({ drag_lock_to_axis: !0, swipe_velocity: 1 }).on("swipe drag", function (e) { return (e.gesture.direction == Hammer.DIRECTION_UP || e.gesture.direction == Hammer.DIRECTION_DOWN) && e.gesture.stopDetect(), e.gesture.direction == Hammer.DIRECTION_LEFT && e.type == "swipe" && (e.gesture.preventDefault(), $(".article-nav .next").length !== 0 && r.fadeTransition($(".article-nav .next"))), e.gesture.direction == Hammer.DIRECTION_RIGHT && e.type == "swipe" && (e.gesture.preventDefault(), $(".article-nav .previous").length !== 0 && r.fadeTransition($(".article-nav .previous"))), !1 }), r.$el.find("#annotations-wrapper").tappable(function (e) { e.preventDefault(), e.stopPropagation(), console.log("clicked outside caption, so close"); var t = f.tabletSize; return $(".annotation.hasCaption.selected") && $(window).width() >= t && r.captionTransition("hide", $(".caption"), $(".annotation")), !1 }), r.$el.find("#images-wrapper").tappable(function (e) { e.preventDefault(), e.stopPropagation(), console.log("clicked outside caption, so close"); var t = f.tabletSize; return $(".annotation.hasCaption.selected") && $(window).width() >= t && r.captionTransition("hide", $(".caption"), $(".annotation")), !1 }), r.prepareAudio(r.$el.find(".annotation .audioIcon").length), $("#header_view").focus() }, 0) }), this } }) }), require.register("views/teachers_view", function (e, t, n) { var r = t("./view"), s = t("./templates/teachers"), o = t("../lib/utilities"), u = t("../lib/constants"), a = t("../application"); n.exports = r.extend({ id: "teachers_view", template: s, className: "view", data: "", initialize: function () { console.log("initialize teachers homepage"), _.bindAll(this), this.render = _.bind(this.render, this), u.dataReady.on("lessonPlanHeaderData", this.dataLoaded) }, dataLoaded: function () { console.log("+++ TEACHERS PAGE VIEW dataLoaded: has been triggered"); var e = this; if ($("#teachers_view").hasClass("hidden") || $("#teachers_view").length < 1) return console.log("TEACHERS VIEW dataLoaded: don't do anything"), !0; this.render() }, updateUserProfile: function (e) { var t = { uid: e.UID }; e.profile.username && (t.name = e.profile.username, t.friendlyName = e.profile.username), e.profile.photoURL && ($("html").hasClass("no-backgroundsize") ? (t.thumbnail = e.profile.thumbnailURL, t["thumbnail-class"] = "small-image") : t.thumbnail = e.profile.photoURL, e.profile.photoURL.indexOf("media.licdn.com") > -1 && (t["thumbnail-class"] = "linkedin")); var n = [e.profile.country, e.profile.state, e.profile.city], r; for (i = 0; i < n.length; i++) n[i] && (r ? r = r + ", " + n[i] : r = n[i]); t.location = r, o.setUserProfile(t), a.router.loadLessonPlanHeadersData(), a.router.loadLessonPlanContentData(), u.loginStatus.trigger("login"), this.render() }, loginEventHandler: function (e) { var t = this; gigya.accounts.getAccountInfo({ extraProfileFields: "username", callback: function (n) { var r, i = "", s = o.getLanguageCode(); n && n.errorCode && n.errorCode === 403007 && (_.extend(n, e), e.newUser && e.newUser === !0 && (n.registeredTimestamp = Date.now())), t.updateUserProfile(n); if (n.registeredTimestamp > Date.now() - 3e5) { n.data.countryCode && (r = n.data.countryCode); if (n && n.data && n.data.subscribe === !0) { n.data.terms && n.data.terms === !0 && (i = "Over 18"); switch (r) { case "US": formData = { _account_id: "1294", _table_id: "1", _rp: "http://www.dk.com/us1/findout/thankyou.html", _static_update: "1", _dedupe: "1", _email_field: "1.email", "1.tag": "DKFindOut.com/" + s, _list_id: "79", "1.lastaction": o.adestraDateString(), "1.first_name": n.profile.firstName, "1.last_name": n.profile.lastName, "1.email": n.profile.email, "1.country": r, "1.company": "Teacher", "1.age": i }; break; default: formData = { _account_id: "1130", _table_id: "3", _rp: "http://www.dk.com/uk1/findout/thankyou.html", _static_update: "1", _dedupe: "1", _email_field: "3.email", "3.tag": "DKFindOut.com/" + s, _list_id: "1041", "3.lastaction": o.adestraDateString(), "3.first_name": n.profile.firstName, "3.last_name": n.profile.lastName, "3.email": n.profile.email, "3.country": r, "3.company": "Teacher", "3.age": i } } o.post(u.adestraLocation, formData) } if (!n.errorCode && n.errorCode !== 403007) { switch (r) { case "US": secondStageRegistration = u.secondStageRegistrationUS, secondStageRegistrationMobile = u.secondStageRegistrationMobileUS; break; default: secondStageRegistration = u.secondStageRegistration, secondStageRegistrationMobile = u.secondStageRegistrationMobile } gigya.accounts.showScreenSet({ screenSet: secondStageRegistration, mobileScreenSet: secondStageRegistrationMobile, onAfterSubmit: function () { gigya.accounts.getAccountInfo({ extraProfileFields: "username", callback: function (e) { t.updateUserProfile(e) } }) } }) } } } }) }, logoutEventHandler: function (e) { var t = this; o.setUserProfile(""), lessonPlanHeadersData.reset(), lessonPlanContentData.reset(), lessonPlanHeadersDataRetrieved = !1, lessonPlanContentDataRetrieved = !1, o.setPlanningMode(!1), o.setPlayMode(!1), u.loginStatus.trigger("logout"), t.render() }, renderShareButtons: function () { var e = this, t = e.data; if (typeof gigya != "undefined") { var n = new gigya.socialize.UserAction; n.setLinkBack(document.URL), n.setTitle(t.socialShareTitle), n.setDescription(t.socialShareDescription), n.addActionLink("Read More", document.URL); var r = "FindOut!_logo_June2014", i = { src: u.imgLocation + u.imgFacebook + r + u.imgExt, href: document.URL, type: "image" }; n.addMediaItem(i); var s = [{ provider: "Facebook", iconImgUp: u.imgLocation + u.imgShare + "icons/assets_facebook-iconx3" + u.imgExt }, { provider: "Twitter", iconImgUp: u.imgLocation + u.imgShare + "icons/assets_twitter-iconx3" + u.imgExt }, { provider: "Googleplus", iconImgUp: u.imgLocation + u.imgShare + "icons/assets_gplus-iconx3" + u.imgExt }, { provider: "LinkedIn", iconImgUp: u.imgLocation + u.imgShare + "icons/assets_linkedin-iconx3" + u.imgExt }, { provider: "Email", iconImgUp: u.imgLocation + u.imgShare + "icons/assets_mail-iconx3" + u.imgExt }], o = { userAction: n, shareButtons: "facebook-like,twitter-tweet,google-plusone,LinkedIn,Email", containerID: "social-share-buttons", cid: "", iconsOnly: "true", showCounts: "none", shareButtons: s, operationMode: "simpleShare", deviceType: "auto" }; gigya.socialize.showShareBarUI(o) } }, updateComponentCarousel: function (e, t) { var n = $(".component." + t + " .comp-slide.selected"), r = $(".component." + t + ' .comp-slide[data-index="' + e + '"]'); n.addClass("hiding").delay(600).queue(function (e) { $(this).addClass("hidden").removeClass("hiding selected"), e() }), r.addClass("reveal").delay(600).queue(function (e) { $(this).addClass("selected").removeClass("reveal hidden"), $(this).children(".slide-link").focus(), e() }) }, render: function () { console.log("render teachers homepage"); var e = this, t = $.Deferred(); return e.$el.html("loading..."), function n() { console.log("waitForData in teachers_view"); if (!landingPageDataRetrieved) { setTimeout(n, 50); return } t.resolve() }(), t.done(function () { console.log("+++++ DATA IS LOADED FOR TEACHERS_VIEW"); var t = JSON.parse(JSON.stringify(lessonPlanHeadersData)); console.log("lessons: " + t); var n = JSON.parse(JSON.stringify(landingPageData.models[0])); e.data = n; var r = ""; langDir && (r = "/" + o.getLanguageCode() + "/"), o.updateMeta(n, !0, "teachers"), e.$el.html(e.template({ user: JSON.parse(o.getUserProfile()), imgLocation: u.imgLocation, imgCrop: u.imgPlanThumb, langCode: r, lessons: t, object: n, imgGrid: u.imgGrid })), console.log("lessons: " + t), setTimeout(function () { o.unlockScreen(), $("html, body").animate({ scrollTop: 0 }, 1), o.showCurrentView(e, ["header_view", "footer_view"]), e.$el.find(".pageLink").tappable(function (t) { return t.preventDefault(), o.navigateRemoveView($(this), e, !0), !1 }), typeof gigya != "undefined" && (e.renderShareButtons(), e.$el.find(".showLoginScreen").tappable(function (t) { t.preventDefault(), console.log("login pressed ..."); var n, r; switch (o.getLanguageCode()) { case "us": n = u.loginDesktopUS, r = u.loginMobileUS; break; default: n = u.loginDesktopUK, r = u.loginMobileUK } gigya.accounts.showScreenSet({ screenSet: n, mobileScreenSet: r }), gigya.accounts.addEventHandlers({ onLogin: e.loginEventHandler }) }), e.$el.find(".showRegisterScreen").tappable(function (t) { t.preventDefault(), console.log("sign up pressed ..."); var n, r; switch (o.getLanguageCode()) { case "us": n = u.loginDesktopUS, r = u.loginMobileUS; break; default: n = u.loginDesktopUK, r = u.loginMobileUK } gigya.accounts.showScreenSet({ screenSet: n, mobileScreenSet: r, startScreen: u.registrationScreen }), gigya.accounts.addEventHandlers({ onLogin: e.loginEventHandler }) }), e.$el.find(".btnLogout").tappable(function (t) { return t.preventDefault(), console.log("logout pressed ..."), typeof gigya != "undefined" && gigya.accounts.logout({ callback: e.logoutEventHandler }), o.setUserProfile(""), e.render(), !1 })), e.$el.find(".navBtn").unbind().bind().tappable(function (t) { var n = $(this).parents(".component").attr("data-component"), r = $(".component." + n + " .comp-slide.selected").attr("data-index"), i = $(this).parents(".component").find(".comp-slide").length, s = e.nextSlide(r, i); console.log("component carousel button clicked, current is " + r + ", length is " + i), $(this).hasClass("prev") && (s = e.previousSlide(r, i)), e.updateComponentCarousel(s, n) }), e.$el.find(".newLesson").unbind("click").bind("click", function (e) { e.preventDefault(), e.stopPropagation(), console.log("new lesson pressed ..."); var t = o.addNewLessonPlan(), n = t.content_id; a.router.navigate(r + "lesson-plan/" + n + "/", !0) }), e.$el.find(".settingsBtn, .image-overlay").unbind("click").bind("click", function (e) { return console.log(".settingsBtn tapped"), e.preventDefault(), e.stopPropagation(), $(this).parents(".lesson-plan").find(".optionsBtns, .image-overlay").toggleClass("hidden"), !1 }), e.$el.find(".deleteBtn").unbind("click").bind("click", function (e) { var t = $(this).parents(".lesson-plan").attr("data-id"); return e.preventDefault(), e.stopPropagation(), a.router.dialog("delete-lesson-plan", t), !1 }), e.$el.find(".duplicateBtn").unbind("click").bind("click", function (e) { var t = $(this).parents(".lesson-plan").attr("data-id"), n = o.returnValueFromJSONObject("copyingMessage", u.staticMessaging, "name", "copy"); return e.preventDefault(), e.stopPropagation(), console.log("duplicate lesson tapped..."), $(this).text(n), setTimeout(function () { o.duplicateLessonPlan(t), u.dataReady.trigger("lessonPlanHeaderData") }, 50), !1 }), $(".comp-slide:first-child").addClass("selected"), $("#header_view").focus() }, 0) }), this } }) }), require.register("views/templates/business_page", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function v(e, t, r) { var i = "", s, o; i += '\n    <header class="header" role="heading" tabindex="0">\n        <h1>', a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.title", { hash: {} })), i += d(s) + '</h1>\n    </header>\n    <div class="content" role="main" tabindex="0" ', a = n.contactUs, s = a || r.contactUs, o = n["if"], f = l.program(2, m, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += ">", a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.intro, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.intro", { hash: {} })); if (s || s === 0) i += s; return i += "</div>\n", i } function m(e, t) { return 'itemscope itemtype="http://schema.org/Organization"' } function g(e, t) { return '\n    <div class="loadingGif hidden">\n        <img src="/images/ajax-loader.gif" border="0" alt="Loading..." />\n    </div>\n' } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression; a = n.object, o = a || t.object, u = n["if"], f = l.programWithDepth(v, i, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += "\n", a = n.object, o = a || t.object, u = n.unless, f = l.program(4, g, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s }) }), require.register("views/templates/dialog", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function m(e, t, r) { var i = "", s, o; i += '\n    <div class="dialog-options">\n        ', a = n.message, s = a || e.message, s = s === null || s === undefined || s === !1 ? s : s.buttons, a = n.eachWithIndex, o = a || e.eachWithIndex, f = l.programWithDepth(g, t, r), f.hash = {}, f.fn = f, f.inverse = l.noop, a && typeof o === c ? s = o.call(e, s, f) : s = v.call(e, o, s, f); if (s || s === 0) i += s; i += "\n        ", a = n.message, s = a || e.message, s = s === null || s === undefined || s === !1 ? s : s.footer, o = n["if"], f = l.program(5, b, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; return i += "\n    </div>\n    ", i } function g(e, t, r) { var i = "", s, o; i += '\n        <a class="option-', a = n.index, s = a || e.index, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "index", { hash: {} })), i += d(s) + ' button" data-type="', s = e.type, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "this.type", { hash: {} })), i += d(s) + '" data-id="', a = n.id, s = a || r.id, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "......id", { hash: {} })), i += d(s) + '" href="', s = e.url, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "this.url", { hash: {} })), i += d(s) + '" ', s = e.onclick, o = n["if"], f = l.program(3, y, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += ">", s = e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "this.title", { hash: {} })); if (s || s === 0) i += s; return i += "</a>\n        ", i } function y(e, t) { var n = "", r; n += 'onclick="', r = e.onclick, typeof r === c ? r = r.call(e, { hash: {} }) : r === p && (r = h.call(e, "this.onclick", { hash: {} })); if (r || r === 0) n += r; return n += '"', n } function b(e, t) { var r = "", i; r += '<div class="dialog-footer">', a = n.message, i = a || e.message, i = i === null || i === undefined || i === !1 ? i : i.footer, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "message.footer", { hash: {} })); if (i || i === 0) r += i; return r += "</div>", r } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression, v = n.blockHelperMissing; s += '<!-- view for the dialog -->\n\n<div class="click-overlay closeDialog"></div>\n<div id="dialog-wrapper" class="', a = n.message, o = a || t.message, o = o === null || o === undefined || o === !1 ? o : o.name, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "message.name", { hash: {} })), s += d(o) + '">\n    <!-- <button class="dialog-close closeDialog">Close</button> -->\n    <h2>', a = n.message, o = a || t.message, o = o === null || o === undefined || o === !1 ? o : o.title, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "message.title", { hash: {} })), s += d(o) + "</h2>\n    <p>", a = n.message, o = a || t.message, o = o === null || o === undefined || o === !1 ? o : o.description, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "message.description", { hash: {} })); if (o || o === 0) s += o; s += "</p>\n    \n    ", a = n.message, o = a || t.message, o = o === null || o === undefined || o === !1 ? o : o.buttons, u = n["if"], f = l.programWithDepth(m, i, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s += "\n</div>\n", s }) }), require.register("views/templates/discover", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function v(e, t) { var r = "", i; return r += '\n            <li><a href="/', a = n.url, i = a || e.url, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "url", { hash: {} })), r += d(i) + '" class="menuLink">', a = n.name, i = a || e.name, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "name", { hash: {} })), r += d(i) + "</a></li>\n            ", r } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression; s += '<header>\n    <h1>Discover</h1>\n    <button class="close">Close</button>\n</header>\n', a = n.searchForm, o = a || t.searchForm, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "searchForm", { hash: {} })); if (o || o === 0) s += o; s += '\n<div class="discover-wrapper">\n    <!--<div id="menu-links">\n        <ul>', a = n.links, o = a || t.links, u = n.each, f = l.program(1, v, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += "\n        </ul>\n    </div>-->\n    ", a = n.listRow, o = a || t.listRow, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "listRow", { hash: {} })); if (o || o === 0) s += o; return s += '\n</div>\n<div class="clear"></div>\n', s }) }), require.register("views/templates/explore_article", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function m(e, t) { var r = "", i, s; r += "\n", a = n.exploreArticleData, i = a || e.exploreArticleData, s = n["with"], f = l.programWithDepth(g, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; return r += "\n", r } function g(e, t, r) { var i = "", s, o; i += '\n  <header class="page-header">\n    <a class="explore-landing pageLink" href="/', a = n.langCode, s = a || e.langCode, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "langCode", { hash: {} })), i += d(s) + '/explore/"><h1><img class="logo" src="/images/logo.png" alt="logo"><div class="hide">DKfindout!</div>Explore</h1></a>\n    <a class="all-posts-header-link pageLink" href="/', a = n.langCode, s = a || e.langCode, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "langCode", { hash: {} })), i += d(s) + '/explore/">See all Explore posts &gt;&gt;</a>\n  </header>\n\n  <article class="page-wrap">\n    \n    <header class="article-header" role="heading">\n      <h2>', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + '</h2>\n      <div class="author-date" tabindex="0">\n        <span class="author">By ', a = n.author, s = a || e.author, o = n.each, f = l.program(3, y, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += '\n        </span>\n        <span class="date">', a = n.published_date, s = a || e.published_date, a = n.displayDate, o = a || e.displayDate, typeof o === c ? s = o.call(e, s, { hash: {} }) : o === p ? s = h.call(e, "displayDate", s, { hash: {} }) : s = o, i += d(s) + '</span>\n      </div>\n    </header>\n\n    <div class="intro-summary">\n      ', a = n.introSummary, s = a || e.introSummary, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "introSummary", { hash: {} })); if (s || s === 0) i += s; i += '\n    </div>\n\n    <div class="image-and-text">\n      ', i += '\n      <div class="article-image ', a = n.content_block_titles, s = a || e.content_block_titles, o = n["if"], f = l.program(5, b, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += '">\n        <img src="', a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgLocation", { hash: {} })), i += d(s), a = n.imgDesktop, s = a || r.imgDesktop, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgDesktop", { hash: {} })), i += d(s), a = n.image, s = a || e.image, s = s === null || s === undefined || s === !1 ? s : s.publicID, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "image.publicID", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgExt", { hash: {} })), i += d(s) + '" alt="', a = n.image, s = a || e.image, s = s === null || s === undefined || s === !1 ? s : s.alt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "image.alt", { hash: {} })), i += d(s) + '">\n      </div>\n      \n      <div class="main-content" role="main" tabindex="0">\n        \n        <div class="intro">\n          ', a = n.intro, s = a || e.intro, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "intro", { hash: {} })); if (s || s === 0) i += s; i += "\n        </div>\n\n        ", a = n.field_content_block, s = a || e.field_content_block, o = n["if"], f = l.programWithDepth(E, t, r), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += "\n\n        ", a = n.findoutmore, s = a || e.findoutmore, o = n["if"], f = l.program(14, N, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; return i += "\n      </div> ", i += "\n    </div>\n  \n  </article> ", i += "\n", i } function y(e, t) { var r = "", i; return a = n.name, i = a || e.name, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "name", { hash: {} })), r += d(i) + " ", r } function b(e, t) { var r, i; return a = n.show_main_image, r = a || e.show_main_image, i = n.unless, f = l.program(6, w, t), f.hash = {}, f.fn = f, f.inverse = l.noop, r = i.call(e, r, f), r || r === 0 ? r : "" } function w(e, t) { return "hidden" } function E(e, t, r) { var i = "", s, o; i += "\n          ", a = n.field_content_block, s = a || e.field_content_block, a = n.eachWithIndexPlusOne, o = a || e.eachWithIndexPlusOne, f = l.programWithDepth(S, t, e, r), f.hash = {}, f.fn = f, f.inverse = l.noop, a && typeof o === c ? s = o.call(e, s, f) : s = v.call(e, o, s, f); if (s || s === 0) i += s; return i += "\n        ", i } function S(e, t, r, i) { var s = "", o, u; s += '\n            <div class="content-block">\n              <h3 class="', a = n.content_block_titles, o = a || r.content_block_titles, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "...content_block_titles", { hash: {} })), s += d(o) + '">', a = n.numberedContentBlockTitles, o = a || i.numberedContentBlockTitles, u = n["if"], f = l.program(10, x, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; a = n.title, o = a || e.title, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "title", { hash: {} })), s += d(o) + "</h3>\n              ", a = n.body, o = a || e.body, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "body", { hash: {} })); if (o || o === 0) s += o; s += "\n              ", a = n.image, o = a || e.image, u = n.each, f = l.programWithDepth(T, t, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; return s += "\n            </div>\n          ", s } function x(e, t) { var r = "", i; return r += '<span class="index">', a = n.index, i = a || e.index, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "index", { hash: {} })), r += d(i) + "</span> ", r } function T(e, t, r) { var i = "", s; return i += '\n                <div class="content-image">\n                  <img src="', a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "............imgLocation", { hash: {} })), i += d(s), a = n.imgExplore, s = a || r.imgExplore, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "............imgExplore", { hash: {} })), i += d(s), a = n.publicID, s = a || e.publicID, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "publicID", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "............imgExt", { hash: {} })), i += d(s) + '" alt="', a = n.alt, s = a || e.alt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "alt", { hash: {} })), i += d(s) + '">\n                </div>\n              ', i } function N(e, t) { var r = "", i, s; r += '\n          <ul class="findoutmore-links">\n          ', a = n.findoutmore, i = a || e.findoutmore, s = n.each, f = l.program(15, C, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; return r += "\n          </ul>\n        ", r } function C(e, t) { var r = "", i; return r += '\n            <li ><a class="pageLink" href="', a = n.url, i = a || e.url, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "url", { hash: {} })), r += d(i) + '">', a = n.title, i = a || e.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "title", { hash: {} })), r += d(i) + " &gt;&gt;</a></li>\n          ", r } function k(e, t) { return '\n  <div class="loadingGif hidden">\n    <img src="/images/ajax-loader.gif" border="0" alt="Loading..." />\n  </div>\n' } function L(e, t) { var r = "", i; r += '\n  <a class="previous-article-link article-title pageLink" href="/', a = n.nextArticle, i = a || e.nextArticle, i = i === null || i === undefined || i === !1 ? i : i.langCode, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "nextArticle.langCode", { hash: {} })), r += d(i) + "/explore/", a = n.nextArticle, i = a || e.nextArticle, i = i === null || i === undefined || i === !1 ? i : i.url, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "nextArticle.url", { hash: {} })), r += d(i) + '/">&lt;&lt; ', a = n.nextArticle, i = a || e.nextArticle, i = i === null || i === undefined || i === !1 ? i : i.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "nextArticle.title", { hash: {} })); if (i || i === 0) r += i; return r += '</a>\n  <a class="previous-article-link all-posts pageLink" href="/uk/explore/">&lt;&lt; All Explore Posts</a>\n', r } function A(e, t) { var r = "", i; r += '\n  <a class="next-article-link article-title pageLink" href="/', a = n.previousArticle, i = a || e.previousArticle, i = i === null || i === undefined || i === !1 ? i : i.langCode, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "previousArticle.langCode", { hash: {} })), r += d(i) + "/explore/", a = n.previousArticle, i = a || e.previousArticle, i = i === null || i === undefined || i === !1 ? i : i.url, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "previousArticle.url", { hash: {} })), r += d(i) + '/"> \n    <span class="truncate">', a = n.previousArticle, i = a || e.previousArticle, i = i === null || i === undefined || i === !1 ? i : i.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "previousArticle.title", { hash: {} })); if (i || i === 0) r += i; return r += '</span><span> &gt;&gt;</span>\n  </a>\n  <a class="next-article-link next-article pageLink" href="/', a = n.previousArticle, i = a || e.previousArticle, i = i === null || i === undefined || i === !1 ? i : i.langCode, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "previousArticle.langCode", { hash: {} })), r += d(i) + "/explore/", a = n.previousArticle, i = a || e.previousArticle, i = i === null || i === undefined || i === !1 ? i : i.url, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "previousArticle.url", { hash: {} })), r += d(i) + '/"> \n    Next Article<span> &gt;&gt;</span>\n  </a>\n\n', r } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression, v = n.blockHelperMissing; a = n.exploreArticleData, o = a || t.exploreArticleData, u = n["if"], f = l.program(1, m, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += "\n\n", a = n.exploreArticleData, o = a || t.exploreArticleData, u = n.unless, f = l.program(17, k, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += "\n\n<footer>\n", a = n.nextArticle, o = a || t.nextArticle, u = n["if"], f = l.program(19, L, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += "\n", a = n.previousArticle, o = a || t.previousArticle, u = n["if"], f = l.program(21, A, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s += "\n</footer>", s }) }), require.register("views/templates/explore_landing", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function v(e, t) { var r = "", i, s; r += '\n  <header class="page-header">\n    <h1><img class="logo" src="/images/logo.png" alt="logo"><span class="hide">DKfindout!</span>Explore</h1>\n  </header>\n  <div class="page-wrap">\n  ', a = n.object, i = a || e.object, s = n.each, f = l.program(2, m, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; return r += "\n", r } function m(e, t) { var r = "", i, s; r += '\n    <article>\n      <header class="article-header" role="heading">\n        <h2 class="article-title"><a class="read-more-link page-link" href="/', a = n.langCode, i = a || e.langCode, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "langCode", { hash: {} })), r += d(i) + "/explore/", a = n.titleFriendly, i = a || e.titleFriendly, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "titleFriendly", { hash: {} })), r += d(i) + '/">', a = n.title, i = a || e.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "title", { hash: {} })), r += d(i) + '</a></h2>\n      </header>\n      <div class="article-image">\n        <a class="read-more-link page-link" href="/', a = n.langCode, i = a || e.langCode, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "langCode", { hash: {} })), r += d(i) + "/explore/", a = n.titleFriendly, i = a || e.titleFriendly, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "titleFriendly", { hash: {} })), r += d(i) + '/"><img src="http://res.cloudinary.com/dk-find-out/image/upload/q_80,w_1440/', a = n.image, i = a || e.image, i = i === null || i === undefined || i === !1 ? i : i.publicID, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "image.publicID", { hash: {} })), r += d(i) + '.jpg" alt="', a = n.title, i = a || e.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "title", { hash: {} })), r += d(i) + '"></a>\n      </div>\n      <div class="intro-and-link">\n        <div class="intro" role="main" tabindex="0">', i = e, a = n.formatExploreIntro, s = a || e.formatExploreIntro, typeof s === c ? i = s.call(e, i, { hash: {} }) : s === p ? i = h.call(e, "formatExploreIntro", i, { hash: {} }) : i = s; if (i || i === 0) r += i; r += '</div>\n        <div class="link"><ul>', i = e, a = n.readMoreOrRelated, s = a || e.readMoreOrRelated, typeof s === c ? i = s.call(e, i, { hash: {} }) : s === p ? i = h.call(e, "readMoreOrRelated", i, { hash: {} }) : i = s; if (i || i === 0) r += i; r += '</ul></div>\n      </div>\n      <div class="clear-fix"></div>\n      <div class="author-date" tabindex="0">By ', a = n.author, i = a || e.author, s = n.each, f = l.program(3, g, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; return r += "| ", a = n.published_date, i = a || e.published_date, a = n.displayDate, s = a || e.displayDate, typeof s === c ? i = s.call(e, i, { hash: {} }) : s === p ? i = h.call(e, "displayDate", i, { hash: {} }) : i = s, r += d(i) + "</div>\n    </article>\n  ", r } function g(e, t) { var r = "", i; return a = n.name, i = a || e.name, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "name", { hash: {} })), r += d(i) + " ", r } function y(e, t) { return '\n    <div class="loadingGif hidden">\n      <img src="/images/ajax-loader.gif" border="0" alt="Loading..." />\n    </div>\n  ' } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression; a = n.object, o = a || t.object, u = n["if"], f = l.program(1, v, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '\n<div class="link see-older-posts-link">\n  ', s += "\n", s += "      </div>\n  ", a = n.object, o = a || t.object, u = n.unless, f = l.program(5, y, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s += "\n</div> ", s }) }), require.register("views/templates/footer", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function v(e, t, r) { var i = "", s; return i += '\n            <li><a href="', a = n.langCode, s = a || r.langCode, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...langCode", { hash: {} })), i += d(s), a = n.titleFriendly, s = a || e.titleFriendly, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "titleFriendly", { hash: {} })), i += d(s) + '/" class="pageLink">', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + "</a></li>\n          ", i } function m(e, t) { var r = "", i; return r += '\n            <li><a href="', a = n.aboutDK, i = a || e.aboutDK, i = i === null || i === undefined || i === !1 ? i : i.url, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "aboutDK.url", { hash: {} })), r += d(i) + '" target="_blank">', a = n.aboutDK, i = a || e.aboutDK, i = i === null || i === undefined || i === !1 ? i : i.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "aboutDK.title", { hash: {} })), r += d(i) + "</a></li>\n          ", r } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression; s += '<div class="footer-inner">\n    <div id="strapLogo"><img role="presentation" tabindex="-1" src="/images/dklogo-strap.png" alt="DK - A World of ideas: See all there is to know" border="0" /></div>\n    <div id="footer-links">\n        <ul>\n          ', a = n.objects, o = a || t.objects, u = n.each, f = l.programWithDepth(v, i, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += "\n          ", a = n.aboutDK, o = a || t.aboutDK, u = n["if"], f = l.program(3, m, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '\n          <li><a href="', a = n.DKImages, o = a || t.DKImages, o = o === null || o === undefined || o === !1 ? o : o.url, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "DKImages.url", { hash: {} })), s += d(o) + '" target="_blank">', a = n.DKImages, o = a || t.DKImages, o = o === null || o === undefined || o === !1 ? o : o.title, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "DKImages.title", { hash: {} })), s += d(o) + '</a></li>\n          <li><button class="selectLanguage"><img class="flag" role="presentation" tabindex="-1" src="/images/', a = n.language, o = a || t.language, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "language", { hash: {} })), s += d(o) + '.png" alt="', a = n.language, o = a || t.language, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "language", { hash: {} })), s += d(o) + '" />Change Language</button></li></ul>\n    </div>\n    <div class="clear"></div>\n    <a class="safeSeal" href="http://www.kidsafeseal.com/certifiedproducts/dkfindout.html" target="_blank"><img border="0" alt="DK Find Out! is certified by the kidSAFE Seal Program." src="http://www.kidsafeseal.com/sealimage/18894683574871728/dkfindout_small_darktm.png"></a>\n    <div id="copyright">\n        ', a = n.copyright, o = a || t.copyright, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "copyright", { hash: {} })); if (o || o === 0) s += o; return s += "\n    </div>\n</div>", s }) }), require.register("views/templates/gallery", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function m(e, t) { var r = "", i, s; r += '\n<div class="gallery-inner hidden">\n    <header class="header">\n        <h1>', a = n.objects, i = a || e.objects, i = i === null || i === undefined || i === !1 ? i : i.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "objects.title", { hash: {} })), r += d(i) + '</h1>\n    </header>\n    <div id="carousel">\n        <div id="carousel-inner">\n            ', a = n.objects, i = a || e.objects, i = i === null || i === undefined || i === !1 ? i : i.image, a = n.eachWithIndex, s = a || e.eachWithIndex, f = l.programWithDepth(g, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, a && typeof s === c ? i = s.call(e, i, f) : i = v.call(e, s, i, f); if (i || i === 0) r += i; r += '\n        </div>\n    </div>\n    <div id="thumbnails">\n        <ul class="galleryThumbnails">\n            ', a = n.objects, i = a || e.objects, i = i === null || i === undefined || i === !1 ? i : i.image, a = n.eachWithIndex, s = a || e.eachWithIndex, f = l.programWithDepth(S, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, a && typeof s === c ? i = s.call(e, i, f) : i = v.call(e, s, i, f); if (i || i === 0) r += i; return r += '\n        </ul>\n    </div>\n</div>\n<a class="close pageLink" href="', a = n.articleLink, i = a || e.articleLink, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "articleLink", { hash: {} })), r += d(i) + '">Close</a>\n', r } function g(e, t, r) { var i = "", s, o; i += '\n            <div class="slide slide-', a = n.index, s = a || e.index, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "index", { hash: {} })), i += d(s) + '" data-slide="', a = n.index, s = a || e.index, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "index", { hash: {} })), i += d(s) + '" itemscope itemtype="http://schema.org/ImageObject">\n                <div class="slide-image">\n                    <img itemprop="contentURL', a = n.primaryImage, s = a || e.primaryImage, o = n["if"], f = l.program(3, y, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += "\" src='", a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgLocation", { hash: {} })), i += d(s), a = n.imgLarge, s = a || r.imgLarge, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgLarge", { hash: {} })), i += d(s), a = n.publicID, s = a || e.publicID, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "publicID", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgExt", { hash: {} })), i += d(s) + "' alt='", a = n.alt, s = a || e.alt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "alt", { hash: {} })), i += d(s) + '\' />\n                </div>\n                <div class="detail closed">\n                    <header><button class="detail-toggle detail-open">Show text</button>\n                        <h1 class="detail-open" itemprop="name">', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + '</h1>\n                    </header>\n                    <div class="description" itemprop="description"><p>', a = n.caption, s = a || e.caption, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "caption", { hash: {} })), i += d(s) + "</p></div>\n                    ", a = n.credit, s = a || e.credit, o = n["if"], f = l.program(5, b, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += "\n                    ", a = n.keywords, s = a || e.keywords, o = n["if"], f = l.program(7, w, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += "\n                    ", a = n.description, s = a || e.description, o = n["if"], f = l.program(9, E, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; return i += "\n                </div>\n            </div>\n          ", i } function y(e, t) { return " primaryImageOfPage" } function b(e, t) { var r = "", i; return r += '<div class="caption" itemprop="copyrightHolder">', a = n.credit, i = a || e.credit, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "credit", { hash: {} })), r += d(i) + "</div>", r } function w(e, t) { var r = "", i; return r += '<span class="schema" itemprop="keywords">', a = n.keywords, i = a || e.keywords, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "keywords", { hash: {} })), r += d(i) + "</span>", r } function E(e, t) { var r = "", i; return r += '<span class="schema" itemprop="alternateName">', a = n.description, i = a || e.description, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "description", { hash: {} })), r += d(i) + "</span>", r } function S(e, t, r) { var i = "", s; return i += '\n            <li class="thumb thumb-', a = n.index, s = a || e.index, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "index", { hash: {} })), i += d(s) + '" data-thumb="', a = n.index, s = a || e.index, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "index", { hash: {} })), i += d(s) + "\"><img src='", a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgLocation", { hash: {} })), i += d(s), a = n.imgThumb, s = a || r.imgThumb, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgThumb", { hash: {} })), i += d(s), a = n.publicID, s = a || e.publicID, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "publicID", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgExt", { hash: {} })), i += d(s) + "' alt='", a = n.alt, s = a || e.alt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "alt", { hash: {} })), i += d(s) + "' /></li>\n            ", i } function x(e, t) { return '\n    <div class="loadingGif hidden">\n        <img src="/images/ajax-loader.gif" border="0" alt="Loading..." />\n        <button class="close">Close</button>\n    </div>\n' } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression, v = n.blockHelperMissing; a = n.objects, o = a || t.objects, o = o === null || o === undefined || o === !1 ? o : o.image, u = n["if"], f = l.program(1, m, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += "\n", a = n.objects, o = a || t.objects, o = o === null || o === undefined || o === !1 ? o : o.image, u = n.unless, f = l.program(13, x, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s }) }), require.register("views/templates/header", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function v(e, t) { return "logoHidden" } function m(e, t, r) { var i, s; return a = n.logoTransformed, i = a || r.logoTransformed, s = n.unless, f = l.program(4, g, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f), i || i === 0 ? i : "" } function g(e, t) { return "loading" } function y(e, t) { var r = "", i; return r += '<li class="button profileBtn"><a class="page-link" href="', a = n.langCode, i = a || e.langCode, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "langCode", { hash: {} })), r += d(i) + 'teachers/"><img src="/images/profile-icon.png" alt="My Profile" /><span>My Profile</span></a></li>', r } function b(e, t) { var r = "", i; return r += '\n            <li><a href="/', a = n.url, i = a || e.url, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "url", { hash: {} })), r += d(i) + '" class="page-link ', a = n.url, i = a || e.url, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "url", { hash: {} })), r += d(i) + '">', a = n.name, i = a || e.name, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "name", { hash: {} })), r += d(i) + "</a></li>\n            ", r } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression; s += '<div class="topNav ', a = n.hideLogo, o = a || t.hideLogo, u = n["if"], f = l.program(1, v, i), f.hash = {}, f.fn = f, f.inverse = l.programWithDepth(m, i, t), o = u.call(t, o, f); if (o || o === 0) s += o; s += '">\n    <ul><li class="button logoBtn" itemscope itemtype="http://schema.org/Organization"><a class="page-link" href="', a = n.langCode, o = a || t.langCode, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "langCode", { hash: {} })), s += d(o) + '" itemprop="url"><img itemprop="logo" role="presentation" class="logo" src="/images/logo.png" alt="DK Find Out!" /><img role="presentation" src="/images/home-icon.png" class="home" alt="Home" /><span>DK Find Out!</span></a></li><li class="button menuBtn" id="menuBtn"><button role="button" aria-controls="menuContainer"><img src="/images/menu-icon.png" alt="Menu" /><span>Menu</span></button></li><li class="button searchBtn"><a class="page-link" href="', a = n.langCode, o = a || t.langCode, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "langCode", { hash: {} })), s += d(o) + 'search/"><img role="presentation" src="/images/search-icon.png" alt="Search" /><span>Search</span></a></li>', a = n.user, o = a || t.user, o = o === null || o === undefined || o === !1 ? o : o.uid, u = n["if"], f = l.program(6, y, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '</ul>\n</div>\n<div class="right-hand-nav">\n    <ul>\n        <li class="kids"><a class="page-link" href="#">Kids</a></li>\n        <li class="parents"><a class="page-link" href="', a = n.langCode, o = a || t.langCode, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "langCode", { hash: {} })), s += d(o) + 'parents/">Parents</a></li>\n        <li class="teachers"><a class="page-link" href="', a = n.langCode, o = a || t.langCode, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "langCode", { hash: {} })), s += d(o) + 'teachers/">Teachers</li></a>\n    </ul>\n</div>\n<div class="menu" id="menuContainer" tabindex="-1" role="region" aria-label="Menu" aria-expanded="false">\n    <div class="menu-pages">\n        <!--<ul>', a = n.links, o = a || t.links, u = n.each, f = l.program(8, b, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '\n        </ul>-->\n    </div>\n    <div class="menu-subjects">\n        ', a = n.subjects, o = a || t.subjects, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "subjects", { hash: {} })); if (o || o === 0) s += o; return s += '\n    </div>\n    <button class="menuClose" role="button" aria-controls="menuContainer">Close menu</button>\n</div>', s }) }), require.register("views/templates/landing_page", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function m(e, t) { var r = "", i, s; r += '\n<header class="intro" role="banner"><h1 tabindex="0" class="logo">DK Find Out</h1><p tabindex="0">', a = n.homeIntro, i = a || e.homeIntro, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "homeIntro", { hash: {} })), r += d(i) + '</p></header>\n<div class="carousel">\n    ', a = n.object, i = a || e.object, s = n.each, f = l.programWithDepth(g, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += '\n    <button class=\'slideDir prevBtn\' aria-label="Previous tabpanel">Previous</button>\n    <button class=\'slideDir nextBtn\' aria-label="Next tabpanel">Next</button>\n</div>\n<ul class="selector" role="tablist">\n    ', a = n.object, i = a || e.object, s = n.each, f = l.programWithDepth(S, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += "\n</ul>\n", a = n.searchForm, i = a || e.searchForm, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "searchForm", { hash: {} })); if (i || i === 0) r += i; r += '\n<h2 tabindex="0" role="heading">', a = n.catHeader, i = a || e.catHeader, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "catHeader", { hash: {} })); if (i || i === 0) r += i; r += '</h2>\n<!-- subjects will go here -->\n<div class="components-outer-wrapper">\n    <div class="components">\n        ', a = n.object, i = a || e.object, s = n.each, f = l.programWithDepth(N, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += '\n    </div>\n    <div class="explore-section">\n    </div>\n</div>\n<div class="statics">\n    <h2 tabindex="0" role="heading">', a = n.staticHeader, i = a || e.staticHeader, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "staticHeader", { hash: {} })); if (i || i === 0) r += i; r += '</h2>\n    <div class="statics-wrapper">\n    ', a = n.object, i = a || e.object, s = n.each, f = l.programWithDepth(P, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += '\n    </div>\n</div>\n<div class="newsletter-form">\n    <div class="newsletter-text">\n        <h2>', a = n.formHeader, i = a || e.formHeader, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "formHeader", { hash: {} })); if (i || i === 0) r += i; r += "</h2>\n        <p>", a = n.formIntro, i = a || e.formIntro, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "formIntro", { hash: {} })); if (i || i === 0) r += i; return r += '</p>\n        <a href="/', a = n.langCode, i = a || e.langCode, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "langCode", { hash: {} })), r += d(i) + '/newsletter-signup/" class="newsletter-signup-button">Sign up for our newsletter</a>\n    </div>\n    <div class="newsletter-image"></div>\n</div>\n<div class="shadow"></div>\n<button class="scrollBtn" role="presentation"></button>\n', r } function g(e, t, r) { var i = "", s, o; i += "\n    ", a = n.carousel, s = a || e.carousel, o = n["if"], f = l.programWithDepth(y, t, r), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; return i += "\n    ", i } function y(e, t, r) { var i = "", s, o; i += "\n    ", a = n.carousel, s = a || e.carousel, a = n.eachWithIndexPlusOne, o = a || e.eachWithIndexPlusOne, f = l.programWithDepth(b, t, r), f.hash = {}, f.fn = f, f.inverse = l.noop, a && typeof o === c ? s = o.call(e, s, f) : s = v.call(e, o, s, f); if (s || s === 0) i += s; return i += "\n    ", i } function b(e, t, r) { var i = "", s, o; i += "\n    <article class='slide slide-", a = n.index, s = a || e.index, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "index", { hash: {} })), i += d(s) + "' data-index=\"", a = n.index, s = a || e.index, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "index", { hash: {} })), i += d(s) + '" id="panel', a = n.index, s = a || e.index, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "index", { hash: {} })), i += d(s) + '" role="tabpanel" tabindex="0" aria-describedby="tab', a = n.index, s = a || e.index, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "index", { hash: {} })), i += d(s) + '" aria-labelledby="tab', a = n.index, s = a || e.index, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "index", { hash: {} })), i += d(s) + '">\n        <a href="/', a = n.langCode, s = a || r.langCode, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, ".........langCode", { hash: {} })), i += d(s), a = n.url, s = a || e.url, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "url", { hash: {} })), i += d(s) + '" class="slide-link pageLink" tabindex="0" itemscope itemtype="http://schema.org/ImageObject">\n            <div><!-- wrap in div for FF 3.6 -->\n            ', a = n.images, s = a || e.images, o = n["if"], f = l.program(5, w, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += "\n            ", a = n.image, s = a || e.image, o = n["if"], f = l.programWithDepth(E, t, r), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += '\n            <meta itemprop="name" content="', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + '" />\n            <div class="description" id="desc', a = n.index, s = a || e.index, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "index", { hash: {} })), i += d(s) + '"><span itemprop="description">', a = n.description, s = a || e.description, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "description", { hash: {} })); if (s || s === 0) i += s; return i += '</span> <span class="cta"><span class="red">find</span><span class="space"> </span><span class="yellow">out</span><span class="space"> </span><span class="red">more</span><span class="space"> </span><span class="red">&rsaquo;</span></span></div>\n            </div>\n        </a>\n    </article>\n    ', i } function w(e, t) { var r = "", i, s, o, u, f, l, d, v, m; r += "\n            ", i = "home", a = n.video, s = a || e.video, s = s === null || s === undefined || s === !1 ? s : s.url, a = n.gallery, o = a || e.gallery, o = o === null || o === undefined || o === !1 ? o : o.url, a = n.layout, u = a || e.layout, a = n.boundingBox, f = a || e.boundingBox, f = f === null || f === undefined || f === !1 ? f : f.ratio, a = n.boundingBox, l = a || e.boundingBox, l = l === null || l === undefined || l === !1 ? l : l.height, a = n.boundingBox, d = a || e.boundingBox, d = d === null || d === undefined || d === !1 ? d : d.width, a = n.images, v = a || e.images, a = n.formatCutout, m = a || e.formatCutout, typeof m === c ? i = m.call(e, v, d, l, f, u, o, s, i, { hash: {} }) : m === p ? i = h.call(e, "formatCutout", v, d, l, f, u, o, s, i, { hash: {} }) : i = m; if (i || i === 0) r += i; return r += "\n            ", r } function E(e, t, r) { var i = "", s; return i += '\n            <div class="image-wrapper slide-wrapper" data-ratio="', a = n.image, s = a || e.image, s = s === null || s === undefined || s === !1 ? s : s.ratio, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "image.ratio", { hash: {} })), i += d(s) + '"><img role="presentation" itemprop="contentURL" src="', a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "............imgLocation", { hash: {} })), i += d(s), a = n.returnImageSize, s = a || e.returnImageSize, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "returnImageSize", { hash: {} })), i += d(s), a = n.image, s = a || e.image, s = s === null || s === undefined || s === !1 ? s : s.publicID, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "image.publicID", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "............imgExt", { hash: {} })), i += d(s) + '" alt="', a = n.image, s = a || e.image, s = s === null || s === undefined || s === !1 ? s : s.alt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "image.alt", { hash: {} })), i += d(s) + '"  /></div>\n            ', i } function S(e, t, r) { var i = "", s, o; i += "\n    ", a = n.carousel, s = a || e.carousel, o = n["if"], f = l.programWithDepth(x, t, r), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; return i += "\n    ", i } function x(e, t, r) { var i = "", s, o; i += "\n    ", a = n.carousel, s = a || e.carousel, a = n.eachWithIndexPlusOne, o = a || e.eachWithIndexPlusOne, f = l.programWithDepth(T, t, r), f.hash = {}, f.fn = f, f.inverse = l.noop, a && typeof o === c ? s = o.call(e, s, f) : s = v.call(e, o, s, f); if (s || s === 0) i += s; return i += "\n    ", i } function T(e, t, r) { var i = "", s; return i += "\n    <li class='list-", a = n.index, s = a || e.index, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "index", { hash: {} })), i += d(s) + "' data-index='", a = n.index, s = a || e.index, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "index", { hash: {} })), i += d(s) + '\' role="presentation"><div class="image-wrapper"><img role="presentation" src=\'', a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, ".........imgLocation", { hash: {} })), i += d(s), a = n.imgCrop, s = a || r.imgCrop, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, ".........imgCrop", { hash: {} })), i += d(s), a = n.themeImage, s = a || e.themeImage, s = s === null || s === undefined || s === !1 ? s : s.publicID, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "themeImage.publicID", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, ".........imgExt", { hash: {} })), i += d(s) + "' alt='", a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + "'  /><span class=\"roundel\"></span></div><button class='slideBtn' id=\"tab", a = n.index, s = a || e.index, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "index", { hash: {} })), i += d(s) + '" role="tab" aria-controls="panel', a = n.index, s = a || e.index, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "index", { hash: {} })), i += d(s) + '" aria-selected="false"><span class=\'title\'>', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + "</span></button></li>\n    ", i } function N(e, t, r) { var i = "", s, o; i += "\n            ", a = n.slides, s = a || e.slides, o = n["if"], f = l.programWithDepth(C, t, r), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; return i += "\n        ", i } function C(e, t, r) { var i = "", s, o; i += '\n            <div class="component ', a = n.titleFriendly, s = a || e.titleFriendly, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "titleFriendly", { hash: {} })), i += d(s) + " slides-", a = n.slides, s = a || e.slides, s = s === null || s === undefined || s === !1 ? s : s.length, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "slides.length", { hash: {} })), i += d(s) + '" data-component="', a = n.titleFriendly, s = a || e.titleFriendly, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "titleFriendly", { hash: {} })), i += d(s) + '">\n                <header class="comp-header">\n                    <h3 tabindex="0" role="heading">', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })); if (s || s === 0) i += s; i += '</h3>\n                </header>\n                <div class="comp-content"> \n                    <div class="comp-slides">\n                        ', a = n.slides, s = a || e.slides, a = n.eachWithIndexPlusOne, o = a || e.eachWithIndexPlusOne, f = l.programWithDepth(k, t, e, r), f.hash = {}, f.fn = f, f.inverse = l.noop, a && typeof o === c ? s = o.call(e, s, f) : s = v.call(e, o, s, f); if (s || s === 0) i += s; i += "\n\n                    </div>\n                    ", a = n.slides, s = a || e.slides, a = n.ifCompSlides, o = a || e.ifCompSlides, f = l.program(26, D, t), f.hash = {}, f.fn = f, f.inverse = l.noop, a && typeof o === c ? s = o.call(e, s, f) : s = v.call(e, o, s, f); if (s || s === 0) i += s; return i += "\n                </div>\n            </div>\n            ", i } function k(e, t, r, i) { var s = "", o, u; s += '\n                        <article class="comp-slide" data-index="', a = n.index, o = a || e.index, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "index", { hash: {} })), s += d(o) + '" itemscope itemtype="http://schema.org/ImageObject">\n                            <', a = n.url, o = a || e.url, u = n["if"], f = l.programWithDepth(L, t, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; a = n.url, o = a || e.url, u = n.unless, f = l.program(18, A, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; s += ' class="pageLink slide-link" tabindex="0">\n                                ', a = n.image, o = a || e.image, u = n["if"], f = l.programWithDepth(O, t, r, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; s += '\n                                <span itemprop="description">', a = n.description, o = a || e.description, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "description", { hash: {} })); if (o || o === 0) s += o; s += "</span>\n                            </", a = n.url, o = a || e.url, u = n["if"], f = l.program(22, M, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; a = n.url, o = a || e.url, u = n.unless, f = l.program(24, _, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; return s += ">\n                        </article>\n                        ", s } function L(e, t, r) { var i = "", s; return i += 'a href="/', a = n.langCode, s = a || r.langCode, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "............langCode", { hash: {} })), i += d(s), a = n.url, s = a || e.url, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "url", { hash: {} })), i += d(s) + '"', i } function A(e, t) { return "span" } function O(e, t, r, i) { var s = "", o; return s += '\n                                <div class="image-wrapper">\n                                    <img itemprop="contentURL" src="', a = n.imgLocation, o = a || i.imgLocation, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "............imgLocation", { hash: {} })), s += d(o), a = n.imgGrid, o = a || i.imgGrid, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "............imgGrid", { hash: {} })), s += d(o), a = n.image, o = a || e.image, o = o === null || o === undefined || o === !1 ? o : o.publicID, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "image.publicID", { hash: {} })), s += d(o), a = n.imgExt, o = a || i.imgExt, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "............imgExt", { hash: {} })), s += d(o) + '" alt="', a = n.image, o = a || e.image, o = o === null || o === undefined || o === !1 ? o : o.alt, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "image.alt", { hash: {} })), s += d(o) + '" role="presentation" /><meta itemprop="name" content="', a = n.title, o = a || r.title, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "......title", { hash: {} })), s += d(o) + '" />\n                                </div>', s } function M(e, t) { return "a" } function _(e, t) { return "span" } function D(e, t) { return '\n                    <div class="comp-nav">\n                        <button class="navBtn prev" aria-label="Previous tabpanel"><span>&lsaquo;</span></button>\n                        <button class="navBtn next" aria-label="Next tabpanel"><span>&rsaquo;</span></button>\n                    </div>\n                    ' } function P(e, t, r) { var i = "", s, o; i += "\n    ", a = n.slides, s = a || e.slides, o = n.unless, f = l.programWithDepth(H, t, r), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; return i } function H(e, t, r) { var i, s; return a = n.carousel, i = a || e.carousel, s = n.unless, f = l.programWithDepth(B, t, r), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f), i || i === 0 ? i : "" } function B(e, t, r) { var i = "", s, o; i += '\n    <div class="static component ', a = n.titleFriendly, s = a || e.titleFriendly, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "titleFriendly", { hash: {} })), i += d(s) + '" data-static="', a = n.titleFriendly, s = a || e.titleFriendly, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "titleFriendly", { hash: {} })), i += d(s) + '">\n        <div class="inner">\n            <header class="static-header">\n                <h3>', a = n.image, s = a || e.image, o = n["if"], f = l.program(31, j, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + '</h3>\n            </header>\n            <div class="static-content"> \n                ', a = n.description, s = a || e.description, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "description", { hash: {} })); if (s || s === 0) i += s; i += "\n            </div>\n            ", a = n.url, s = a || e.url, o = n["if"], f = l.programWithDepth(F, t, r), f.hash = {}, f.fn = f, f.inverse = l.program(35, I, t), s = o.call(e, s, f); if (s || s === 0) i += s; return i += "\n        </div>\n    </div>\n    ", i } function j(e, t) { var r = "", i; return r += '<img src="', a = n.image, i = a || e.image, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "image", { hash: {} })), r += d(i) + '" alt="" role="presentation" tabindex="-1" />', r } function F(e, t, r) { var i = "", s; return i += '<a class="pageLink staticBtn active" href="/', a = n.langCode, s = a || r.langCode, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "............langCode", { hash: {} })), i += d(s), a = n.url, s = a || e.url, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "url", { hash: {} })), i += d(s) + '">', a = n.buttonTitle, s = a || e.buttonTitle, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "buttonTitle", { hash: {} })), i += d(s) + "</a>", i } function I(e, t) { var r = "", i; return r += '<button class="staticBtn disabled">', a = n.buttonTitle, i = a || e.buttonTitle, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "buttonTitle", { hash: {} })), r += d(i) + "</button>", r } function q(e, t) { return '\n    <div class="loadingGif hidden">\n        <img src="/images/ajax-loader.gif" border="0" alt="Loading..." />\n    </div>\n' } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression, v = n.blockHelperMissing; a = n.object, o = a || t.object, u = n["if"], f = l.program(1, m, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += "\n", a = n.object, o = a || t.object, u = n.unless, f = l.program(37, q, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s += "\n", s }) }), require.register("views/templates/lesson_plan", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function v(e, t) { return "hidden" } function m(e, t) { var r = "", i, s; r += '\n		<p class="instruction ', a = n.editMode, i = a || e.editMode, s = n.unless, f = l.program(4, g, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += '">Drag to reorder</p>\n		<button class="editBtn">', a = n.editMode, i = a || e.editMode, s = n["if"], f = l.program(6, y, t), f.hash = {}, f.fn = f, f.inverse = l.program(8, b, t), i = s.call(e, i, f); if (i || i === 0) r += i; return r += "</button>\n	", r } function g(e, t) { return "hidden" } function y(e, t) { return "SAVE" } function b(e, t) { return "EDIT" } function w(e, t) { var r, i; return a = n.objects, r = a || e.objects, i = n.each, f = l.programWithDepth(E, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, r = i.call(e, r, f), r || r === 0 ? r : "" } function E(e, t, r) { var i = "", s, o; i += '\n		<article class="page ui-state-default" data-id="', a = n.id, s = a || e.id, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "id", { hash: {} })), i += d(s) + '">\n			<a data-link="', a = n.url, s = a || e.url, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "url", { hash: {} })), i += d(s) + '" class="pageLink ', a = n.editMode, s = a || r.editMode, o = n["if"], f = l.program(12, S, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += '"><div class="image-wrapper"><img src="', a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgLocation", { hash: {} })), i += d(s), a = n.imgCrop, s = a || r.imgCrop, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgCrop", { hash: {} })), i += d(s), a = n.image, s = a || e.image, s = s === null || s === undefined || s === !1 ? s : s.publicID, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "image.publicID", { hash: {} })), i += d(s) + '.jpg" alt="', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + '" role="presentation" tabindex="-1" /></div>				\n				<h3 class="page-header">', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + ' <span class="cursor">&rsaquo;</span></h3>\n			</a>\n			<div class="buttons">\n				<button class="deletePage ', a = n.editMode, s = a || r.editMode, o = n.unless, f = l.program(14, x, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += '" data-id="', a = n.object_id, s = a || e.object_id, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object_id", { hash: {} })), i += d(s) + '">Delete</button>\n\n				<button class="addNote ', a = n.editMode, s = a || r.editMode, o = n["if"], f = l.program(16, T, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += '" data-id="', a = n.object_id, s = a || e.object_id, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object_id", { hash: {} })), i += d(s) + '">', a = n.notes, s = a || e.notes, o = n["if"], f = l.program(18, N, t), f.hash = {}, f.fn = f, f.inverse = l.program(20, C, t), s = o.call(e, s, f); if (s || s === 0) i += s; i += '</button>\n\n\n				<span class="handle ', a = n.editMode, s = a || r.editMode, o = n.unless, f = l.program(22, k, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; return i += '">Handle</span>\n			</div>\n		</article>\n		', i } function S(e, t) { return "disabled" } function x(e, t) { return "hidden" } function T(e, t) { return "hidden" } function N(e, t) { return " View notes" } function C(e, t) { return "Add a note" } function k(e, t) { return "hidden" } function L(e, t) { return "hidden" } function A(e, t) { var r = "", i, s; r += '\n<footer class="plan-footer ', a = n.editMode, i = a || e.editMode, s = n["if"], f = l.program(27, O, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; return r += '">\n	<div class="inner">\n		<!--<button class="printPlan footer-btn">Print lesson plan notes &rsaquo;</button>-->\n		<a href="', a = n.playURL, i = a || e.playURL, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "playURL", { hash: {} })), r += d(i) + '" class="playPlan footer-btn">Play lesson plan &rsaquo;</a>\n	</div>\n</footer>\n', r } function O(e, t) { return "hidden" } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression; s += '<div class="plan-container ', a = n.hidden, o = a || t.hidden, u = n["if"], f = l.program(1, v, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '">\n\n<header class="plan-header">\n	<div class="plan-title">\n		<div class="inner">\n			<div class="fix">\n				<h1 contenteditable="false">', a = n.title, o = a || t.title, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "title", { hash: {} })), s += d(o) + '</h1>\n				<button class="editTitle">Edit title &rsaquo;</button>\n			</div>\n		</div>\n	</div>\n	<a href="/', a = n.langCode, o = a || t.langCode, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "langCode", { hash: {} })), s += d(o) + '/teachers/" class="close">Close</a>\n</header>\n<div class="pages">\n	<footer class="pages-footer">\n	', a = n.playURL, o = a || t.playURL, u = n["if"], f = l.program(3, m, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '\n	</footer>\n	<div id="sortable">\n		', a = n.objects, o = a || t.objects, u = n["if"], f = l.program(10, w, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '\n	</div>\n	<a href="/', a = n.langCode, o = a || t.langCode, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "langCode", { hash: {} })), s += d(o) + '/discover" class="addContent ', a = n.editMode, o = a || t.editMode, u = n["if"], f = l.program(24, L, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '">Add more content &rsaquo;</a>\n	<button class="deleteLessonPlan">Delete This Lesson Plan</button>\n</div>\n', a = n.playURL, o = a || t.playURL, u = n["if"], f = l.program(26, A, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s += '\n<div class="loadingGif hidden">\n    <img src="/images/ajax-loader.gif" border="0" alt="saving..." />\n</div>\n\n</div> ', s }) }), require.register("views/templates/lesson_plan_controls", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function v(e, t) { return "disabled" } function m(e, t) { return "disabled" } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression; s += '<div class="inner">\n    <button class="controls-btn back ', a = n.atBeginning, o = a || t.atBeginning, u = n["if"], f = l.program(1, v, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '">Back</button>\n    <a class="controls-btn plan" href="/', a = n.langCode, o = a || t.langCode, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "langCode", { hash: {} })), s += d(o) + "/lesson-plan/", a = n.lessonPlanID, o = a || t.lessonPlanID, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "lessonPlanID", { hash: {} })), s += d(o) + '">Back To Plan</a>\n    <button class="controls-btn forward ', a = n.atEnd, o = a || t.atEnd, u = n["if"], f = l.program(3, m, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s += '">Forward</button>\n</div>', s }) }), require.register("views/templates/lesson_plan_toolbar", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function v(e, t) { var r = "", i, s; r += '\n      <button class="toolbar-btn remove">Remove from plan</button>\n      <button class="toolbar-btn notes">', a = n.lessonPlanContentItem, i = a || e.lessonPlanContentItem, i = i === null || i === undefined || i === !1 ? i : i.notes, s = n["if"], f = l.program(2, m, t), f.hash = {}, f.fn = f, f.inverse = l.program(4, g, t), i = s.call(e, i, f); if (i || i === 0) r += i; return r += "</button>\n  ", r } function m(e, t) { return "View notes" } function g(e, t) { return "Add a note" } function y(e, t) { return '\n  	<button class="toolbar-btn add">Add to plan</button>\n    <button class="toolbar-btn notes disabled">View notes</button>\n  ' } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression; s += '<div class="inner">\n  ', a = n.lessonPlanContentItem, o = a || t.lessonPlanContentItem, u = n["if"], f = l.program(1, v, i), f.hash = {}, f.fn = f, f.inverse = l.program(6, y, i), o = u.call(t, o, f); if (o || o === 0) s += o; return s += '\n	<a class="toolbar-btn plan" href="', a = n.langCode, o = a || t.langCode, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "langCode", { hash: {} })), s += d(o) + "lesson-plan/", a = n.lessonPlanID, o = a || t.lessonPlanID, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "lessonPlanID", { hash: {} })), s += d(o) + '">View Plan</a>\n	<button class="toolbar-btn quit">Quit</button>\n</div>\n', s }) }), require.register("views/templates/newsletter_confirmation", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { n = n || e.helpers; var s = "", o, u, a = this, f = "function", l = n.helperMissing, c = void 0, h = this.escapeExpression; s += "<h1>\n  <span class='hide'>DKFindOut!</span>\n  <img src='/images/ie/logo.png' alt='' role='presentation' />\n  ", u = n.object, o = u || t.object, o = o === null || o === undefined || o === !1 ? o : o.headline, typeof o === f ? o = o.call(t, { hash: {} }) : o === c && (o = l.call(t, "object.headline", { hash: {} })), s += h(o) + "\n</h1>\n<div class='confirmation'>\n  <p class=\"confirmation-message\">", u = n.object, o = u || t.object, o = o === null || o === undefined || o === !1 ? o : o.confirmation, typeof o === f ? o = o.call(t, { hash: {} }) : o === c && (o = l.call(t, "object.confirmation", { hash: {} })), s += h(o) + '</p>\n  <p class="further-info">', u = n.object, o = u || t.object, o = o === null || o === undefined || o === !1 ? o : o.furtherInfo, typeof o === f ? o = o.call(t, { hash: {} }) : o === c && (o = l.call(t, "object.furtherInfo", { hash: {} })), s += h(o) + '</p>\n</div>\n<a href="', u = n.langCode, o = u || t.langCode, typeof o === f ? o = o.call(t, { hash: {} }) : o === c && (o = l.call(t, "langCode", { hash: {} })), s += h(o) + "\" class='button home-button'><span>", u = n.object, o = u || t.object, o = o === null || o === undefined || o === !1 ? o : o.homeButton, typeof o === f ? o = o.call(t, { hash: {} }) : o === c && (o = l.call(t, "object.homeButton", { hash: {} })), s += h(o) + "</span></a>\n<div class='search-form'>", u = n.searchForm, o = u || t.searchForm, typeof o === f ? o = o.call(t, { hash: {} }) : o === c && (o = l.call(t, "searchForm", { hash: {} })); if (o || o === 0) s += o; return s += "</div>\n<div class='teachers-promo'>\n  <div class='intro'>\n    <h2>", u = n.object, o = u || t.object, o = o === null || o === undefined || o === !1 ? o : o.secondHeading, typeof o === f ? o = o.call(t, { hash: {} }) : o === c && (o = l.call(t, "object.secondHeading", { hash: {} })), s += h(o) + "</h2>\n    <p>", u = n.object, o = u || t.object, o = o === null || o === undefined || o === !1 ? o : o.callToAction, typeof o === f ? o = o.call(t, { hash: {} }) : o === c && (o = l.call(t, "object.callToAction", { hash: {} })), s += h(o) + "</p>\n  </div>\n  <div class='video'>\n    <iframe src='https://www.youtube.com/embed/", u = n.object, o = u || t.object, o = o === null || o === undefined || o === !1 ? o : o.youTubeID, typeof o === f ? o = o.call(t, { hash: {} }) : o === c && (o = l.call(t, "object.youTubeID", { hash: {} })), s += h(o) + "' frameborder='0' allowfullscreen></iframe>\n  </div>\n  <a href=\"", u = n.object, o = u || t.object, o = o === null || o === undefined || o === !1 ? o : o.teachersAreaUrl, typeof o === f ? o = o.call(t, { hash: {} }) : o === c && (o = l.call(t, "object.teachersAreaUrl", { hash: {} })), s += h(o) + "\" class='button teachers-area-button'>", u = n.object, o = u || t.object, o = o === null || o === undefined || o === !1 ? o : o.teachersAreaButton, typeof o === f ? o = o.call(t, { hash: {} }) : o === c && (o = l.call(t, "object.teachersAreaButton", { hash: {} })), s += h(o) + "</a>\n</div>\n", s }) }), require.register("views/templates/newsletter_sign_up", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function d(e, t, r) { var i = "", s; i += "\n\n  <header class=\"main-header\">\n    <h1><span class='hide'>DKFindOut!</span><img src='/images/ie/logo.png' alt='' role='presentation' /> <span class=\"sub-header\">", u = n.subHeader, s = u || e.subHeader, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "subHeader", { hash: {} })), i += p(s) + '</span></h1>\n  </header>\n\n  <div class="intro"><div class="inner">', u = n.intro, s = u || e.intro, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "intro", { hash: {} })); if (s || s === 0) i += s; i += '</div></div>\n\n  <form id="formSignUp" method="post" action="http://dk.msgfocus.com/s/">\n    <!-- Note this form will not work as it is.  Additional information is added to it by Javascript e.g. the Adestra _account_id  value for UK/US -->\n    <div id="hiddenAdestraFields">\n      <!-- commands to point to correct account/table -->\n      <input type="hidden" name="_account_id" />\n      <input type="hidden" name="_table_id" />\n      <!-- landing page after submission -->\n      <input type="hidden" name="_rp" value="', u = n.origin, s = u || r.origin, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "...origin", { hash: {} })), i += p(s), u = n.langCode, s = u || r.langCode, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "...langCode", { hash: {} })), i += p(s) + 'newsletter-confirmation/" />\n      <!-- enforce existing records to be overwritten -->\n      <input type="hidden" name="_static_update" value="1" />\n      <!-- dedupe on email address if already in core table -->\n      <input type="hidden" name="_dedupe" value="1" />\n      <input type="hidden" name="_email_field" />\n      <!-- tag to show where data came from -->\n      <input type="hidden" id="tag" value="DKFindOut.com/', u = n.langCodeNoSlashes, s = u || r.langCodeNoSlashes, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "...langCodeNoSlashes", { hash: {} })), i += p(s) + '" />\n      <!-- submissions are added to these list ids -->\n      <input type="hidden" name="_list_id" />\n      <!-- timestamp -->\n      <input type="hidden" id="adestraDate" value="', u = n.adestraDate, s = u || r.adestraDate, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "...adestraDate", { hash: {} })), i += p(s) + '" />\n    </div>\n    <div class="inputSection">\n      <label>', u = n.nameSentence, s = u || e.nameSentence, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "nameSentence", { hash: {} })), i += p(s) + '</label>\n      <input type="text" id="firstName" class="firstName" required placeholder="', u = n.firstName, s = u || e.firstName, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "firstName", { hash: {} })), i += p(s) + '" required maxlength="40" />\n      <input type="text" id="lastName" class="lastName" placeholder="', u = n.lastName, s = u || e.lastName, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "lastName", { hash: {} })), i += p(s) + '" required maxlength ="40" />\n      <label>', u = n.emailAddressSentence, s = u || e.emailAddressSentence, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "emailAddressSentence", { hash: {} })), i += p(s) + '</label>\n      <input type="email" id="email" class="email" placeholder="', u = n.emailAddress, s = u || e.emailAddress, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "emailAddress", { hash: {} })), i += p(s) + '" required maxlength ="254" />\n      <label>', u = n.countrySentence, s = u || e.countrySentence, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "countrySentence", { hash: {} })), i += p(s) + '</label>\n      <select id="country" class="country" required>\n      <!-- Adestra uses ISO 3166-1 alpha-2 country codes from 2014\n      https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2\n      with the exception that United Kingdom is UK (not GB) -->\n        ', u = n.country, s = u || e.country, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "country", { hash: {} })); if (s || s === 0) i += s; i += "\n      </select>\n      <label>", u = n.userTypeSentence, s = u || e.userTypeSentence, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "userTypeSentence", { hash: {} })), i += p(s) + '</label>\n      <select id="userType" class="userType" required>\n        ', u = n.userType, s = u || e.userType, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "userType", { hash: {} })); if (s || s === 0) i += s; return i += "\n      </select>\n      <label>", u = n.over18Sentence, s = u || e.over18Sentence, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "over18Sentence", { hash: {} })), i += p(s) + '</label>\n      <input id="over18" type="checkbox" class="over18" value="Over 18"  required> </input>\n      <div class="error hidden">Please fill in all fields &amp; confirm you\'re over 18 to sign up for the newsletter</div>\n      <div class="privacyPolicy">\n        <a class=".pageLink" href="', u = n.langCode, s = u || r.langCode, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "...langCode", { hash: {} })), i += p(s) + 'privacy-and-cookies/">', u = n.privacyPolicySentence, s = u || e.privacyPolicySentence, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "privacyPolicySentence", { hash: {} })), i += p(s) + '</a>\n      </div>\n    </div>\n    <div class="buttonSection">\n      <button type="submit" id="btnSignUp" class="signUp">', u = n.buttonText, s = u || e.buttonText, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "buttonText", { hash: {} })), i += p(s) + "</button>\n    </div>\n  <form>\n\n", i } n = n || e.helpers; var s, o, u, a, f = this, l = "function", c = n.helperMissing, h = void 0, p = this.escapeExpression; return u = n.object, s = u || t.object, o = n["with"], a = f.programWithDepth(d, i, t), a.hash = {}, a.fn = a, a.inverse = f.noop, s = o.call(t, s, a), s || s === 0 ? s : "" }) }), require.register("views/templates/not_found", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function d(e, t, r) { var i = "", s; i += '\n\n    <div class="container">\n        <p class="sorry">\n            <span class="image"></span>\n            <span class="text">', u = n.sorry, s = u || e.sorry, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "sorry", { hash: {} })); if (s || s === 0) i += s; i += '</span>\n        </p>\n        \n        <p class="suggestions">\n            <span class="text">', u = n.suggestions, s = u || e.suggestions, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "suggestions", { hash: {} })); if (s || s === 0) i += s; i += '</span>\n            <span class="image"></span>\n        </p>\n    </div>\n\n    ', u = n.searchForm, s = u || r.searchForm, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "...searchForm", { hash: {} })); if (s || s === 0) i += s; return i += '\n\n    <div class="container">\n        <h2>', u = n.linksIntro, s = u || e.linksIntro, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "linksIntro", { hash: {} })), i += p(s) + '</h2>\n        <ul class="links">\n            <!-- Links appended in here by displayLinks method go in here -->\n        </ul>\n    </div>\n', i } n = n || e.helpers; var s, o, u, a, f = this, l = "function", c = n.helperMissing, h = void 0, p = this.escapeExpression; return u = n.object, s = u || t.object, o = n["with"], a = f.programWithDepth(d, i, t), a.hash = {}, a.fn = a, a.inverse = f.noop, s = o.call(t, s, a), s || s === 0 ? s : "" }) }), require.register("views/templates/notes_toolbar", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function v(e, t) { var r = "", i, s; r += '\n  <div class="notes-inner">\n    <button class="close">Close</button>\n    <h3>Notes for ', a = n.title, i = a || e.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "title", { hash: {} })), r += d(i) + "</h3> \n    ", a = n.notes, i = a || e.notes, s = n["if"], f = l.program(2, m, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += "\n  </div>\n  ", a = n.notes, i = a || e.notes, s = n.unless, f = l.program(4, g, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; return r += "\n  ", r } function m(e, t) { var r = "", i; r += '\n      <div class="notes">\n        <article class="note">\n          <div class="content" contenteditable="false">', a = n.notes, i = a || e.notes, i = i === null || i === undefined || i === !1 ? i : i[0], typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "notes.0", { hash: {} })); if (i || i === 0) r += i; return r += '</div>\n          <button class="edit">Edit &rsaquo;</button>\n          <button class="delete_note">Delete</button>\n        </article>\n      </div>\n    ', r } function g(e, t) { return '\n  <button class="add_note">Add a note</button>\n  ' } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression; s += '<div class="notes-overlay-', a = n.context, o = a || t.context, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "context", { hash: {} })), s += d(o) + '"></div>\n<div class="notes-wrapper ', a = n.context, o = a || t.context, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "context", { hash: {} })), s += d(o) + '">\n  ', a = n.content, o = a || t.content, u = n["with"], f = l.program(1, v, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s += "\n</div>\n", s }) }), require.register("views/templates/parents", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function m(e, t) { var r = "", i; return r += '\n    	<div class="book">\n    		<a href="', a = n.url, i = a || e.url, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "url", { hash: {} })), r += d(i) + "\" target='_blank'><img src=\"", a = n.img, i = a || e.img, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "img", { hash: {} })), r += d(i) + '" alt="', a = n.title, i = a || e.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "title", { hash: {} })), r += d(i) + '">\n    			<h3>', a = n.title, i = a || e.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "title", { hash: {} })), r += d(i) + "</h3>\n    		</a>\n    	</div>\n    	", r } function g(e, t) { var r = "", i; r += '\n      <div class="testimonial-container">\n        <div class="testimonial-container-inner">\n          <div class="testimonial testimonial-', a = n.index, i = a || e.index, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "index", { hash: {} })), r += d(i) + '">\n            <blockquote>', a = n.quote, i = a || e.quote, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "quote", { hash: {} })), r += d(i) + "</blockquote>\n            <cite>", a = n.name, i = a || e.name, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "name", { hash: {} })); if (i || i === 0) r += i; return r += "</cite>\n          </div>\n        </div>\n      </div>\n    ", r } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression, v = n.blockHelperMissing; s += '<div class="content">\n	<div class="intro">\n    <h1>', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.header, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.header", { hash: {} })); if (o || o === 0) s += o; s += '</h1>\n    <div class="inner">\n			', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.introText, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.introText", { hash: {} })); if (o || o === 0) s += o; s += '\n    </div>\n  </div>\n  <div class="testimonial-links">\n    <p class="link"><a id="testimonial-link" href="#testimonials">', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.linkToTestimonials, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.linkToTestimonials", { hash: {} })), s += d(o) + '</a></p>\n    <div class="badge">\n      <a id="testimonial-badge" href="#testimonials">\n        <p>', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.badge, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.badge", { hash: {} })); if (o || o === 0) s += o; s += '</p>\n      </a>\n    </div>\n  </div>\n  <div class="parents-explore-section">\n  </div>\n  <div class="components-section">', o = t, a = n.componentsSection, u = a || t.componentsSection, typeof u === c ? o = u.call(t, o, { hash: {} }) : u === p ? o = h.call(t, "componentsSection", o, { hash: {} }) : o = u; if (o || o === 0) s += o; s += '</div>\n  <div class="clearfix"></div>\n  <div class="books-promo">\n    <div class="top">\n      <div class="intro">\n      	<h2>', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.booksHeader, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.booksHeader", { hash: {} })), s += d(o) + "</h2>\n      	<p>", a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.booksSubHead, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.booksSubHead", { hash: {} })), s += d(o) + '</p>\n      </div>\n      <img class="related-image first" src="', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.relatedBookImage, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.relatedBookImage", { hash: {} })), s += d(o) + '" alt="">\n    </div>\n  	<div class="all-books">\n    	', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.books, u = n.each, f = l.program(1, m, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '\n      <img class="related-image second" src="', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.relatedBookImage, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.relatedBookImage", { hash: {} })), s += d(o) + '" alt="">\n  	</div>\n    \n  </div>\n  <div class="clearfix"></div>\n  <div class="find-out-more-newsletter">\n  <div class="find-out-more">\n    <!-- Partial goes here -->\n  </div>\n  <div class="newsletter-social">\n    <div class="newsletter">\n      <h2>', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.newsletterHeading, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.newsletterHeading", { hash: {} })); if (o || o === 0) s += o; s += "</h2>\n      <p>", a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.newsletterCopy, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.newsletterCopy", { hash: {} })), s += d(o) + '</p>\n      <a href="', a = n.langCode, o = a || t.langCode, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "langCode", { hash: {} })), s += d(o) + 'newsletter-signup/" class="newsletter-signup-button">', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.newsletterButton, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.newsletterButton", { hash: {} })), s += d(o) + '</a>\n    </div>\n    <div class="social-section ">\n    	<h2 tabindex="0" role="heading">', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.socialShareCta, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.socialShareCta", { hash: {} })); if (o || o === 0) s += o; s += '</h2>\n    	<div id="social-share-buttons">\n    		<!-- Gigya social share buttons added by javascipt go here --> \n    	</div>\n    </div>\n  </div>\n  <div class="clearfix"></div>\n  </div>\n  <div class="testimonials" id=\'testimonials\' name=\'testimonials\'>\n    <h2>', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.testimonialHeading, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.testimonialHeading", { hash: {} })); if (o || o === 0) s += o; s += '</h2>\n    <div class="inner">\n    ', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.testimonials, a = n.eachWithIndexPlusOne, u = a || t.eachWithIndexPlusOne, f = l.program(3, g, i), f.hash = {}, f.fn = f, f.inverse = l.noop, a && typeof u === c ? o = u.call(t, o, f) : o = v.call(t, u, o, f); if (o || o === 0) s += o; return s += '\n    </div>\n  </div>\n  <div class="sign-up-now-button">\n    <button class="btnLogin showRegisterScreen">', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.signUpNowBtn, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.signUpNowBtn", { hash: {} })), s += d(o) + "</button>\n  </div>\n</div>", s }) }), require.register("views/templates/partials/carousel", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function d(e, t, r) { var i = "", s, o; i += '\n<div class="article-carousel ', u = n.showNext, s = u || e.showNext, o = n.unless, a = f.program(2, v, t), a.hash = {}, a.fn = a, a.inverse = f.noop, s = o.call(e, s, a); if (s || s === 0) i += s; i += '">\n    <!--<button class="carousel-toggle"><span class="left"></span><span class="cursor">Close</span><span class="right"></span></button>-->\n    <button class="carousel-close" tabindex="-1"></button>\n    <ul class="parents">\n        <li class="parent logo"><a class="navLink" href="/', u = n.langCode, s = u || e.langCode, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "langCode", { hash: {} })), i += p(s) + '/" tabindex="-1"><img src="/images/logo.png" alt="DK find out!" /></a></li>', u = n.unit, s = u || e.unit, o = n["if"], a = f.program(4, m, t), a.hash = {}, a.fn = a, a.inverse = f.noop, s = o.call(e, s, a); if (s || s === 0) i += s; u = n.article, s = u || e.article, o = n["if"], a = f.program(6, g, t), a.hash = {}, a.fn = a, a.inverse = f.noop, s = o.call(e, s, a); if (s || s === 0) i += s; u = n.parentArticle, s = u || e.parentArticle, o = n["if"], a = f.programWithDepth(y, t, r), a.hash = {}, a.fn = a, a.inverse = f.noop, s = o.call(e, s, a); if (s || s === 0) i += s; i += '<span class="separator"></span>\n    </ul>\n    <ul class="scrollable">\n    ', u = n.carousel, s = u || e.carousel, o = n.each, a = f.programWithDepth(w, t, e, r), a.hash = {}, a.fn = a, a.inverse = f.noop, s = o.call(e, s, a); if (s || s === 0) i += s; i += '<li class="child holding"></li>\n    </ul>\n    <a class="discoverIcon navLink" href="/', u = n.langCode, s = u || e.langCode, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "langCode", { hash: {} })), i += p(s) + '/discover/"><img src="/images/discover-icon.png" alt="Discover" /></a>\n    ', u = n.showNext, s = u || e.showNext, o = n["if"], a = f.programWithDepth(x, t, e, r), a.hash = {}, a.fn = a, a.inverse = f.noop, s = o.call(e, s, a); if (s || s === 0) i += s; return i += "\n</div>\n", i } function v(e, t) { return "noSiblings" } function m(e, t) { var r = "", i; return r += '<li class="parent"><a class="navLink" href="/', u = n.langCode, i = u || e.langCode, typeof i === l ? i = i.call(e, { hash: {} }) : i === h && (i = c.call(e, "langCode", { hash: {} })), r += p(i) + "/", u = n.object, i = u || e.object, i = i === null || i === undefined || i === !1 ? i : i.subjectFriendly, typeof i === l ? i = i.call(e, { hash: {} }) : i === h && (i = c.call(e, "object.subjectFriendly", { hash: {} })), r += p(i) + '/">', u = n.object, i = u || e.object, i = i === null || i === undefined || i === !1 ? i : i.subject, typeof i === l ? i = i.call(e, { hash: {} }) : i === h && (i = c.call(e, "object.subject", { hash: {} })), r += p(i) + "</a></li>", r } function g(e, t) { var r = "", i; return r += '<li class="parent"><a class="navLink" href="/', u = n.langCode, i = u || e.langCode, typeof i === l ? i = i.call(e, { hash: {} }) : i === h && (i = c.call(e, "langCode", { hash: {} })), r += p(i) + "/", u = n.object, i = u || e.object, i = i === null || i === undefined || i === !1 ? i : i.subjectFriendly, typeof i === l ? i = i.call(e, { hash: {} }) : i === h && (i = c.call(e, "object.subjectFriendly", { hash: {} })), r += p(i) + "/", u = n.object, i = u || e.object, i = i === null || i === undefined || i === !1 ? i : i.unitFriendly, typeof i === l ? i = i.call(e, { hash: {} }) : i === h && (i = c.call(e, "object.unitFriendly", { hash: {} })), r += p(i) + '/">', u = n.object, i = u || e.object, i = i === null || i === undefined || i === !1 ? i : i.unit, typeof i === l ? i = i.call(e, { hash: {} }) : i === h && (i = c.call(e, "object.unit", { hash: {} })), r += p(i) + "</a></li>", r } function y(e, t, r) { var i = "", s, o; i += '<li class="parent"><a class="navLink" href="', u = n.parentArticle, s = u || e.parentArticle, s = s === null || s === undefined || s === !1 ? s : s.url, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "parentArticle.url", { hash: {} })), i += p(s), u = n.preview, s = u || r.preview, o = n["if"], a = f.program(9, b, t), a.hash = {}, a.fn = a, a.inverse = f.noop, s = o.call(e, s, a); if (s || s === 0) i += s; return i += '">', u = n.parentArticle, s = u || e.parentArticle, s = s === null || s === undefined || s === !1 ? s : s.title, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "parentArticle.title", { hash: {} })), i += p(s) + "</a></li>", i } function b(e, t) { var r = "", i; return r += "id=", u = n.parentArticle, i = u || e.parentArticle, i = i === null || i === undefined || i === !1 ? i : i.id, typeof i === l ? i = i.call(e, { hash: {} }) : i === h && (i = c.call(e, "parentArticle.id", { hash: {} })), r += p(i) + "/", r } function w(e, t, r, i) { var s = "", o, d, v; s += '\n        <li class="child ', u = n.objectType, o = u || i.objectType, u = n.titleFriendly, d = u || e.titleFriendly, u = n.isSelected, v = u || e.isSelected, typeof v === l ? o = v.call(e, d, o, { hash: {} }) : v === h ? o = c.call(e, "isSelected", d, o, { hash: {} }) : o = v, s += p(o) + '"><a href="', u = n.url, o = u || e.url, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "url", { hash: {} })), s += p(o), u = n.preview, o = u || i.preview, d = n["if"], a = f.programWithDepth(E, t, r), a.hash = {}, a.fn = a, a.inverse = f.noop, o = d.call(e, o, a); if (o || o === 0) s += o; return s += '" class="navLink carouselLink"><div class="image-wrapper"><img src="', u = n.imgLocation, o = u || r.imgLocation, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "...imgLocation", { hash: {} })), s += p(o), u = n.imgThumb, o = u || r.imgThumb, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "...imgThumb", { hash: {} })), s += p(o), u = n.themeImage, o = u || e.themeImage, o = o === null || o === undefined || o === !1 ? o : o.publicID, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "themeImage.publicID", { hash: {} })), s += p(o) + '.png" alt="', u = n.title, o = u || e.title, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "title", { hash: {} })), s += p(o) + '" role="presentation" /></div><span class="status-', u = n.published, o = u || e.published, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "published", { hash: {} })), s += p(o) + '">', u = n.title, o = u || e.title, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "title", { hash: {} })), s += p(o) + "</span></a></li>\n        ", s } function E(e, t, r) { var i, s; return u = n.unit, i = u || r.unit, s = n["if"], a = f.program(13, S, t), a.hash = {}, a.fn = a, a.inverse = f.noop, i = s.call(e, i, a), i || i === 0 ? i : "" } function S(e, t) { var r = "", i; return r += "id=", u = n.id, i = u || e.id, typeof i === l ? i = i.call(e, { hash: {} }) : i === h && (i = c.call(e, "id", { hash: {} })), r += p(i) + "/", r } function x(e, t, r, i) { var s = "", o, d; s += "\n    <div class=\"article-nav\">\n        <ul>\n            <!-- TODO is type='next' sufficient for IE10 & opera to identify flip ahead content? -->\n            ", u = n.showPrevious, o = u || e.showPrevious, d = n["if"], a = f.programWithDepth(T, t, r, i), a.hash = {}, a.fn = a, a.inverse = f.noop, o = d.call(e, o, a); if (o || o === 0) s += o; s += '\n            <li class="right"><a href="', u = n.next, o = u || e.next, o = o === null || o === undefined || o === !1 ? o : o.url, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "next.url", { hash: {} })), s += p(o), u = n.preview, o = u || i.preview, d = n["if"], a = f.programWithDepth(k, t, i), a.hash = {}, a.fn = a, a.inverse = f.noop, o = d.call(e, o, a); if (o || o === 0) s += o; return s += '" title="Find out about ', u = n.next, o = u || e.next, o = o === null || o === undefined || o === !1 ? o : o.title, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "next.title", { hash: {} })), s += p(o) + '" type="next" class="next navLink" tabindex="-1"><span class="title">', u = n.next, o = u || e.next, o = o === null || o === undefined || o === !1 ? o : o.title, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "next.title", { hash: {} })), s += p(o) + ' </span>&rsaquo;</a></li>\n        </ul>\n        <div class="clear"></div>\n    </div>\n    ', s } function T(e, t, r, i) { var s = "", o, d; s += '\n            <li class="left"><a href="', u = n.previous, o = u || e.previous, o = o === null || o === undefined || o === !1 ? o : o.url, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "previous.url", { hash: {} })), s += p(o), u = n.preview, o = u || i.preview, d = n["if"], a = f.programWithDepth(N, t, r), a.hash = {}, a.fn = a, a.inverse = f.noop, o = d.call(e, o, a); if (o || o === 0) s += o; return s += '" title="Find out about ', u = n.previous, o = u || e.previous, o = o === null || o === undefined || o === !1 ? o : o.title, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "previous.title", { hash: {} })), s += p(o) + '" type="prev" class="previous navLink" tabindex="-1">&lsaquo;<span class="title"> ', u = n.previous, o = u || e.previous, o = o === null || o === undefined || o === !1 ? o : o.title, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "previous.title", { hash: {} })), s += p(o) + "</span></a></li>\n            ", s } function N(e, t, r) { var i, s; return u = n.unit, i = u || r.unit, s = n["if"], a = f.program(18, C, t), a.hash = {}, a.fn = a, a.inverse = f.noop, i = s.call(e, i, a), i || i === 0 ? i : "" } function C(e, t) { var r = "", i; return r += "id=", u = n.previous, i = u || e.previous, i = i === null || i === undefined || i === !1 ? i : i.id, typeof i === l ? i = i.call(e, { hash: {} }) : i === h && (i = c.call(e, "previous.id", { hash: {} })), r += p(i) + "/", r } function k(e, t, r) { var i, s; return u = n.unit, i = u || r.unit, s = n["if"], a = f.program(21, L, t), a.hash = {}, a.fn = a, a.inverse = f.noop, i = s.call(e, i, a), i || i === 0 ? i : "" } function L(e, t) { var r = "", i; return r += "id=", u = n.next, i = u || e.next, i = i === null || i === undefined || i === !1 ? i : i.id, typeof i === l ? i = i.call(e, { hash: {} }) : i === h && (i = c.call(e, "next.id", { hash: {} })), r += p(i) + "/", r } n = n || e.helpers; var s, o, u, a, f = this, l = "function", c = n.helperMissing, h = void 0, p = this.escapeExpression; return u = n.carousel, s = u || t.carousel, o = n["if"], a = f.programWithDepth(d, i, t), a.hash = {}, a.fn = a, a.inverse = f.noop, s = o.call(t, s, a), s || s === 0 ? s : "" }) }), require.register("views/templates/partials/categories", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function v(e, t) { var r = "", i, s; r += '<div class="thumbs col-', a = n.categories, i = a || e.categories, i = i === null || i === undefined || i === !1 ? i : i.length, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "categories.length", { hash: {} })), r += d(i) + '">', a = n.categories, i = a || e.categories, s = n.each, f = l.programWithDepth(m, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; return r += "</div>", r } function m(e, t, r) { var i = "", s; return i += "<article class='thumb ", a = n.status, s = a || e.status, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "status", { hash: {} })), i += d(s) + "'><a href=\"", a = n.url, s = a || e.url, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "url", { hash: {} })), i += d(s) + '" class="pageLink" tabindex="0"><img src=\'', a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgLocation", { hash: {} })), i += d(s), a = n.imgCrop, s = a || r.imgCrop, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgCrop", { hash: {} })), i += d(s), a = n.themeImage, s = a || e.themeImage, s = s === null || s === undefined || s === !1 ? s : s.publicID, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "themeImage.publicID", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgExt", { hash: {} })), i += d(s) + "' alt='", a = n.themeImage, s = a || e.themeImage, s = s === null || s === undefined || s === !1 ? s : s.alt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "themeImage.alt", { hash: {} })), i += d(s) + "' role='presentation' /><h3 class=\"thumbTitle\">", a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + "</h3></a></article>", i } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression; a = n.categories, o = a || t.categories, u = n["if"], f = l.program(1, v, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s += "\n", s }) }), require.register("views/templates/partials/components", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function m(e, t, r) { var i = "", s, o; i += "\n        ", a = n.slides, s = a || e.slides, o = n["if"], f = l.programWithDepth(g, t, r), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; return i += "\n    ", i } function g(e, t, r) { var i = "", s, o; i += '\n        <div class="component ', a = n.titleFriendly, s = a || e.titleFriendly, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "titleFriendly", { hash: {} })), i += d(s) + " slides-", a = n.slides, s = a || e.slides, s = s === null || s === undefined || s === !1 ? s : s.length, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "slides.length", { hash: {} })), i += d(s) + '" data-component="', a = n.titleFriendly, s = a || e.titleFriendly, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "titleFriendly", { hash: {} })), i += d(s) + '">\n            <header class="comp-header">\n                <h3 tabindex="0" role="heading">', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })); if (s || s === 0) i += s; i += '</h3>\n            </header>\n            <div class="comp-content"> \n                <div class="comp-slides">\n                    ', a = n.slides, s = a || e.slides, a = n.eachWithIndexPlusOne, o = a || e.eachWithIndexPlusOne, f = l.programWithDepth(y, t, e, r), f.hash = {}, f.fn = f, f.inverse = l.noop, a && typeof o === c ? s = o.call(e, s, f) : s = v.call(e, o, s, f); if (s || s === 0) i += s; i += "\n                </div>\n                ", a = n.slides, s = a || e.slides, a = n.ifCompSlides, o = a || e.ifCompSlides, f = l.program(14, T, t), f.hash = {}, f.fn = f, f.inverse = l.noop, a && typeof o === c ? s = o.call(e, s, f) : s = v.call(e, o, s, f); if (s || s === 0) i += s; return i += "\n            </div>\n        </div>\n        ", i } function y(e, t, r, i) { var s = "", o, u; s += '\n                    <article class="comp-slide" data-index="', a = n.index, o = a || e.index, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "index", { hash: {} })), s += d(o) + '" itemscope itemtype="http://schema.org/ImageObject">\n                        <', a = n.url, o = a || e.url, u = n["if"], f = l.programWithDepth(b, t, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; a = n.url, o = a || e.url, u = n.unless, f = l.program(6, w, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; s += ' class="pageLink slide-link" tabindex="0">\n                            ', a = n.image, o = a || e.image, u = n["if"], f = l.programWithDepth(E, t, r, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; s += '\n                            <span itemprop="description">', a = n.description, o = a || e.description, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "description", { hash: {} })); if (o || o === 0) s += o; s += "</span>\n                        </", a = n.url, o = a || e.url, u = n["if"], f = l.program(10, S, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; a = n.url, o = a || e.url, u = n.unless, f = l.program(12, x, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; return s += ">\n                    </article>\n                    ", s } function b(e, t, r) { var i = "", s; return i += 'a href="', a = n.langCode, s = a || r.langCode, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "............langCode", { hash: {} })), i += d(s), a = n.url, s = a || e.url, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "url", { hash: {} })), i += d(s) + '"', i } function w(e, t) { return "span" } function E(e, t, r, i) { var s = "", o; return s += '\n                            <div class="image-wrapper">\n                                <img itemprop="contentURL" src="', a = n.imgLocation, o = a || i.imgLocation, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "............imgLocation", { hash: {} })), s += d(o), a = n.imgGrid, o = a || i.imgGrid, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "............imgGrid", { hash: {} })), s += d(o), a = n.image, o = a || e.image, o = o === null || o === undefined || o === !1 ? o : o.publicID, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "image.publicID", { hash: {} })), s += d(o), a = n.imgExt, o = a || i.imgExt, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "............imgExt", { hash: {} })), s += d(o) + '" alt="', a = n.image, o = a || e.image, o = o === null || o === undefined || o === !1 ? o : o.alt, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "image.alt", { hash: {} })), s += d(o) + '" role="presentation" /><meta itemprop="name" content="', a = n.title, o = a || r.title, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "......title", { hash: {} })), s += d(o) + '" />\n                            </div>', s } function S(e, t) { return "a" } function x(e, t) { return "span" } function T(e, t) { return '\n                <div class="comp-nav">\n                    <button class="navBtn prev" aria-label="Previous tabpanel"><span>&lsaquo;</span></button>\n                    <button class="navBtn next" aria-label="Next tabpanel"><span>&rsaquo;</span></button>\n                </div>\n                ' } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression, v = n.blockHelperMissing; s += '<div class="components">\n  <h2>', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.kidsPromoHeader, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.kidsPromoHeader", { hash: {} })); if (o || o === 0) s += o; s += "</h2>\n    ", a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.highlights, u = n.each, f = l.programWithDepth(m, i, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s += "\n</div>", s }) }), require.register("views/templates/partials/discover_row", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function v(e, t, r) { var i = "", s, o, u, v; i += "\n        <div class='thumb ", a = n.objectType, s = a || r.objectType, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...objectType", { hash: {} })), i += d(s) + "-thumb ", a = n.status, s = a || e.status, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "status", { hash: {} })), i += d(s) + " ", a = n.parent, s = a || r.parent, a = n.objectType, o = a || r.objectType, a = n.titleFriendly, u = a || e.titleFriendly, a = n.isSelected, v = a || e.isSelected, typeof v === c ? s = v.call(e, u, o, s, { hash: {} }) : v === p ? s = h.call(e, "isSelected", u, o, s, { hash: {} }) : s = v, i += d(s) + "'> \n            <div class='thumb-wrapper ", a = n.objectType, s = a || r.objectType, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...objectType", { hash: {} })), i += d(s) + "-wrapper'>\n                <a href=\"", a = n.url, s = a || e.url, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "url", { hash: {} })), i += d(s), a = n.preview, s = a || r.preview, o = n["if"], f = l.program(2, m, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += '" data-subject="', a = n.subjectFriendly, s = a || e.subjectFriendly, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "subjectFriendly", { hash: {} })), i += d(s) + '" data-unit="', a = n.unitFriendly, s = a || e.unitFriendly, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "unitFriendly", { hash: {} })), i += d(s) + '" data-article="', a = n.titleFriendly, s = a || e.titleFriendly, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "titleFriendly", { hash: {} })), i += d(s) + '" class="', a = n.objectType, s = a || r.objectType, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...objectType", { hash: {} })), i += d(s) + " pageLink\"><div class='image-wrapper'><img src='", a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgLocation", { hash: {} })), i += d(s), a = n.imgCrop, s = a || r.imgCrop, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgCrop", { hash: {} })), i += d(s), a = n.themeImage, s = a || e.themeImage, s = s === null || s === undefined || s === !1 ? s : s.publicID, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "themeImage.publicID", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgExt", { hash: {} })), i += d(s) + "' alt='", a = n.themeImage, s = a || e.themeImage, s = s === null || s === undefined || s === !1 ? s : s.alt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "themeImage.alt", { hash: {} })), i += d(s) + "' /></div><span class=\"status-", a = n.published, s = a || e.published, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "published", { hash: {} })), i += d(s) + '">', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + "</span><div class='roundel'></div>\n                <div class=\"clear\"></div></a>\n                ", a = n.children, s = a || e.children, a = n.objectType, o = a || r.objectType, a = n.hasCursor, u = a || e.hasCursor, typeof u === c ? s = u.call(e, o, s, { hash: {} }) : u === p ? s = h.call(e, "hasCursor", o, s, { hash: {} }) : s = u; if (s || s === 0) i += s; return i += "\n            </div>\n        </div>\n        ", i } function m(e, t) { var r = "", i; return r += "id=", a = n.id, i = a || e.id, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "id", { hash: {} })), r += d(i) + "/", r } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression; s += '<!-- TODO dynamic label & row count -->\n<div class="', a = n.objectType, o = a || t.objectType, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "objectType", { hash: {} })), s += d(o) + "-row row row-", a = n.rowNumber, o = a || t.rowNumber, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "rowNumber", { hash: {} })), s += d(o) + '">\n    <div class="row-inner" style="width: ', a = n.objects, o = a || t.objects, o = o === null || o === undefined || o === !1 ? o : o.length, a = n.rowWidth, u = a || t.rowWidth, typeof u === c ? o = u.call(t, o, { hash: {} }) : u === p ? o = h.call(t, "rowWidth", o, { hash: {} }) : o = u, s += d(o) + ';">\n        ', a = n.objects, o = a || t.objects, u = n.each, f = l.programWithDepth(v, i, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s += '\n        <div class="clear"></div>\n    </div>\n</div>\n', s }) }), require.register("views/templates/partials/explore_section", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function v(e, t) { var r = "", i; return r += " \n            <article class='explore-article'>\n                <a class='component explore-article-link slide-link slides-1 pageLink' href=\"/", a = n.langCode, i = a || e.langCode, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "langCode", { hash: {} })), r += d(i) + "/explore/", a = n.titleFriendly, i = a || e.titleFriendly, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "titleFriendly", { hash: {} })), r += d(i) + '/">\n                    <div class="image-wrapper">\n                        <img itemprop="contentURL" src="http://res.cloudinary.com/dk-find-out/image/upload/q_80,w_320/', a = n.image, i = a || e.image, i = i === null || i === undefined || i === !1 ? i : i.publicID, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "image.publicID", { hash: {} })), r += d(i) + '.jpg" alt="', a = n.title, i = a || e.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "title", { hash: {} })), r += d(i) + '" role="presentation">\n                    </div>\n                    <span itemprop="description">\n                        <p>', a = n.title, i = a || e.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "title", { hash: {} })), r += d(i) + "</p>                                    \n                    </span>\n                </a>\n             </article>\n        ", r } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression; s += '<div class="component explore" data-component="explore">\n    <header class="comp-header">\n        <h3 tabindex="0" role="heading">Explore</h3>   \n    </header>\n    <div class="comp-content"> \n        ', a = n.exploreArticles, o = a || t.exploreArticles, u = n.each, f = l.program(1, v, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s += '\n    </div>\n    <footer class="explore-component-footer">\n        <a class="see-more-link pageLink" href="/', a = n.langCode, o = a || t.langCode, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "langCode", { hash: {} })), s += d(o) + '/explore/">See more &gt;&gt;</a>\n    </footer>\n</div>\n', s }) }), require.register("views/templates/partials/find_out_more", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function v(e, t) { var r = "", i; return r += '\n  <div class="article">\n    <a class="pageLink" href="/', a = n.langCode, i = a || e.langCode, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "langCode", { hash: {} })), r += d(i), a = n.url, i = a || e.url, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "url", { hash: {} })), r += d(i) + '">\n      <img src="http://res.cloudinary.com/dk-find-out/image/upload/c_scale,w_195/v1428499747/', a = n.images, i = a || e.images, i = i === null || i === undefined || i === !1 ? i : i[0], i = i === null || i === undefined || i === !1 ? i : i.publicID, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "images.0.publicID", { hash: {} })), r += d(i), a = n.imgExt, i = a || e.imgExt, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "imgExt", { hash: {} })), r += d(i) + '" alt="">\n      <p>', a = n.title, i = a || e.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "title", { hash: {} })), r += d(i) + '</p>\n      <p class="arrow">&gt;</p>\n    </a>\n  </div>\n', r } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression; s += '<div class="header">\n  <h3>Find out more</h3>\n</div>\n', a = n.findoutmoreArticles, o = a || t.findoutmoreArticles, u = n.each, f = l.program(1, v, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s }) }), require.register("views/templates/partials/home_li", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function v(e, t, r) { var i = "", s, o; i += "\n<li class='list-", u = n.index, s = u || e.index, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "index", { hash: {} })), i += p(s) + "' data-index=\"", u = n.index, s = u || e.index, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "index", { hash: {} })), i += p(s) + "\"><a href='", u = n.url, s = u || e.url, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "url", { hash: {} })), i += p(s) + "' class='image-wrapper pageLink'><img src='", u = n.imgLocation, s = u || r.imgLocation, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "...imgLocation", { hash: {} })), i += p(s), u = n.imgCrop, s = u || r.imgCrop, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "...imgCrop", { hash: {} })), i += p(s), u = n.publicID, s = u || e.publicID, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "publicID", { hash: {} })), i += p(s), u = n.imgExt, s = u || r.imgExt, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "...imgExt", { hash: {} })), i += p(s) + "' alt='", u = n.title, s = u || e.title, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "title", { hash: {} })), i += p(s) + "' /></a><h3><a href='", u = n.url, s = u || e.url, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "url", { hash: {} })), i += p(s) + "' class='pageLink'>", u = n.title, s = u || e.title, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "title", { hash: {} })), i += p(s) + "</a></h3><p>", u = n.summary, s = u || e.summary, o = n["if"], a = f.program(2, m, t), a.hash = {}, a.fn = a, a.inverse = f.noop, s = o.call(e, s, a); if (s || s === 0) i += s; u = n.summary, s = u || e.summary, o = n.unless, a = f.program(4, g, t), a.hash = {}, a.fn = a, a.inverse = f.noop, s = o.call(e, s, a); if (s || s === 0) i += s; i += "</p>", u = n.link, s = u || e.link, o = n["if"], a = f.program(6, y, t), a.hash = {}, a.fn = a, a.inverse = f.noop, s = o.call(e, s, a); if (s || s === 0) i += s; return i += "</li>\n", i } function m(e, t) { var r; return u = n.summary, r = u || e.summary, typeof r === l ? r = r.call(e, { hash: {} }) : r === h && (r = c.call(e, "summary", { hash: {} })), p(r) } function g(e, t) { return "Lorem ipsum dolor sit amet, consectetur adipisicing elit sed do" } function y(e, t) { var r = "", i; return r += "<a href='", u = n.url, i = u || e.url, typeof i === l ? i = i.call(e, { hash: {} }) : i === h && (i = c.call(e, "url", { hash: {} })), r += p(i) + "' class='actionLink pageLink'>", u = n.link, i = u || e.link, typeof i === l ? i = i.call(e, { hash: {} }) : i === h && (i = c.call(e, "link", { hash: {} })), r += p(i) + "</a>", r } n = n || e.helpers; var s, o, u, a, f = this, l = "function", c = n.helperMissing, h = void 0, p = this.escapeExpression, d = n.blockHelperMissing; return u = n.objects, s = u || t.objects, u = n.eachWithIndexPlusOne, o = u || t.eachWithIndexPlusOne, a = f.programWithDepth(v, i, t), a.hash = {}, a.fn = a, a.inverse = f.noop, u && typeof o === l ? s = o.call(t, s, a) : s = d.call(t, o, s, a), s || s === 0 ? s : "" }) }), require.register("views/templates/partials/links", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function d(e, t, r) { var i = "", s; i += '\n  <li>\n      <a href="/', u = n.langCode, s = u || r.langCode, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "...langCode", { hash: {} })), i += p(s), u = n.url, s = u || e.url, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "url", { hash: {} })), i += p(s) + '">\n          <div class="imageContainer">\n            <img src="', u = n.imgLocation, s = u || r.imgLocation, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "...imgLocation", { hash: {} })), i += p(s), u = n.imgLink, s = u || r.imgLink, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "...imgLink", { hash: {} })), i += p(s), u = n.themeImage, s = u || e.themeImage, s = s === null || s === undefined || s === !1 ? s : s.publicID, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "themeImage.publicID", { hash: {} })), i += p(s), u = n.imgExt, s = u || r.imgExt, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "...imgExt", { hash: {} })), i += p(s) + '" alt="', u = n.title, s = u || e.title, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "title", { hash: {} })), i += p(s) + '">\n          </div>\n          <h3>', u = n.title, s = u || e.title, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "title", { hash: {} })); if (s || s === 0) i += s; return i += "</h3>\n      </a>\n  </li>\n", i } n = n || e.helpers; var s, o, u, a, f = this, l = "function", c = n.helperMissing, h = void 0, p = this.escapeExpression; return u = n.links, s = u || t.links, o = n.each, a = f.programWithDepth(d, i, t), a.hash = {}, a.fn = a, a.inverse = f.noop, s = o.call(t, s, a), s || s === 0 ? s : "" }) }), require.register("views/templates/partials/loading", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { n = n || e.helpers; var s, o = this; return '<div class="loadingGif">\n    <img src="/images/ajax-loader.gif" border="0" alt="Loading..." />\n</div>' }) }), require.register("views/templates/partials/search_form", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { n = n || e.helpers; var s = "", o, u, a = this, f = "function", l = n.helperMissing, c = void 0, h = this.escapeExpression; return s += '<div class="searchBox" itemscope itemtype="http://schema.org/WebSite">\n    <form class="searchForm ui-front" role="search" itemprop="potentialAction" itemscope itemtype="http://schema.org/SearchAction">\n    	<meta itemprop="target" content="http://www.dkfindout.com/search/{query}"/>\n        <input type="text" class="searchKeyword" placeholder="', u = n.placeholder, o = u || t.placeholder, typeof o === f ? o = o.call(t, { hash: {} }) : o === c && (o = l.call(t, "placeholder", { hash: {} })), s += h(o) + '" aria-required="true" aria-label="', u = n.placeholder, o = u || t.placeholder, typeof o === f ? o = o.call(t, { hash: {} }) : o === c && (o = l.call(t, "placeholder", { hash: {} })), s += h(o) + '" itemprop="query-input" name="query">\n        <input type="submit" class="searchSubmit" value="Search &rsaquo;">\n    </form>\n</div>', s }) }), require.register("views/templates/partials/search_results", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function m(e, t, r) { var i = "", s, o; i += '\n    <p class="count" role="heading" tabindex="0">There are <span class="number">', a = n.objects, s = a || e.objects, s = s === null || s === undefined || s === !1 ? s : s.length, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "objects.length", { hash: {} })), i += d(s) + '</span> results for <span class="keyword">"', a = n.keyword, s = a || e.keyword, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "keyword", { hash: {} })), i += d(s) + '"</span></p>\n    <div class="articles">\n        ', a = n.objects, s = a || e.objects, o = n.each, f = l.programWithDepth(g, t, e, r), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; return i += '\n        <div class="clear"></div>\n    </div>\n', i } function g(e, t, r, i) { var s = "", o, u; s += "\n        <article class='article type-", a = n.type, o = a || e.type, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "type", { hash: {} })), s += d(o) + "'>\n            <div class=\"article-inner\">\n            <a href='", a = n.url, o = a || e.url, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "url", { hash: {} })), s += d(o) + "' class='pageLink'>\n                <div class='image-wrapper'>\n                    ", a = n.themeImage, o = a || e.themeImage, u = n["if"], f = l.programWithDepth(y, t, e, r), f.hash = {}, f.fn = f, f.inverse = l.programWithDepth(b, t, e, r), o = u.call(e, o, f); if (o || o === 0) s += o; s += "\n                </div>\n                <h3>", a = n.title, o = a || e.title, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "title", { hash: {} })), s += d(o) + "</h3>           \n                <p>", a = n.introSummary, o = a || e.introSummary, a = n.formatSummary, u = a || e.formatSummary, typeof u === c ? o = u.call(e, o, { hash: {} }) : u === p ? o = h.call(e, "formatSummary", o, { hash: {} }) : o = u, s += d(o) + "</p>\n            </a>\n            ", a = n.planningMode, o = a || i.planningMode, u = n["if"], f = l.programWithDepth(w, t, r), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; return s += "\n            </div>\n        </article>\n        ", s } function y(e, t, r, i) { var s = "", o; return s += '<img role="presentation" src=\'', a = n.imgLocation, o = a || i.imgLocation, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "......imgLocation", { hash: {} })), s += d(o), a = n.imgCrop, o = a || i.imgCrop, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "......imgCrop", { hash: {} })), s += d(o), a = n.themeImage, o = a || r.themeImage, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "...themeImage", { hash: {} })), s += d(o), a = n.imgExt, o = a || i.imgExt, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "......imgExt", { hash: {} })), s += d(o) + "' alt='", a = n.title, o = a || r.title, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "...title", { hash: {} })), s += d(o) + "' />", s } function b(e, t, r, i) { var s = "", o; return s += '<img role="presentation" src=\'', a = n.imgLocation, o = a || i.imgLocation, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "......imgLocation", { hash: {} })), s += d(o), a = n.imgCrop, o = a || i.imgCrop, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "......imgCrop", { hash: {} })), s += d(o) + "b_rgb:fff,bo_10px_solid_rgb:fff,c_pad,e_grayscale,o_50/icons/logo.jpg' alt='", a = n.title, o = a || r.title, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "...title", { hash: {} })), s += d(o) + "' />", s } function w(e, t, r) { var i = "", s, o, u; i += "\n                ", a = n.lessonPlanContent, s = a || r.lessonPlanContent, o = e, a = n.objectIsInModels, u = a || e.objectIsInModels, f = l.program(8, E, t), f.hash = {}, f.fn = f, f.inverse = l.program(10, S, t), a && typeof u === c ? s = u.call(e, o, s, f) : s = v.call(e, u, o, s, f); if (s || s === 0) i += s; return i += "\n            ", i } function E(e, t) { var r = "", i; return r += '\n                    <button class="planBtn add hidden" data-id="', a = n.id, i = a || e.id, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "id", { hash: {} })), r += d(i) + '">Add to plan</button>\n                    <button class="planBtn remove" data-id="', a = n.id, i = a || e.id, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "id", { hash: {} })), r += d(i) + '">Remove from plan</button>\n                ', r } function S(e, t) { var r = "", i; return r += '\n                    <button class="planBtn add" data-id="', a = n.id, i = a || e.id, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "id", { hash: {} })), r += d(i) + '">Add to plan</button>\n                    <button class="planBtn remove hidden" data-id="', a = n.id, i = a || e.id, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "id", { hash: {} })), r += d(i) + '">Remove from plan</button>\n                ', r } function x(e, t) { return "\n    <p class=\"count no-results\">We're sorry, but dkfindout doesn't have what you're looking for at the moment. We're adding new pages to the site all the time, so please try again later. If you have any requests for subjects you'd like to find out about, please email <a href=\"mailto:editor@dkfindout.com\">editor@dkfindout.com</a></p>\n" } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression, v = n.blockHelperMissing; a = n.objects, o = a || t.objects, u = n["if"], f = l.programWithDepth(m, i, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += "\n", a = n.objects, o = a || t.objects, u = n.unless, f = l.program(12, x, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s += "\n\n    ", s }) }), require.register("views/templates/partials/thumbs", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function d(e, t) { var r = "", i, s; r += "\n", u = n.articleThumbs, i = u || e.articleThumbs, s = n["if"], a = f.program(2, v, t), a.hash = {}, a.fn = a, a.inverse = f.programWithDepth(m, t, e), i = s.call(e, i, a); if (i || i === 0) r += i; return r += "\n", r } function v(e, t) { var r = "", i, s, o, a; r += '\n<div class="thumbs grid">\n    <article class="column-width"></article>\n    ', u = n.object, i = u || e.object, i = i === null || i === undefined || i === !1 ? i : i.unitFriendly, u = n.object, s = u || e.object, s = s === null || s === undefined || s === !1 ? s : s.subjectFriendly, u = n.thumbs, o = u || e.thumbs, u = n.formatThumbs, a = u || e.formatThumbs, typeof a === l ? i = a.call(e, o, s, i, { hash: {} }) : a === h ? i = c.call(e, "formatThumbs", o, s, i, { hash: {} }) : i = a; if (i || i === 0) r += i; return r += "\n</div>\n", r } function m(e, t, r) { var i = "", s, o; i += '\n<div class="thumbs col-', u = n.thumbs, s = u || e.thumbs, s = s === null || s === undefined || s === !1 ? s : s.length, typeof s === l ? s = s.call(e, { hash: {} }) : s === h && (s = c.call(e, "thumbs.length", { hash: {} })), i += p(s) + '">', u = n.thumbs, s = u || e.thumbs, o = n.each, a = f.programWithDepth(g, t, e, r), a.hash = {}, a.fn = a, a.inverse = f.noop, s = o.call(e, s, a); if (s || s === 0) i += s; return i += '<div class="clear"></div></div>\n', i } function g(e, t, r, i) { var s = "", o, d; s += "<article class='thumb hasSummary'><a href=\"", u = n.url, o = u || e.url, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "url", { hash: {} })), s += p(o), u = n.preview, o = u || i.preview, d = n["if"], a = f.program(6, y, t), a.hash = {}, a.fn = a, a.inverse = f.noop, o = d.call(e, o, a); if (o || o === 0) s += o; s += '" class="pageLink" tabindex="0"><img role="presentation" src=\'', u = n.imgLocation, o = u || r.imgLocation, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "...imgLocation", { hash: {} })), s += p(o), u = n.imgCrop, o = u || r.imgCrop, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "...imgCrop", { hash: {} })), s += p(o), u = n.themeImage, o = u || e.themeImage, o = o === null || o === undefined || o === !1 ? o : o.publicID, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "themeImage.publicID", { hash: {} })), s += p(o), u = n.imgExt, o = u || r.imgExt, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "...imgExt", { hash: {} })), s += p(o) + "' alt='", u = n.themeImage, o = u || e.themeImage, o = o === null || o === undefined || o === !1 ? o : o.alt, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "themeImage.alt", { hash: {} })), s += p(o) + '\' /><h3 class="thumbTitle"><span class="status-', u = n.published, o = u || e.published, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "published", { hash: {} })), s += p(o) + '">', u = n.title, o = u || e.title, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "title", { hash: {} })), s += p(o) + '</span><button tabindex="-1" class="summaryCursor"></button></h3></a><div class="summary">', u = n.introSummary, o = u || e.introSummary, typeof o === l ? o = o.call(e, { hash: {} }) : o === h && (o = c.call(e, "introSummary", { hash: {} })); if (o || o === 0) s += o; return s += "</div></article>", s } function y(e, t) { var r = "", i; return r += "id=", u = n.id, i = u || e.id, typeof i === l ? i = i.call(e, { hash: {} }) : i === h && (i = c.call(e, "id", { hash: {} })), r += p(i) + "/", r } n = n || e.helpers; var s, o, u, a, f = this, l = "function", c = n.helperMissing, h = void 0, p = this.escapeExpression; return u = n.thumbs, s = u || t.thumbs, o = n["if"], a = f.program(1, d, i), a.hash = {}, a.fn = a, a.inverse = f.noop, s = o.call(t, s, a), s || s === 0 ? s : "" }) }), require.register("views/templates/private_mode", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { n = n || e.helpers; var s = "", o, u, a = this, f = "function", l = n.helperMissing, c = void 0; s += '<div id="private_mode_template">\n    <header>\n        <h1><a class="homeLink" href="/"><img itemprop="logo" role="presentation" class="logo" src="/images/logo.png" alt="DK Find Out!" /></a></h1>\n    </header>\n    <div>\n        <p>', u = n.privateBrowsingText, o = u || t.privateBrowsingText, typeof o === f ? o = o.call(t, { hash: {} }) : o === c && (o = l.call(t, "privateBrowsingText", { hash: {} })); if (o || o === 0) s += o; return s += "</p>\n    </div>\n</div>", s }) }), require.register("views/templates/quiz", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function m(e, t, r) { var i = "", s, o; i += '\n\n    <div class="start-pane pane selected">\n        <div class="pane-inner">\n            <div class="text-wrapper ', a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.image, s = s === null || s === undefined || s === !1 ? s : s.publicID, o = n.unless, f = l.program(2, g, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += '"><header><h1>', a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.title", { hash: {} })), i += d(s) + ' <span class="quizLogo">ten minute quiz</span></h1></header>\n                ', a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.intro, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.intro", { hash: {} })); if (s || s === 0) i += s; i += '\n                <button class="startBtn">Start the quiz &rsaquo;</button>\n            </div>\n            ', a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.image, s = s === null || s === undefined || s === !1 ? s : s.publicID, o = n["if"], f = l.programWithDepth(y, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += '\n            <div class="clear"></div>\n        </div>\n    </div>\n    ', a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.questions, a = n.eachWithIndexPlusOne, o = a || e.eachWithIndexPlusOne, f = l.programWithDepth(b, t, e, r), f.hash = {}, f.fn = f, f.inverse = l.noop, a && typeof o === c ? s = o.call(e, s, f) : s = v.call(e, o, s, f); if (s || s === 0) i += s; i += '\n    <div class="end-pane pane" data-index="', a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.questions, s = s === null || s === undefined || s === !1 ? s : s.length, a = n.countPlusOne, o = a || e.countPlusOne, typeof o === c ? s = o.call(e, s, { hash: {} }) : o === p ? s = h.call(e, "countPlusOne", s, { hash: {} }) : s = o, i += d(s) + '">\n        <div class="pane-inner">\n        <span class="header">You scored:</span>\n        <div class="result"><span class="score">0</span> out of <span class="total">', a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.questions, s = s === null || s === undefined || s === !1 ? s : s.length, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.questions.length", { hash: {} })), i += d(s) + '</span><div class="time"></div></div>\n        <p class="subheader">Up for another quiz challenge?</p>\n        <article class="promo">\n            <a href="', a = n.promo, s = a || e.promo, s = s === null || s === undefined || s === !1 ? s : s.url, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "promo.url", { hash: {} })), i += d(s) + '" class="promoBtn">\n                <!--<div class="image-wrapper"><img src="', a = n.imgLocation, s = a || e.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "imgLocation", { hash: {} })), i += d(s), a = n.imgAnswer, s = a || e.imgAnswer, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "imgAnswer", { hash: {} })), i += d(s), a = n.promo, s = a || e.promo, s = s === null || s === undefined || s === !1 ? s : s.image, s = s === null || s === undefined || s === !1 ? s : s.publicID, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "promo.image.publicID", { hash: {} })), i += d(s), a = n.imgExt, s = a || e.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "imgExt", { hash: {} })), i += d(s) + '" alt="', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + '" /></div>-->\n                <div class="text-wrapper">\n                    <h3>', a = n.promo, s = a || e.promo, s = s === null || s === undefined || s === !1 ? s : s.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "promo.title", { hash: {} })), i += d(s) + "</h3>\n                    <p>", a = n.promo, s = a || e.promo, s = s === null || s === undefined || s === !1 ? s : s.promo, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "promo.promo", { hash: {} })), i += d(s) + '</p>\n                </div>\n                <div class="clear"></div>\n            </a>\n        </article>\n        <div class="clear"></div>\n        </div>\n        <button class="replayBtn">Replay <span class="icon"></span> the quiz?</button>\n    </div>\n    <ul class=\'tracker navigation hidden bullets-', a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.questions, s = s === null || s === undefined || s === !1 ? s : s.length, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.questions.length", { hash: {} })), i += d(s) + "'>", a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.questions, a = n.eachWithIndexPlusOne, o = a || e.eachWithIndexPlusOne, f = l.program(33, P, t), f.hash = {}, f.fn = f, f.inverse = l.noop, a && typeof o === c ? s = o.call(e, s, f) : s = v.call(e, o, s, f); if (s || s === 0) i += s; return i += "</ul>\n    <ul class='controls navigation hidden'><li class='prev'><button class='prevBtn'>&lsaquo;</button></li><li class='next'><button class='nextBtn'>&rsaquo;</button></li>\n    </ul>\n    <div class='timer hidden'>00:00</div>\n    <div class='quiz-header'>\n        <div class=\"logo\">DK find out!</div>\n        <h2>", a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.title", { hash: {} })), i += d(s) + ' <span class="quizLogo">ten minute quiz</span></h2>\n    </div>\n<button class="close">Close</button>\n', i } function g(e, t) { return "noImage" } function y(e, t, r) { var i = "", s; return i += '<div class="image-wrapper">\n                <img src="', a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgLocation", { hash: {} })), i += d(s), a = n.imgIntro, s = a || r.imgIntro, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgIntro", { hash: {} })), i += d(s), a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.image, s = s === null || s === undefined || s === !1 ? s : s.publicID, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.image.publicID", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgExt", { hash: {} })), i += d(s) + '" alt="', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + '" /></div>', i } function b(e, t, r, i) { var s = "", o, u; s += '\n    <div class="question-pane pane question-', a = n.index, o = a || e.index, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "index", { hash: {} })), s += d(o) + '" data-index="', a = n.index, o = a || e.index, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "index", { hash: {} })), s += d(o) + '">\n        <div class="pane-inner">\n        <div class="question ', a = n.image, o = a || e.image, o = o === null || o === undefined || o === !1 ? o : o.publicID, u = n["if"], f = l.program(7, w, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; s += '">\n            <div class="text-wrapper"><span class="header">Question ', a = n.index, o = a || e.index, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "index", { hash: {} })), s += d(o) + "</span>\n            <h3>", a = n.title, o = a || e.title, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "title", { hash: {} })), s += d(o) + "</h3>\n            </div>\n            ", a = n.image, o = a || e.image, o = o === null || o === undefined || o === !1 ? o : o.publicID, u = n["if"], f = l.programWithDepth(E, t, r), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; s += '\n            <div class="clear"></div>\n        </div>\n        <div class="answers">\n            <ul>\n                ', a = n.answers, o = a || e.answers, a = n.eachWithIndexPlusOne, u = a || e.eachWithIndexPlusOne, f = l.programWithDepth(S, t, i), f.hash = {}, f.fn = f, f.inverse = l.noop, a && typeof u === c ? o = u.call(e, o, f) : o = v.call(e, u, o, f); if (o || o === 0) s += o; return s += '\n            </ul>\n            <div class="clear"></div>\n        </div>\n        </div>\n    </div>\n    ', s } function w(e, t) { return "hasImage" } function E(e, t, r) { var i = "", s; return i += '<div class="image-wrapper"><img src="', a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "......imgLocation", { hash: {} })), i += d(s), a = n.imgQuestion, s = a || r.imgQuestion, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "......imgQuestion", { hash: {} })), i += d(s), a = n.image, s = a || e.image, s = s === null || s === undefined || s === !1 ? s : s.publicID, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "image.publicID", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "......imgExt", { hash: {} })), i += d(s) + '" alt="', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + '" /></div>', i } function S(e, t, r) { var i = "", s, o; i += '\n                <li class="answer answer-', a = n.index, s = a || e.index, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "index", { hash: {} })), i += d(s) + " ", a = n.image, s = a || e.image, o = n["if"], f = l.program(12, x, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; a = n.image, s = a || e.image, o = n.unless, f = l.program(14, T, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += " ", a = n.correct, s = a || e.correct, o = n["if"], f = l.program(16, N, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; a = n.correct, s = a || e.correct, o = n.unless, f = l.program(18, C, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += '" data-index="', a = n.index, s = a || e.index, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "index", { hash: {} })), i += d(s) + '"><div class="answer-inner"><div class="front">', a = n.image, s = a || e.image, o = n["if"], f = l.programWithDepth(k, t, r), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += '<div class="text-wrapper">', a = n.title, s = a || e.title, o = n["if"], f = l.program(22, L, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += '</div></div><div class="back">', a = n.image, s = a || e.image, o = n["if"], f = l.programWithDepth(A, t, r), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += '<div class="text-wrapper"><h4>&nbsp;</h4><p>', a = n.description, s = a || e.description, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "description", { hash: {} })), i += d(s) + "</p>", a = n.image, s = a || e.image, o = n["if"], f = l.program(26, O, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; i += '</div></div></div><button class="answerBtn ', a = n.correct, s = a || e.correct, o = n["if"], f = l.program(31, D, t), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; return i += '" data-answer="', a = n.index, s = a || e.index, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "index", { hash: {} })), i += d(s) + '"></button></li>\n                ', i } function x(e, t) { return "hasImage" } function T(e, t) { return "noImage" } function N(e, t) { return "correct" } function C(e, t) { return "incorrect" } function k(e, t, r) { var i = "", s; return i += '<div class="image-wrapper"><img src="', a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "............imgLocation", { hash: {} })), i += d(s), a = n.imgAnswer, s = a || r.imgAnswer, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "............imgAnswer", { hash: {} })), i += d(s), a = n.image, s = a || e.image, s = s === null || s === undefined || s === !1 ? s : s[0], s = s === null || s === undefined || s === !1 ? s : s.publicID, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "image.0.publicID", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "............imgExt", { hash: {} })), i += d(s) + '" alt="', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + '" /></div>', i } function L(e, t) { var r = "", i; return r += "<h4>", a = n.title, i = a || e.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "title", { hash: {} })), r += d(i) + "</h4>", r } function A(e, t, r) { var i = "", s; return i += '<div class="image-wrapper"><img src="', a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "............imgLocation", { hash: {} })), i += d(s), a = n.imgAnswer, s = a || r.imgAnswer, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "............imgAnswer", { hash: {} })), i += d(s), a = n.image, s = a || e.image, s = s === null || s === undefined || s === !1 ? s : s[0], s = s === null || s === undefined || s === !1 ? s : s.publicID, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "image.0.publicID", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "............imgExt", { hash: {} })), i += d(s) + '" alt="', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + '" /></div>', i } function O(e, t) { var r = "", i, s; a = n.correct, i = a || e.correct, s = n["if"], f = l.program(27, M, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; a = n.correct, i = a || e.correct, s = n.unless, f = l.program(29, _, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; return r } function M(e, t) { return '<img class="icon" src="/images/correct-green.png" alt="Correct" />' } function _(e, t) { return '<img class="icon" src="/images/incorrect-red.png" alt="Incorrect" />' } function D(e, t) { return "correct" } function P(e, t) { var r = "", i; return r += "<li class='bullet bullet-", a = n.index, i = a || e.index, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "index", { hash: {} })), r += d(i) + "' data-index=\"", a = n.index, i = a || e.index, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "index", { hash: {} })), r += d(i) + "\"><button class='bulletBtn' data-index=\"", a = n.index, i = a || e.index, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "index", { hash: {} })), r += d(i) + '">', a = n.index, i = a || e.index, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "index", { hash: {} })), r += d(i) + "</button></li>", r } function H(e, t) { return '\n    <div class="loadingGif hidden">\n        <img src="/images/ajax-loader.gif" border="0" alt="Loading..." />\n        <button class="close">Close</button>\n    </div>\n' } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression, v = n.blockHelperMissing; a = n.object, o = a || t.object, u = n["if"], f = l.programWithDepth(m, i, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += "\n", a = n.object, o = a || t.object, u = n.unless, f = l.program(35, H, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s }) }), require.register("views/templates/search", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { n = n || e.helpers; var s = "", o, u, a = this, f = "function", l = n.helperMissing, c = void 0; s += '<header>\n    <h1 role="heading" tabindex="0">Search</h1>\n    <button class="close" role="button">Close search</button>\n</header>\n', u = n.searchForm, o = u || t.searchForm, typeof o === f ? o = o.call(t, { hash: {} }) : o === c && (o = l.call(t, "searchForm", { hash: {} })); if (o || o === 0) s += o; return s += '\n<div id="results">\n</div>\n    ', s }) }), require.register("views/templates/select_language", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function v(e, t) { return "welcome" } function m(e, t) { var r = "", i; r += '\n    <header class="intro"><h1 tabindex="0" role="banner">', a = n.welcomeHeader, i = a || e.welcomeHeader, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "welcomeHeader", { hash: {} })); if (i || i === 0) r += i; return r += "</h1></header>\n    ", r } function g(e, t) { var r = "", i, s, o; return r += '\n            <li><a href="/', a = n.directory, i = a || e.directory, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "directory", { hash: {} })), r += d(i) + '/" class="flagBtn ', i = "language", a = n.directory, s = a || e.directory, a = n.isSelected, o = a || e.isSelected, typeof o === c ? i = o.call(e, s, i, { hash: {} }) : o === p ? i = h.call(e, "isSelected", s, i, { hash: {} }) : i = o, r += d(i) + '" aria-label="Click to select ', a = n.title, i = a || e.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "title", { hash: {} })), r += d(i) + ' as your language" id="', a = n.directory, i = a || e.directory, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "directory", { hash: {} })), r += d(i) + '"><img role="presentation" src="/images/', a = n.directory, i = a || e.directory, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "directory", { hash: {} })), r += d(i) + '.png" alt="', a = n.title, i = a || e.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "title", { hash: {} })), r += d(i) + ' flag" /><span tabindex="-1" class="title">', a = n.title, i = a || e.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "title", { hash: {} })), r += d(i) + "</span></a></li>\n            ", r } function y(e, t) { var r = "", i, s; r += '\n    <p class="footNote" tabindex="0" role="region">', a = n.languageMessage, i = a || e.languageMessage, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "languageMessage", { hash: {} })), r += d(i) + '</p>\n    <div class="cookies">\n        <p tabindex="0" role="region">', a = n.cookiesMessage, i = a || e.cookiesMessage, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "cookiesMessage", { hash: {} })), r += d(i) + "</p>\n        <p>", a = n.cookiesLink, i = a || e.cookiesLink, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "cookiesLink", { hash: {} })), r += d(i) + " ", a = n.languages, i = a || e.languages, s = n.each, f = l.program(8, b, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; return r += "</p>\n    </div>\n    ", r } function b(e, t) { var r = "", i; return r += '<a data-id="', a = n.directory, i = a || e.directory, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "directory", { hash: {} })), r += d(i) + '" href="/', a = n.directory, i = a || e.directory, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "directory", { hash: {} })), r += d(i) + '/privacy-and-cookies" class="cookiesLang">', a = n.directory, i = a || e.directory, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "directory", { hash: {} })), r += d(i) + "</a> ", r } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression; s += '<div class="inner ', a = n.messaging, o = a || t.messaging, u = n["if"], f = l.program(1, v, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '">\n    ', a = n.messaging, o = a || t.messaging, u = n["if"], f = l.program(3, m, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '\n    <div class="flags">\n        <h2 tabindex="0" role="heading">', a = n.languageHeader, o = a || t.languageHeader, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "languageHeader", { hash: {} })), s += d(o) + "</h2>\n        <ul>", a = n.languages, o = a || t.languages, u = n.each, f = l.program(5, g, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += "\n        </ul>\n    </div>\n    ", a = n.messaging, o = a || t.messaging, u = n["if"], f = l.program(7, y, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s += "\n</div>", s }) }), require.register("views/templates/show_article", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function v(e, t) { return '\n<div class="article-text-toggle display-text hide">\n    <button class="expandBtn" tabindex="-1">\n        <span>Toggle text</span>\n    </button>\n</div>' } function m(e, t) { var r = "", i, s, o, u; r += '<div class="page-container ', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.layout, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.layout", { hash: {} })), r += d(i) + "-layout ", a = n.hidden, i = a || e.hidden, s = n["if"], f = l.program(4, g, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += " ", a = n.scaling, i = a || e.scaling, s = n["if"], f = l.program(6, y, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += " ", a = n.unit, i = a || e.unit, s = n["if"], f = l.program(8, b, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; a = n.unit, i = a || e.unit, s = n.unless, f = l.program(10, w, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += '">\n    <div class="intro-container">\n        \n        <div class="inner">\n            <header>\n                <h1 class="title ', a = n.unit, i = a || e.unit, s = n["if"], f = l.program(12, E, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += " status-", a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.published, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.published", { hash: {} })), r += d(i) + '" tabindex="0" role="heading">', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.title", { hash: {} })), r += d(i) + "</h1>\n\n                ", a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.field_animation, s = n.unless, f = l.program(14, S, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += '\n            </header>\n            <div class="intro" tabindex="0" role="main">\n                ', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.intro, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.intro", { hash: {} })); if (i || i === 0) r += i; r += "\n            </div>\n            ", a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.findoutmore, s = n["if"], f = l.program(17, T, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += "\n            ", a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.pull_fact, s = n["if"], f = l.program(20, C, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += '\n\n            <ul class="article-icons cut-out-icons">\n                    ', a = n.quiz, i = a || e.quiz, s = n["if"], f = l.programWithDepth(k, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += "\n                    ", a = n.article, i = a || e.article, s = n["if"], f = l.program(24, L, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += "\n                </ul>\n\n        </div>\n\n        ", a = n.unit, i = a || e.unit, s = n["if"], f = l.program(29, M, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += '\n    </div>\n    <ul class="article-icons full-screen-icons">\n            ', a = n.quiz, i = a || e.quiz, s = n["if"], f = l.programWithDepth(P, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += "\n            ", a = n.article, i = a || e.article, s = n["if"], f = l.program(35, H, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += '\n        </ul>\n    <div class="outer-container ', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.field_animation, s = n["if"], f = l.program(40, F, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += '"> \n        ', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.field_animation, s = n["if"], f = l.program(42, I, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += " \n        ", a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.field_animation, s = n.unless, f = l.program(44, q, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += "\n    </div>\n    ", a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.layout, a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.field_content_box, a = n.object, o = a || e.object, o = o === null || o === undefined || o === !1 ? o : o.factfile, a = n.formatComponents, u = a || e.formatComponents, typeof u === c ? i = u.call(e, o, s, i, { hash: {} }) : u === p ? i = h.call(e, "formatComponents", o, s, i, { hash: {} }) : i = u; if (i || i === 0) r += i; return r += '\n</div>\n<div class="clear"></div>\n', r } function g(e, t) { return "hidden" } function y(e, t) { return "scaling" } function b(e, t) { return "unit" } function w(e, t) { return "subject" } function E(e, t) { return "hasBreadcrumb" } function S(e, t) { var r, i; return a = n.unit, r = a || e.unit, i = n["if"], f = l.program(15, x, t), f.hash = {}, f.fn = f, f.inverse = l.noop, r = i.call(e, r, f), r || r === 0 ? r : "" } function x(e, t) { return '\n                    <div class="article-text-toggle hide-text">\n                        <button class="expandBtn" tabindex="-1">\n                            <span>Toggle text</span>\n                        </button>\n                    </div>\n                ' } function T(e, t) { var r = "", i, s; r += '\n                <button class="relatedBtn">', a = n.relatedExpand, i = a || e.relatedExpand, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "relatedExpand", { hash: {} })), r += d(i) + '</button>\n                <div class="related">\n                    <ul>\n                ', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.findoutmore, s = n.each, f = l.programWithDepth(N, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; return r += "\n                    </ul>\n                </div>\n            ", r } function N(e, t, r) { var i = "", s; return i += '\n                <li><a href="', a = n.url, s = a || e.url, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "url", { hash: {} })), i += d(s) + '" class="pageLink"><div class="image-wrapper"><img src="', a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgLocation", { hash: {} })), i += d(s), a = n.imgThumb, s = a || r.imgThumb, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgThumb", { hash: {} })), i += d(s), a = n.publicID, s = a || e.publicID, s = s === null || s === undefined || s === !1 ? s : s.publicID, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "publicID.publicID", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgExt", { hash: {} })), i += d(s) + '" alt="', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + '" border="0" /></div><span>', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + "</span></a></li>\n                ", i } function C(e, t) { var r = "", i; r += '\n            <div class="pullFact" tabindex="0">', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.pull_fact, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.pull_fact", { hash: {} })); if (i || i === 0) r += i; return r += "</div>\n            ", r } function k(e, t, r) { var i = "", s; return i += '\n                    <li class="quizIcon">\n                        <a class="navLink" href="', a = n.quiz, s = a || e.quiz, s = s === null || s === undefined || s === !1 ? s : s.url, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "quiz.url", { hash: {} })), i += d(s) + "\">\n                            <div class='image-wrapper'>\n                                <img class='image' src=\"", a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgLocation", { hash: {} })), i += d(s), a = n.imgThumb, s = a || r.imgThumb, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgThumb", { hash: {} })), i += d(s), a = n.quiz, s = a || e.quiz, s = s === null || s === undefined || s === !1 ? s : s.imageId, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "quiz.imageId", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgExt", { hash: {} })), i += d(s) + '" alt="', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + '" border="0" />\n                            </div>\n                            <div class="quizBtn icon quiz" >\n                                <img src="/images/quiz-menu.png" alt="Quiz" role="presentation" />\n                                <span>Quiz</span>\n                            </div>\n                            <div class=\'h3-wrapper\'>\n                                <h3>', a = n.quiz, s = a || e.quiz, s = s === null || s === undefined || s === !1 ? s : s.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "quiz.title", { hash: {} })), i += d(s) + "</h3>\n                            </div>\n                        </a>\n                    </li>\n                    ", i } function L(e, t) { var r = "", i, s; a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.field_video, i = i === null || i === undefined || i === !1 ? i : i[0], i = i === null || i === undefined || i === !1 ? i : i.youtubeID, s = n["if"], f = l.programWithDepth(A, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += "\n                    ", a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.gallery, i = i === null || i === undefined || i === !1 ? i : i.image, s = n["if"], f = l.programWithDepth(O, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; return r } function A(e, t, r) { var i = "", s; return i += '\n                    <li class="videoIcon">\n                        <a class=" navLink" href="', a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.field_video, s = s === null || s === undefined || s === !1 ? s : s[0], s = s === null || s === undefined || s === !1 ? s : s.url, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.field_video.0.url", { hash: {} })), i += d(s) + "\">\n                            <div class='image-wrapper'>\n                                <img class='image'src=\"", a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgLocation", { hash: {} })), i += d(s), a = n.imgThumb, s = a || r.imgThumb, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgThumb", { hash: {} })), i += d(s), a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.videoImageId, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.videoImageId", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgExt", { hash: {} })), i += d(s) + '" alt="', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + '" border="0" />\n                            </div>\n                            <div class="videoBtn video icon">\n                                <img src="/images/play-icon.png" alt="Video" role="presentation" />\n                                <span>Video</span>\n                            </div>\n                            <div class=\'h3-wrapper\'>\n                                <h3>', a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.field_video, s = s === null || s === undefined || s === !1 ? s : s[0], s = s === null || s === undefined || s === !1 ? s : s.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.field_video.0.title", { hash: {} })), i += d(s) + "</h3>\n                            </div>\n                        </a>\n                    </li>", i } function O(e, t, r) { var i = "", s; return i += '\n                    <li class="galleryIcon">\n                        <a class="navLink" href="', a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.gallery, s = s === null || s === undefined || s === !1 ? s : s.url, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.gallery.url", { hash: {} })), i += d(s) + "\">\n                            <div class='image-wrapper'>\n                                <img class='image'src=\"", a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgLocation", { hash: {} })), i += d(s), a = n.galleryImgThumb, s = a || r.galleryImgThumb, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...galleryImgThumb", { hash: {} })), i += d(s), a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.galleryImageId, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.galleryImageId", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgExt", { hash: {} })), i += d(s) + '" alt="', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + '" border="0" />\n                            </div>\n                            <div class="galleryBtn gallery icon">\n                                <img src="/images/gallery-menu.png" alt="Gallery" role="presentation" />\n                                <span>Gallery</span>\n                            </div>\n                            <div class=\'h3-wrapper\'>\n                                <h3>', a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.gallery, s = s === null || s === undefined || s === !1 ? s : s.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.gallery.title", { hash: {} })), i += d(s) + "</h3>\n                            </div>\n                        </a>\n                    </li>\n                    ", i } function M(e, t) { var r = "", i, s; r += '<div class="breadcrumb"><nav class="links"><span itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a class="navLink" href="/', a = n.langCode, i = a || e.langCode, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "langCode", { hash: {} })), r += d(i) + "/", a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.subjectFriendly, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.subjectFriendly", { hash: {} })), r += d(i) + '/" itemprop="url"><span itemprop="title">', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.subject, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.subject", { hash: {} })), r += d(i) + '</span></a></span><span class="separator">&rsaquo;</span>', a = n.article, i = a || e.article, s = n["if"], f = l.program(30, _, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; return r += '<span class="currentPage">', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.title", { hash: {} })), r += d(i) + '</span></nav><button class="openTab">&rsaquo;</button></div>', r } function _(e, t) { var r = "", i, s; r += '<span itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a class="navLink" href="/', a = n.langCode, i = a || e.langCode, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "langCode", { hash: {} })), r += d(i) + "/", a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.subjectFriendly, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.subjectFriendly", { hash: {} })), r += d(i) + "/", a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.unitFriendly, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.unitFriendly", { hash: {} })), r += d(i) + '/" itemprop="url"><span itemprop="title">', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.unit, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.unit", { hash: {} })), r += d(i) + '</span></a></span><span class="separator">&rsaquo;</span>', a = n.parentArticle, i = a || e.parentArticle, s = n["if"], f = l.program(31, D, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; return r } function D(e, t) { var r = "", i; return r += '<span itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a class="navLink" href="', a = n.parentArticle, i = a || e.parentArticle, i = i === null || i === undefined || i === !1 ? i : i.url, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "parentArticle.url", { hash: {} })), r += d(i) + '" itemprop="url"><span itemprop="title">', a = n.parentArticle, i = a || e.parentArticle, i = i === null || i === undefined || i === !1 ? i : i.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "parentArticle.title", { hash: {} })), r += d(i) + '</span></a></span><span class="separator">&rsaquo;</span>', r } function P(e, t, r) { var i = "", s; return i += '\n            <li class="quizIcon">\n                <a class="navLink active" href="', a = n.quiz, s = a || e.quiz, s = s === null || s === undefined || s === !1 ? s : s.url, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "quiz.url", { hash: {} })), i += d(s) + "\">\n                    <div class='image-wrapper'>\n                        <img class='image' src=\"", a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgLocation", { hash: {} })), i += d(s), a = n.imgThumb, s = a || r.imgThumb, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgThumb", { hash: {} })), i += d(s), a = n.quiz, s = a || e.quiz, s = s === null || s === undefined || s === !1 ? s : s.imageId, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "quiz.imageId", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgExt", { hash: {} })), i += d(s) + '" alt="', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + '" border="0" />\n                    </div>\n                    <div class="quizBtn icon quiz" >\n                        <img src="/images/quiz-menu.png" alt="Quiz" role="presentation" />\n                        <span>Quiz</span>\n                    </div>\n                    <div class=\'h3-wrapper\'>\n                        <h3 class=\'title\'>', a = n.quiz, s = a || e.quiz, s = s === null || s === undefined || s === !1 ? s : s.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "quiz.title", { hash: {} })), i += d(s) + "</h3>\n                        <h3 class='static-text'>Take the quiz <span>&gt;</span></h3>\n                    </div>\n                </a>\n            </li>\n            ", i } function H(e, t) { var r = "", i, s; a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.field_video, i = i === null || i === undefined || i === !1 ? i : i[0], i = i === null || i === undefined || i === !1 ? i : i.youtubeID, s = n["if"], f = l.programWithDepth(B, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += "\n            ", a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.gallery, i = i === null || i === undefined || i === !1 ? i : i.image, s = n["if"], f = l.programWithDepth(j, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; return r } function B(e, t, r) { var i = "", s; return i += '\n            <li class="videoIcon">\n                <a class="navLink active" href="', a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.field_video, s = s === null || s === undefined || s === !1 ? s : s[0], s = s === null || s === undefined || s === !1 ? s : s.url, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.field_video.0.url", { hash: {} })), i += d(s) + "\">\n                    <div class='image-wrapper'>\n                        <img class='image'src=\"", a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgLocation", { hash: {} })), i += d(s), a = n.imgThumb, s = a || r.imgThumb, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgThumb", { hash: {} })), i += d(s), a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.videoImageId, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.videoImageId", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgExt", { hash: {} })), i += d(s) + '" alt="', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + '" border="0" />\n                    </div>\n                    <div class="videoBtn video icon">\n                        <img src="/images/play-icon.png" alt="Video" role="presentation" />\n                        <span>Video</span>\n                    </div>\n                    <div class=\'h3-wrapper\'>\n                        <h3 class=\'title\'>', a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.field_video, s = s === null || s === undefined || s === !1 ? s : s[0], s = s === null || s === undefined || s === !1 ? s : s.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.field_video.0.title", { hash: {} })), i += d(s) + "</h3>\n                        <h3 class='static-text'>Watch the video <span>&gt;</span></h3>\n                    </div>\n                </a>\n            </li>", i } function j(e, t, r) { var i = "", s; return i += '\n            <li class="galleryIcon">\n                <a class="navLink active" href="', a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.gallery, s = s === null || s === undefined || s === !1 ? s : s.url, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.gallery.url", { hash: {} })), i += d(s) + "\">\n                    <div class='image-wrapper'>\n                        <img class='image'src=\"", a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgLocation", { hash: {} })), i += d(s), a = n.galleryImgThumb, s = a || r.galleryImgThumb, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...galleryImgThumb", { hash: {} })), i += d(s), a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.galleryImageId, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.galleryImageId", { hash: {} })), i += d(s), a = n.imgExt, s = a || r.imgExt, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgExt", { hash: {} })), i += d(s) + '" alt="', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + '" border="0" />\n                    </div>\n                    <div class="galleryBtn gallery icon">\n                        <img src="/images/gallery-menu.png" alt="Gallery" role="presentation" />\n                        <span>Gallery</span>\n                    </div>\n                    <div class=\'h3-wrapper\'>\n                        <h3 class=\'title\'>', a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.gallery, s = s === null || s === undefined || s === !1 ? s : s.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "object.gallery.title", { hash: {} })), i += d(s) + "</h3>\n                        <h3 class='static-text'>View the gallery <span>&gt;</span></h3>\n                    </div>\n                </a>\n            </li>\n            ", i } function F(e, t) { return "hasAnimation" } function I(e, t) { var r = "", i; return r += '\n        <div class="animation-container">\n            <div id="', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.field_animation, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.field_animation", { hash: {} })), r += d(i) + '_hype_container" class="animation-wrapper">\n            <script type="text/javascript" charset="utf-8" src="', a = n.storageDomain, i = a || e.storageDomain, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "storageDomain", { hash: {} })), r += d(i) + "/animations/", a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.field_animation, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.field_animation", { hash: {} })), r += d(i) + "/", a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.field_animation, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.field_animation", { hash: {} })), r += d(i) + ".hyperesources/", a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.field_animation, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.field_animation", { hash: {} })), r += d(i) + '_hype_generated_script.js"></script>\n            </div>\n        </div>\n        ', r } function q(e, t) { var r = "", i, s; r += "\n        ", a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.images, s = n["if"], f = l.programWithDepth(R, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; return r += "\n        ", r } function R(e, t, r) { var i = "", s, o, u, f, l, d, v, m; i += "                    \n        ", a = n.object, s = a || e.object, s = s === null || s === undefined || s === !1 ? s : s.field_video, s = s === null || s === undefined || s === !1 ? s : s[0], s = s === null || s === undefined || s === !1 ? s : s.url, a = n.object, o = a || e.object, o = o === null || o === undefined || o === !1 ? o : o.gallery, o = o === null || o === undefined || o === !1 ? o : o.url, a = n.object, u = a || e.object, u = u === null || u === undefined || u === !1 ? u : u.layout, a = n.object, f = a || e.object, f = f === null || f === undefined || f === !1 ? f : f.boundingBox, f = f === null || f === undefined || f === !1 ? f : f.ratio, a = n.boxHeight, l = a || r.boxHeight, a = n.boxWidth, d = a || r.boxWidth, a = n.object, v = a || e.object, v = v === null || v === undefined || v === !1 ? v : v.images, a = n.formatCutout, m = a || e.formatCutout, typeof m === c ? s = m.call(e, v, d, l, f, u, o, s, { hash: {} }) : m === p ? s = h.call(e, "formatCutout", v, d, l, f, u, o, s, { hash: {} }) : s = m; if (s || s === 0) i += s; return i += "\n        ", i } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression; a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.field_animation, u = n.unless, f = l.program(1, v, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += "\n\n", a = n.object, o = a || t.object, u = n["if"], f = l.program(3, m, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s += "\n", s }) }), require.register("views/templates/teachers", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function m(e, t, r) { var i = "", s, o; i += '\n<div class="profile">\n	<header class="profile-header">\n		<span class="thumbnail ', a = n.user, s = a || e.user, s = s === null || s === undefined || s === !1 ? s : s["thumbnail-class"], typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "user.thumbnail-class", { hash: {} })), i += d(s) + '" style="background-image: url(', a = n.user, s = a || e.user, s = s === null || s === undefined || s === !1 ? s : s.thumbnail, o = n["if"], f = l.program(2, g, t), f.hash = {}, f.fn = f, f.inverse = l.programWithDepth(y, t, r), s = o.call(e, s, f); if (s || s === 0) i += s; return i += ');">\n		</span>\n		<div class="info">\n			<h1 class="user-name" role="heading" tabindex="0">', a = n.user, s = a || e.user, s = s === null || s === undefined || s === !1 ? s : s.name, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "user.name", { hash: {} })), i += d(s) + '</h1>\n		</div>\n	</header>\n	<footer class="profile-footer">\n		<button class="footer-btn btnSettings">Settings</button>\n		<button class="footer-btn btnLogout">Log out</button>\n	</footer>\n</div>\n', i } function g(e, t) { var r; return a = n.user, r = a || e.user, r = r === null || r === undefined || r === !1 ? r : r.thumbnail, typeof r === c ? r = r.call(e, { hash: {} }) : r === p && (r = h.call(e, "user.thumbnail", { hash: {} })), d(r) } function y(e, t, r) { var i = "", s; return a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "......imgLocation", { hash: {} })), i += d(s), a = n.imgCrop, s = a || r.imgCrop, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "......imgCrop", { hash: {} })), i += d(s) + "icons/IDG-icons_user-256px.png", i } function b(e, t) { return "logged-in" } function w(e, t) { var r = "", i, s; r += '\n	<div class="lessons">\n		<header class="lessons-header">\n			<h2>', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.lessonsHeader, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.lessonsHeader", { hash: {} })), r += d(i) + '</h2>\n		</header>\n		<div class="lesson-plans">\n			<!-- TODO delete, edit title? -->\n			', a = n.lessons, i = a || e.lessons, s = n.each, f = l.programWithDepth(E, t, e), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += '\n			<button class="newLesson">', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.newLesson, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.newLesson", { hash: {} })); if (i || i === 0) r += i; return r += "</button>\n		</div>\n	</div>\n	", r } function E(e, t, r) { var i = "", s; return i += '\n			<article class="lesson-plan" data-id="', a = n.content_id, s = a || e.content_id, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "content_id", { hash: {} })), i += d(s) + '">\n				<a href="', a = n.langCode, s = a || r.langCode, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...langCode", { hash: {} })), i += d(s) + "lesson-plan/", a = n.content_id, s = a || e.content_id, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "content_id", { hash: {} })), i += d(s) + '/" class="pageLink">\n					<div class="image-wrapper"><img src="', a = n.imgLocation, s = a || r.imgLocation, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgLocation", { hash: {} })), i += d(s), a = n.imgCrop, s = a || r.imgCrop, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "...imgCrop", { hash: {} })), i += d(s), a = n.image, s = a || e.image, s = s === null || s === undefined || s === !1 ? s : s.publicID, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "image.publicID", { hash: {} })), i += d(s) + '.jpg" alt="', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + '" role="presentation" tabindex="-1" /></div>\n					<div class ="image-overlay hidden"></div>\n					<h3 class="lesson-header">', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })), i += d(s) + ' <span class="cursor">&rsaquo;</span></h3>\n				</a>\n				<div class="buttons">\n					<button class="settingsBtn">Settings</button>\n					<div class="optionsBtns hidden">\n						<button class="duplicateBtn">Duplicate Lesson Plan</button>\n						<button class="deleteBtn">Delete This Lesson Plan</button>\n					</div>\n				</div>\n			</article>\n			', i } function S(e, t) { var r = "", i; r += "\n	<div class=\"intro-and-video\">\n    <div class=\"inner\">\n		<div class=\"intro\">\n			<h2>What is <span class='hide'>DKfindout!</span><img src='/images/ie/logo.png' alt='DKfindout!' role='presentation' /> for teachers?</h2>\n			<div class=\"intro-text\">", a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.introText, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.introText", { hash: {} })); if (i || i === 0) r += i; r += '</div>\n			<p class="link"><a href="#testimonials">', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.linkToTestimonials, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.linkToTestimonials", { hash: {} })), r += d(i) + '</a></p>\n		</div>\n		<div class="video-and-buttons">\n			<div class="video">\n				<h2>', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.videoHeader, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.videoHeader", { hash: {} })), r += d(i) + '</h2>\n        <!-- ie9 fix Youtube use ?wmode=opaque paramater -->\n				<iframe src="https://www.youtube.com/embed/', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.youTubeID, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.youTubeID", { hash: {} })), r += d(i) + '?wmode=opaque" frameborder="0" allowfullscreen></iframe>\n			</div>\n			<div class="logged-out">\n				<h2>', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.loggedOut, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.loggedOut", { hash: {} })); if (i || i === 0) r += i; return r += '</h2>\n	    	<button class="btnLogin showRegisterScreen increase-margin">', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.signUpBtn, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.signUpBtn", { hash: {} })), r += d(i) + '</button>\n	    	<button class="btnLogin showLoginScreen log-in">', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.loginBtn, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.loginBtn", { hash: {} })), r += d(i) + '</button>\n	    </div>\n    </div>\n    </div>\n    <div class="clearfix"></div>\n  </div>\n  ', r } function x(e, t) { return "logged-in" } function T(e, t) { var r = "", i; return r += '\n    	<div class="book">\n    		<a href="', a = n.url, i = a || e.url, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "url", { hash: {} })), r += d(i) + "\" target='_blank'><img src=\"", a = n.img, i = a || e.img, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "img", { hash: {} })), r += d(i) + '" alt="', a = n.title, i = a || e.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "title", { hash: {} })), r += d(i) + '">\n    			<h3>', a = n.title, i = a || e.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "title", { hash: {} })), r += d(i) + "</h3>\n    		</a>\n    	</div>\n    	", r } function N(e, t) { return "logged-in" } function C(e, t) { return "logged-in" } function k(e, t, r) { var i = "", s, o; i += "\n      ", a = n.slides, s = a || e.slides, o = n["if"], f = l.programWithDepth(L, t, r), f.hash = {}, f.fn = f, f.inverse = l.noop, s = o.call(e, s, f); if (s || s === 0) i += s; return i } function L(e, t, r) { var i = "", s, o; i += '\n      <div class="component ', a = n.titleFriendly, s = a || e.titleFriendly, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "titleFriendly", { hash: {} })), i += d(s) + " slides-", a = n.slides, s = a || e.slides, s = s === null || s === undefined || s === !1 ? s : s.length, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "slides.length", { hash: {} })), i += d(s) + '" data-component="', a = n.titleFriendly, s = a || e.titleFriendly, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "titleFriendly", { hash: {} })), i += d(s) + '">\n          <header class="comp-header">\n              <h3 tabindex="0" role="heading">', a = n.title, s = a || e.title, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "title", { hash: {} })); if (s || s === 0) i += s; i += '</h3>\n          </header>\n          <div class="comp-content"> \n              <div class="comp-slides">\n                  ', a = n.slides, s = a || e.slides, a = n.eachWithIndexPlusOne, o = a || e.eachWithIndexPlusOne, f = l.programWithDepth(A, t, e, r), f.hash = {}, f.fn = f, f.inverse = l.noop, a && typeof o === c ? s = o.call(e, s, f) : s = v.call(e, o, s, f); if (s || s === 0) i += s; i += "\n              </div>\n              ", a = n.slides, s = a || e.slides, a = n.ifCompSlides, o = a || e.ifCompSlides, f = l.program(34, H, t), f.hash = {}, f.fn = f, f.inverse = l.noop, a && typeof o === c ? s = o.call(e, s, f) : s = v.call(e, o, s, f); if (s || s === 0) i += s; return i += "\n            </div>\n        </div>\n        ", i } function A(e, t, r, i) { var s = "", o, u; s += '\n                  <article class="comp-slide" data-index="', a = n.index, o = a || e.index, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "index", { hash: {} })), s += d(o) + '" itemscope itemtype="http://schema.org/ImageObject">\n                      <', a = n.url, o = a || e.url, u = n["if"], f = l.programWithDepth(O, t, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; a = n.url, o = a || e.url, u = n.unless, f = l.program(26, M, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; s += ' class="pageLink slide-link" tabindex="0">\n                          ', a = n.image, o = a || e.image, u = n["if"], f = l.programWithDepth(_, t, r, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; s += '\n                          <span itemprop="description">', a = n.description, o = a || e.description, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "description", { hash: {} })); if (o || o === 0) s += o; s += "</span>\n                      </", a = n.url, o = a || e.url, u = n["if"], f = l.program(30, D, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; a = n.url, o = a || e.url, u = n.unless, f = l.program(32, P, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(e, o, f); if (o || o === 0) s += o; return s += ">\n                  </article>\n                  ", s } function O(e, t, r) { var i = "", s; return i += 'a href="', a = n.langCode, s = a || r.langCode, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "............langCode", { hash: {} })), i += d(s), a = n.url, s = a || e.url, typeof s === c ? s = s.call(e, { hash: {} }) : s === p && (s = h.call(e, "url", { hash: {} })), i += d(s) + '"', i } function M(e, t) { return "span" } function _(e, t, r, i) { var s = "", o; return s += '<div class="image-wrapper"><img itemprop="contentURL" src="', a = n.imgLocation, o = a || i.imgLocation, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "............imgLocation", { hash: {} })), s += d(o), a = n.imgGrid, o = a || i.imgGrid, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "............imgGrid", { hash: {} })), s += d(o), a = n.image, o = a || e.image, o = o === null || o === undefined || o === !1 ? o : o.publicID, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "image.publicID", { hash: {} })), s += d(o), a = n.imgExt, o = a || i.imgExt, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "............imgExt", { hash: {} })), s += d(o) + '" alt="', a = n.image, o = a || e.image, o = o === null || o === undefined || o === !1 ? o : o.alt, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "image.alt", { hash: {} })), s += d(o) + '" role="presentation" /><meta itemprop="name" content="', a = n.title, o = a || r.title, typeof o === c ? o = o.call(e, { hash: {} }) : o === p && (o = h.call(e, "......title", { hash: {} })), s += d(o) + '" /></div>', s } function D(e, t) { return "a" } function P(e, t) { return "span" } function H(e, t) { return '\n              <div class="comp-nav">\n                  <button class="navBtn prev" aria-label="Previous tabpanel"><span>&lsaquo;</span></button>\n                  <button class="navBtn next" aria-label="Next tabpanel"><span>&rsaquo;</span></button>\n              </div>\n              ' } function B(e, t) { return "logged-in" } function j(e, t) { var r = "", i, s; r += "\n  <div class=\"testimonials\" id='testimonials'>\n    <h2>", a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.testimonialHeading, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.testimonialHeading", { hash: {} })); if (i || i === 0) r += i; r += '</h2>\n    <div class="inner">\n    ', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.testimonials, a = n.eachWithIndexPlusOne, s = a || e.eachWithIndexPlusOne, f = l.program(39, F, t), f.hash = {}, f.fn = f, f.inverse = l.noop, a && typeof s === c ? i = s.call(e, i, f) : i = v.call(e, s, i, f); if (i || i === 0) r += i; return r += '\n    </div>\n  </div>\n  <div class="sign-up-now-button">\n    <button class="btnLogin showRegisterScreen">', a = n.object, i = a || e.object, i = i === null || i === undefined || i === !1 ? i : i.signUpNowBtn, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "object.signUpNowBtn", { hash: {} })), r += d(i) + "</button>\n  </div>\n   ", r } function F(e, t) { var r = "", i; return r += '\n      <div class="testimonial-container">\n        <div class="testimonial-container-inner">\n          <div class="testimonial testimonial-', a = n.index, i = a || e.index, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "index", { hash: {} })), r += d(i) + '">\n            <blockquote><p>', a = n.quote, i = a || e.quote, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "quote", { hash: {} })), r += d(i) + "</p></blockquote>\n            <p><cite>", a = n.name, i = a || e.name, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "name", { hash: {} })), r += d(i) + "</cite></p>\n          </div>\n        </div>\n      </div>\n    ", r } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression, v = n.blockHelperMissing; a = n.user, o = a || t.user, o = o === null || o === undefined || o === !1 ? o : o.uid, u = n["if"], f = l.programWithDepth(m, i, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '\n<div class="content ', a = n.user, o = a || t.user, o = o === null || o === undefined || o === !1 ? o : o.uid, u = n["if"], f = l.program(6, b, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += "\">\n	<header class=\"main-header\">\n		<h1><span class='hide'>DKFindOut!</span><img src='/images/ie/logo.png' alt='' role='presentation' /> <span class=\"sub-header\">", a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.subHeader, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.subHeader", { hash: {} })), s += d(o) + "</span></h1>\n		<p class='tag-line'>", a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.tagLine, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.tagLine", { hash: {} })), s += d(o) + "</p>\n	</header>\n	", a = n.user, o = a || t.user, o = o === null || o === undefined || o === !1 ? o : o.uid, u = n["if"], f = l.program(8, w, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += "\n\n	", a = n.user, o = a || t.user, o = o === null || o === undefined || o === !1 ? o : o.uid, u = n.unless, f = l.program(11, S, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '\n  <div class="books-promo ', a = n.user, o = a || t.user, o = o === null || o === undefined || o === !1 ? o : o.uid, u = n["if"], f = l.program(13, x, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '">\n  	<h2>', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.booksHeader, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.booksHeader", { hash: {} })), s += d(o) + "</h2>\n  	<p>", a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.booksTagLine, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.booksTagLine", { hash: {} })), s += d(o) + '</p>\n  	<div class="all-books">\n    	', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.books, u = n.each, f = l.program(15, T, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '\n  	</div>\n  	<div class="clearfix"></div>\n  </div>\n  <div class="whats-new-and-social ', a = n.user, o = a || t.user, o = o === null || o === undefined || o === !1 ? o : o.uid, u = n["if"], f = l.program(17, N, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '">\n    <div class="whats-new ', a = n.user, o = a || t.user, o = o === null || o === undefined || o === !1 ? o : o.uid, u = n["if"], f = l.program(19, C, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '">\n      ', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.whatsNew, u = n["with"], f = l.programWithDepth(k, i, t), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '\n    </div>\n    <div class="social-section ', a = n.user, o = a || t.user, o = o === null || o === undefined || o === !1 ? o : o.uid, u = n["if"], f = l.program(36, B, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += '">\n    	<h2 tabindex="0" role="heading">', a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.socialHeader, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.socialHeader", { hash: {} })); if (o || o === 0) s += o; s += "</h2>\n    	<p>", a = n.object, o = a || t.object, o = o === null || o === undefined || o === !1 ? o : o.socialSubHeader, typeof o === c ? o = o.call(t, { hash: {} }) : o === p && (o = h.call(t, "object.socialSubHeader", { hash: {} })); if (o || o === 0) s += o; s += '</p>\n    	<div id="social-share-buttons">\n    		<!-- Gigya social share buttons added by javascipt go here --> \n    	</div>\n    </div>\n  </div>\n  <div class="clearfix"></div>\n  ', a = n.user, o = a || t.user, o = o === null || o === undefined || o === !1 ? o : o.uid, u = n.unless, f = l.program(38, j, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s += "\n</div>", s }) }), require.register("views/templates/video", function (e, t, n) { n.exports = Handlebars.template(function (e, t, n, r, i) { function v(e, t) { var r = "", i, s; r += '\n<span itemscope itemtype="http://schema.org/VideoObject">\n<header class="header">\n    <h1><span itemprop="name">', a = n.title, i = a || e.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "title", { hash: {} })), r += d(i) + '</span></h1>\n</header>\n<div id="video-wrapper" class="">\n    ', a = n.videoID, i = a || e.videoID, s = n["if"], f = l.program(2, m, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += '\n    <div id="controls" class="', a = n.playMode, i = a || e.playMode, s = n["if"], f = l.program(4, g, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; r += " ", a = n.planningMode, i = a || e.planningMode, s = n["if"], f = l.program(6, y, t), f.hash = {}, f.fn = f, f.inverse = l.noop, i = s.call(e, i, f); if (i || i === 0) r += i; return r += '">\n        <button id="play" class="hide"></button>\n        <div id="seekbar">\n            <div draggable="true" id="progress"></div>\n        </div>\n        <button id="sound"></button>\n    </div>\n</div>\n</span>\n<a class="close pageLink" href="', a = n.articleLink, i = a || e.articleLink, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "articleLink", { hash: {} })), r += d(i) + '">Close</a>\n', r } function m(e, t) { var r = "", i; return r += '<meta itemprop="embedURL" content="http://www.youtube.com/watch?v=', a = n.videoID, i = a || e.videoID, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "videoID", { hash: {} })), r += d(i) + '"/>', r } function g(e, t) { return "playMode" } function y(e, t) { return "planningMode" } function b(e, t) { var r = "", i; return r += '\n<header class="header">\n    <h1>', a = n.title, i = a || e.title, typeof i === c ? i = i.call(e, { hash: {} }) : i === p && (i = h.call(e, "title", { hash: {} })), r += d(i) + '</h1>\n</header>\n<button class="close">Close</button>\n<div class="loadingGif">\n    <img src="/images/ajax-loader.gif" border="0" alt="Loading..." />\n</div>\n', r } n = n || e.helpers; var s = "", o, u, a, f, l = this, c = "function", h = n.helperMissing, p = void 0, d = this.escapeExpression; s += '<div class="video-inner hidden">\n', a = n.articleLink, o = a || t.articleLink, u = n["if"], f = l.program(1, v, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; s += "\n", a = n.articleLink, o = a || t.articleLink, u = n.unless, f = l.program(8, b, i), f.hash = {}, f.fn = f, f.inverse = l.noop, o = u.call(t, o, f); if (o || o === 0) s += o; return s += "\n</div>", s }) }), require.register("views/video_view", function (e, t, n) { var r = t("./view"), i = t("./templates/video"), s = t("../lib/utilities"), o = t("../lib/constants"), u = t("../application"); n.exports = r.extend({ id: "video_view", template: i, className: "view", player: "", isYTaccessible: !1, isVideoVisible: !1, initialize: function () { console.log("initialize video"), _.bindAll(this), this.render = _.bind(this.render, this), o.dataReady.on("video", this.videoLoaded) }, videoLoaded: function () { console.log("+++ VIDEO VIEW videoLoaded: has been triggered"); if ($("#video_view").hasClass("hidden") || $("#video_view").length < 1) return console.log("videoLoaded: don't do anything"), !0; this.render() }, videoDownloadEvent: function (e, t, n) { if (!n) return !1; dataLayer.push({ event: "videoDownload", eventCategory: "Videos", eventAction: e, eventLabel: t + "-&" + window.location.pathname }) }, render: function () { console.log(">>>>>render video"); var e = s.returnValueFromJSONObject("videoError", o.staticMessaging, "name", "copy"), t = s.returnValueFromJSONObject("videoSupport", o.staticMessaging, "name", "copy"), n = "", r = "", i = "", u = "", a = "", f = "", l = .5625, c = JSON.stringify(videoData.models[0]); c !== "undefined" && c !== undefined && (r = JSON.parse(c), i = r.youtubeID, u = r.title, a = r.width, f = r.height, l = f / a, a = 1440, f = a * l, n = "/" + s.getLanguageCode() + "/" + s.getCurrentSubject() + "/" + s.getCurrentUnit() + "/" + s.getCurrentArticle() + "/", r && (r.type = "video", r.id = r.titleFriendly, s.setCurrentObject(r), o.dataReady.trigger("object"), s.updateMeta(r, !0, "video"))), this.$el.html(this.template({ articleLink: n, title: u, videoID: i, playMode: s.getPlayMode(), planningMode: s.getPlanningMode() })); var h = this; return h.isVideoVisible = !0, setTimeout(function () { function r(e) { console.log("isYTScriptLoaded"), e || (e = "https://www.youtube.com/iframe_api"); var t = document.getElementsByTagName("script"); for (var n = t.length; n--;) if (t[n].src == e) return console.log("script found"), YT && onYouTubeIframeAPIReady(), !0; var r = document.createElement("script"); r.src = "https://www.youtube.com/iframe_api"; var i = document.getElementsByTagName("script")[0]; return i.parentNode.insertBefore(r, i), !1 } function o() { if (h.player && h.player.getDuration) { var e = $("#seekbar").width(), t = h.player.getDuration(), n = h.player.getCurrentTime(), r = n / t * 100; $("#progress").css("width", "" + r + "%") } } function p(e) { (function t() { if (h.player.getPlayerState() === 1) { o(), setTimeout(t, 250); return } })(), console.log("event.data is " + e.data); switch (e.data) { case 0: h.$el.find("#play").removeClass("pause"), h.$el.find(".header").removeClass("hide"); return; case 1: l ? (h.$el.find("#play").addClass("pause"), h.$el.find(".header").fadeOut("slow", function () { $(this).addClass("hide").attr("style", "") })) : (h.$el.find("#play").addClass("pause").delay(1500).fadeIn("slow", function () { $(this).removeClass("hide") }), h.$el.find(".header").delay(1500).fadeOut("slow", function () { $(this).addClass("hide").attr("style", "") }), l = !0); return; case 2: h.$el.find("#play").removeClass("pause"), h.$el.find(".header").removeClass("hide"); return; default: return } } function d(e) { console.log("video is ready"), s.sendGoogleEvent("videoDownload", "Videos", "Success", u + "-&" + window.location.pathname) } h.$el.find("#player").remove(), h.$el.find("#player").unbind(), $('<div id="player"></div>').insertBefore("#controls"), /iPhone|iPod/i.test(navigator.userAgent) && h.$el.find("#controls, .header, .close").addClass("hide"), s.showCurrentView(h), h.$el.find(".hidden").fadeIn("slow", function () { $(this).removeClass("hidden") }), h.$el.find(".close").tappable(function (e) { e.preventDefault(), console.log(">>>>> close video view"); var t = $(this); return $(this).hasClass("pageLink") ? ($(this).fadeOut("fast"), h.$el.find("#video-wrapper").fadeOut("fast", function () { s.navigateRemoveView(t, h, !1) })) : window.history.back(), !1 }); var n = function () { var e = 0; return function (t, n) { clearTimeout(e), e = setTimeout(t, n) } }(); onYouTubeIframeAPIReady = function () { console.log("onYouTubeIframeAPIReady called"), h.isYTaccessible = !0, h.$el.find(".error").remove(); if ($("html").hasClass("lt-ie9") || $("html").hasClass("no-backgroundsize") && /firefox/i.test(navigator.userAgent)) return $(".error").length === 0 && $('<div class="error"><p>' + t + "</p></div>").insertAfter("#video-wrapper"), !1; h.player = new YT.Player("player", { height: f, width: a, videoId: i, playerVars: { autoplay: 1, controls: 0, rel: 0, showinfo: 0, modestbranding: 1, vq: "hd1080", wmode: "transparent", iv_load_policy: 3 }, events: { onReady: d, onStateChange: p } }) }, r(); var l = !1; playPause = function () { switch (h.player.getPlayerState()) { case -1: case 0: case 2: h.player.playVideo(); return; case 1: h.player.pauseVideo(); return; default: return } }, toggleSound = function () { h.player.isMuted() ? (h.player.unMute(), h.$el.find("#sound").removeClass("off")) : (h.player.mute(), h.$el.find("#sound").addClass("off")) }, h.$el.find("#play").tappable(function (e) { e.preventDefault(), console.log("play/pause button clicked"), playPause() }), h.$el.find("#sound").tappable(function (e) { e.preventDefault(), console.log("sound button clicked"), toggleSound() }), !h.isYTaccessible && c !== "undefined" && c !== undefined && (console.log("Video ready but YT is not accessible"), $('<div class="error noConnection"><p>' + e + "</p></div>").insertAfter("#video-wrapper"), h.$el.find(".noConnection").delay(3e3).fadeIn(), s.sendGoogleEvent("videoDownload", "Videos", "Fail", u + "-&" + window.location.pathname)) }, 0), this } }) }), require.register("views/view", function (e, t, n) { t("lib/view_helper"), n.exports = Backbone.View.extend({ tagName: "section", initialize: function () { this.render = _.bind(this.render, this) }, template: function () { }, getRenderData: function () { }, render: function () { return this.$el.html(this.template(this.getRenderData())), this.afterRender(), this }, afterRender: function () { } }) })